<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<title>Managing a Neo4j Database</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Managing a Neo4j Database</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_about_this_module">About this module</a></li>
<li><a href="#_neo4j_instance_files">Neo4j instance files</a></li>
<li><a href="#_changing_the_password_for_neo4j">Changing the password for Neo4j</a>
<ul class="sectlevel2">
<li><a href="#_exercise_1_change_the_password_for_neo4j"><strong>Exercise #1: Change the password for Neo4j</strong></a></li>
</ul>
</li>
<li><a href="#_starting_the_neo4j_instance">Starting the Neo4j instance</a>
<ul class="sectlevel2">
<li><a href="#_exercise_2_start_the_neo4j_instance"><strong>Exercise #2: Start the Neo4j instance</strong></a></li>
</ul>
</li>
<li><a href="#_stopping_the_neo4j_instance">Stopping the Neo4j instance</a>
<ul class="sectlevel2">
<li><a href="#_exercise_3_stop_the_neo4j_instance"><strong>Exercise #3: Stop the Neo4j instance</strong></a></li>
</ul>
</li>
<li><a href="#_renaming_a_neo4j_database">Renaming a Neo4j database</a></li>
<li><a href="#_copying_a_database">Copying a database</a>
<ul class="sectlevel2">
<li><a href="#_dumping_a_database">Dumping a database</a></li>
<li><a href="#_loading_a_database">Loading a database</a></li>
<li><a href="#_exercise_4_copying_a_database"><strong>Exercise #4: Copying a database</strong></a></li>
</ul>
</li>
<li><a href="#_modifying_the_location_of_the_database">Modifying the location of the database</a>
<ul class="sectlevel2">
<li><a href="#_exercise_5_modifying_the_location_of_the_database"><strong>Exercise #5: Modifying the location of the database</strong></a></li>
</ul>
</li>
<li><a href="#_checking_the_consistency_of_a_database">Checking the consistency of a database</a>
<ul class="sectlevel2">
<li><a href="#_exercise_6_checking_consistency_of_a_database"><strong>Exercise #6: Checking consistency of a database</strong></a></li>
</ul>
</li>
<li><a href="#_using_cyphershell">Using cypher=shell</a>
<ul class="sectlevel2">
<li><a href="#_scripting_with_cypher_shell">Scripting with cypher-shell</a></li>
<li><a href="#_exercise_7_scripting_changes_to_the_database"><strong>Exercise #7: Scripting changes to the database</strong></a></li>
</ul>
</li>
<li><a href="#_managing_plugins_required_for_the_database">Managing plugins required for the database</a>
<ul class="sectlevel2">
<li><a href="#_adding_a_plugin_to_the_neo4j_instance">Adding a plugin to the Neo4j instance</a></li>
<li><a href="#_installing_the_graph_algorithms_plugin">Installing the Graph Algorithms plugin</a></li>
<li><a href="#_installing_the_apoc_plugin">Installing the APOC plugin</a></li>
<li><a href="#_exercise_8_install_some_plugins"><strong>Exercise #8: Install some plugins</strong></a></li>
</ul>
</li>
<li><a href="#_configuring_connector_ports_for_the_neo4j_instance">Configuring connector ports for the Neo4j instance</a>
<ul class="sectlevel2">
<li><a href="#_exercise_9_modify_the_http_port"><strong>Exercise #9: Modify the HTTP port</strong></a></li>
</ul>
</li>
<li><a href="#_check_your_understanding">Check your understanding</a>
<ul class="sectlevel2">
<li><a href="#_question_1">Question 1</a></li>
<li><a href="#_question_2">Question 2</a></li>
<li><a href="#_question_3">Question 3</a></li>
</ul>
</li>
<li><a href="#_summary">Summary</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
	<script type='text/javascript'>
	var loc = window.location;
	if (loc.hostname == "neo4j.com" && loc.search.indexOf("aliId=") == -1 ) {
	 loc.pathname = "/graphacademy/online-training/XXXX/"
	}
	document.write(unescape("%3Cscript src='//munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script>Munchkin.init('773-GON-065');</script>
</div>
</div>
<div class="sect1">
<h2 id="_about_this_module">About this module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have installed the Neo4j Enterprise Edition, you will learn how to perform some administrative tasks with the Neo4j instance.</p>
</div>
<div class="paragraph">
<p>At the end of this module, you should be able to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
<p>Set the password for the <em>neo4j</em> user.</p>
</li>
<li>
<p>Start a Neo4j instance.</p>
</li>
<li>
<p>Stop the Neo4j instance.</p>
</li>
<li>
<p>Copy a Neo4j database.</p>
</li>
<li>
<p>Modify the location for a Neo4j database.</p>
</li>
<li>
<p>Check the consistency of a Neo4j database.</p>
</li>
<li>
<p>Create scripts for modifying a Neo4j database.</p>
</li>
<li>
<p>Manage plugins for a Neo4j database.</p>
</li>
<li>
<p>Configure ports used by the Neo4j instance.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_neo4j_instance_files">Neo4j instance files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here is the file structure for a Neo4j installation which is commonly referred to as <em>NEO4J_HOME</em>:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/Neo4jInstallFiles.png" alt="Neo4jInstallFiles" width="600">
</div>
</div>
<div class="paragraph">
<p>In this training, you will be working in some of these folders. The <strong>bin</strong> folder contains the tooling scripts you will typically run to manage the Neo4j instance. The <strong>conf</strong> folder contains configuration files that you will be modifying. The <strong>data</strong> folder contains the database(s). The <strong>logs</strong> folder contains log files that you can monitor.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changing_the_password_for_neo4j">Changing the password for Neo4j</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you do anything with Neo4j, you should change the default password for the user, <em>neo4j</em>. Doing so enables you to, at a minimum, control who can manage this Neo4j instance. Later in this training, you will learn more about securing Neo4j.</p>
</div>
<div class="paragraph">
<p>You change the password with the <strong>neo4j-admin</strong> tool that is found in the <strong>bin</strong> folder of your Neo4j Enterprise Edition installation (NEO4J_HOME). Here is the command you use to change the password:</p>
</div>
<div class="paragraph">
<p><code>neo4j-admin set-initial-password thePassword</code></p>
</div>
<div class="paragraph">
<p>Here is an example where in a terminal window, we have navigated to the <strong>bin</strong> folder in our Neo4j installation and have entered the command to set the initial password for the <em>neo4j</em> user to be <em>training-helps</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/SetInitialPassword.png" alt="SetInitialPassword" width="800">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Using <code>set-initial-password</code> to change the Neo4j password for the default <em>neo4j</em> user can be done at any time, not just initially as the command name might imply.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_exercise_1_change_the_password_for_neo4j"><strong>Exercise #1: Change the password for Neo4j</strong></h3>
<div class="paragraph">
<p><strong>Before you begin</strong></p>
</div>
<div class="paragraph">
<p>You should have installed Neo4j Enterprise Edition on your system and made a note of where you installed it. We refer to this location as NEO4J_HOME.</p>
</div>
<div class="paragraph">
<p><strong>Exercise steps</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a terminal on your system.</p>
</li>
<li>
<p>Navigate to the <strong>bin</strong> folder of NEO4J_HOME.</p>
</li>
<li>
<p>Use the admin-tool to change the <em>neo4j</em> user password to something you will remember.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_starting_the_neo4j_instance">Starting the Neo4j instance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you start the Neo4j instance for the first time, it automatically creates a database in the <strong>data/databases</strong> folder. Subsequent starts of the Neo4j instance simply uses the default database created.</p>
</div>
<div class="paragraph">
<p>You use the the <code>neo4j</code> script to start the Neo4j instance as follows:</p>
</div>
<div class="paragraph">
<p><code>neo4j start</code></p>
</div>
<div class="paragraph">
<p>Here is an example where in a terminal window, we start Neo4j instance:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/StartInstance.png" alt="StartInstance" width="800">
</div>
</div>
<div class="paragraph">
<p>When the Neo4j instance starts, it creates the database and writes to the folders for the instance.</p>
</div>
<div class="paragraph">
<p>At any time, you can check the status of the Neo4j instance with the status command of the <code>neo4j</code> tool as shown here:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/Neo4jStatus.png" alt="Neo4jStatus" width="800">
</div>
</div>
<div class="paragraph">
<p>Here are some important files to note after you have started the Neo4j instance:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/Neo4jFilesAfterStart.png" alt="Neo4jFilesAfterStart" width="800">
</div>
</div>
<div class="ulist square">
<ul class="square">
<li>
<p>A new database has been created which is named <strong>graph.db</strong>.</p>
</li>
<li>
<p>Information has been written to <strong>neo4j.log</strong>.</p>
</li>
<li>
<p>The PID for the Neo4j instance is written in the <strong>run</strong> folder. This is helpful since on systems with multiple JVMs, you need to know which one is the Neo4j instance JVM in the event that you need to kill it.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As an administrator, you should become familiar with the types of records that are written to <strong>neo4j.log</strong>.  Here is the tail of that file:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/FirstNeo4jLog.png" alt="FirstNeo4jLog" width="800">
</div>
</div>
<div class="paragraph">
<p>When the Neo4j instance starts, you can also confirm that it is started by seeing the <em>Started</em> record in the log file.</p>
</div>
<div class="paragraph">
<p>After the Neo4j instance is started, you can access the database with Neo4j Browser using port <em>7474</em>. In Neo4j Browser, when you attempt to access the Neo4j database, you must first enter the credentials for the <em>neo4j</em> user that you configured when you set the password:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/InitialNeo4jBrowser.png" alt="InitialNeo4jBrowser" width="800">
</div>
</div>
<div class="paragraph">
<p>In Neo4j Browser, once you are connected, it is sometimes helpful to view information about the the Neo4j instance using the <code>:sysinfo</code> command. This provides you with information about the size of the database and how much activity has occurred against the database since it was started.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/Sysinfo.png" alt="Sysinfo" width="800">
</div>
</div>
<div class="sect2">
<h3 id="_exercise_2_start_the_neo4j_instance"><strong>Exercise #2: Start the Neo4j instance</strong></h3>
<div class="paragraph">
<p>In this Exercise, you will start the Neo4j instance for the first time and confirm that it is started. You will connect to the started database with Neo4j Browser and load some data into the newly created database.</p>
</div>
<div class="paragraph">
<p><strong>Before you begin</strong></p>
</div>
<div class="paragraph">
<p>You should have changed the <em>neo4j</em> user password to something you will remember.</p>
</div>
<div class="paragraph">
<p><strong>Exercise steps</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a terminal on your system.</p>
</li>
<li>
<p>Navigate to the <strong>bin</strong> folder of NEO4J_HOME.</p>
</li>
<li>
<p>Use the <code>neo4j</code> script to start the Neo4j instance.</p>
</li>
<li>
<p>Examine the files and folders created for this initial start of the Neo4j instance.</p>
</li>
<li>
<p>Examine the contents of <strong>neo4j.log</strong>.</p>
</li>
<li>
<p>In a Web browser, access the Neo4j database with Neo4j Browser at port 7474 on your local host.</p>
</li>
<li>
<p>Enter the password for the <em>neo4j</em> user and then click <strong>Connect</strong>. You now have access to a started and empty database.</p>
</li>
<li>
<p>In the query edit pane of Neo4j Browser enter <code>:play movie graph</code> which will open the Browser Guide for working with the Movie graph. It should look like this:</p>
</li>
</ol>
</div>
<div class="imageblock thumb" style="text-align: center">
<div class="content">
<img src="../img/PlayMovieGraph.png" alt="PlayMovieGraph" width="800">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Go to page two of the Browser Guide.</p>
</li>
<li>
<p>Click the Cypher code box. This should bring the Cypher code to the query edit pane. The Cypher statements for loading the database should now be in the query edit pane:</p>
</li>
</ol>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/LoadMovieData.png" alt="LoadMovieData" width="800">
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p>Click the <strong>Play</strong> button. This loads data into the graph.db database for your Neo4j instance. You should have 171 nodes in this database.</p>
</li>
</ol>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/MovieDataLoaded.png" alt="MovieDataLoaded" width="800">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stopping_the_neo4j_instance">Stopping the Neo4j instance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You use the same script for stopping the Neo4j instance, providing <code>stop</code> as the command:</p>
</div>
<div class="paragraph">
<p><code>neo4j stop</code></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/StopInstance.png" alt="StopInstance" width="800">
</div>
</div>
<div class="paragraph">
<p>And we can view and confirm that the Neo4j instance is stopped in the log file:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/StopLog.png" alt="StopLog" width="800">
</div>
</div>
<div class="sect2">
<h3 id="_exercise_3_stop_the_neo4j_instance"><strong>Exercise #3: Stop the Neo4j instance</strong></h3>
<div class="paragraph">
<p><strong>Before you begin</strong></p>
</div>
<div class="paragraph">
<p>The Neo4j instance should be started.</p>
</div>
<div class="paragraph">
<p><strong>Exercise steps</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a terminal on your system.</p>
</li>
<li>
<p>Navigate to the <strong>bin</strong> folder of NEO4J_HOME.</p>
</li>
<li>
<p>Use the <code>neo4j</code> script to stop the Neo4j instance.</p>
</li>
<li>
<p>Examine the <strong>neo4j.log</strong> file to confirm that the Neo4j instance is stopped.</p>
</li>
<li>
<p>Confirm that you no longer have access to the database with Neo4j Browser.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_renaming_a_neo4j_database">Renaming a Neo4j database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, the Neo4j database is located in the <strong>$NEO4J_HOME/data/databases</strong> folder. The database is represented by a subfolder with the default name, <strong>graph.db</strong>. You should never modify, copy, or move any files or folders under <strong>graph.db</strong>.</p>
</div>
<div class="paragraph">
<p>A key file for a Neo4j instance is <strong>$NEO4J_HOME/conf/neo4j.conf</strong>. This file contains all settings used by Neo4j at runtime. Here is a portion of the default <strong>neo4j.conf</strong> file that is installed with Neo4j. The setting for the name of the database is the property <em>dbms.active_database</em>, which, by default, is <strong>graph.db</strong> Since this is the default configuration as installed, this setting is commented out in the configuration file because Neo4j assumes that the default will be used a runtime.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/DefaultNeo4jConfig.png" alt="DefaultNeo4jConfig" width="800">
</div>
</div>
<div class="paragraph">
<p>If you wanted to change the name of the Neo4j database, you could change the folder name <strong>graph.db</strong> to another name, but if you do so, you must uncomment the line in <strong>neo4j.conf</strong> for <em>dbms.active_database</em> to match what you have renamed the database folder to. You must make this type of change in the configuration when the Neo4j instance is stopped.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_copying_a_database">Copying a database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The structure of a Neo4j database is proprietary and could change from one release to another. You should <span class="underline">never</span> copy the database from one location in the filesystem/network to another location using terminal shell commands or GUI tools such as File Explorer on Windows or Finder on OS X.</p>
</div>
<div class="paragraph">
<p>To copy a database that, perhaps you want to have as a backup or you want to give  to another user for use on their system, you must:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the Neo4j instance.</p>
</li>
<li>
<p>Ensure that the folder where you will dump the database exists.</p>
</li>
<li>
<p>Use the <strong>dump</strong> command of the <code>neo4j-admin</code> tool to create the dump file.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Then, if you want to create a database from the dump file to use in a Neo4j instance, you must:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the Neo4j instance.</p>
</li>
<li>
<p>Determine what you will call the new database and adjust <strong>neo4j.conf</strong> to use this database as the active database.</p>
</li>
<li>
<p>Use the <strong>load</strong> command of the <code>neo4j-admin</code> tool to create the database from the dump file.</p>
</li>
<li>
<p>Start the Neo4j instance.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_dumping_a_database">Dumping a database</h3>
<div class="paragraph">
<p>To dump a database, the Neo4j instance must be stopped.
Here is how to use the <strong>dump</strong> command of the  <code>neo4j-admin</code> tool to dump a database to a file:</p>
</div>
<div class="paragraph">
<p><code>neo4j-admin dump --database=db-folder --to=db-target-folder/db-dump-file</code></p>
</div>
<div class="paragraph">
<p><em>where:</em></p>
</div>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-none grid-all stripes-none" style="width: 80%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>db-folder</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is the name of the folder representing source database to be dumped.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>db-target-folder</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is the folder in the filesystem where you want to place the dumped database. This folder must exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>db-dump-file</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is the name of the dump file that will be created.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Here is an example where we have renamed the database to be <em>movie.db</em> and we have created a folder named <em>dumps</em>. We dump the <em>movie.db</em> using <code>neo4j-admin</code>:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/DumpDatabase.png" alt="DumpDatabase" width="800">
</div>
</div>
<div class="paragraph">
<p>After the dump file, <em>movie-dump</em> is created, you can move it anywhere on filesystem or network.</p>
</div>
</div>
<div class="sect2">
<h3 id="_loading_a_database">Loading a database</h3>
<div class="paragraph">
<p>Assuming that you have a dump file to use, you must first determine what the name of the target database will be. If you use an existing database name, the load command, can overwrite the database. If you want to create a new database, then you specify a database name that does not already exist. To perform the load command, the Neo4j instance must be stopped.</p>
</div>
<div class="paragraph">
<p>Here is how to use the <strong>load</strong> command of the  <code>neo4j-admin</code> tool to load a database from a file:</p>
</div>
<div class="paragraph">
<p><code>neo4j-admin load --from=path/db-dump-file --database=db-folder [--force=true]</code>
<em>where:</em></p>
</div>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-none grid-all stripes-none" style="width: 80%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>path</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is a folder in the filesystem where the dump file resides.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>db-dump-file</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is the file previously created with the <strong>dump</strong> command of <code>neo4j-admin</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>db-folder</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is the name of the database that will be created or overwritten if --force is specified as <code>true</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Here is an example where we load the contents of <strong>movie-dump</strong> into a database named <strong>movie2.db</strong>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/LoadDatabase.png" alt="LoadDatabase" width="800">
</div>
</div>
<div class="paragraph">
<p>In order to access this newly created and loaded database, we must modify <strong>neo4j.conf</strong> to use <strong>movie2.db</strong> as the active database before starting the Neo4j instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_exercise_4_copying_a_database"><strong>Exercise #4: Copying a database</strong></h3>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modifying_the_location_of_the_database">Modifying the location of the database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you do not want the database used by the Neo4j instance to reside in the same location as the Neo4j installation, you can modify it in the <strong>neo4j.conf</strong> file. If you specify a new location for the data, it must exist in the filesystem.</p>
</div>
<div class="paragraph">
<p>Here we have specified a new location for the data in the configuration file:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/ModifyDataLocation.png" alt="ModifyDataLocation" width="800">
</div>
</div>
<div class="paragraph">
<p>We ensure that the location for the data exists and then we can start the Neo4j instance. If this is the first time Neo4j has been started for this location, a new database named <strong>graph.db</strong> will be created.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/UsingNewDataLocation.png" alt="UsingNewDataLocation" width="800">
</div>
</div>
<div class="paragraph">
<p>If you have an existing database that you want to reside in a different location for the Neo4j instance, remember that you must dump and load the database to safely copy it to the new location.</p>
</div>
<div class="sect2">
<h3 id="_exercise_5_modifying_the_location_of_the_database"><strong>Exercise #5: Modifying the location of the database</strong></h3>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_checking_the_consistency_of_a_database">Checking the consistency of a database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A database&#8217;s consistency could be compromised if a software or hardware failure has occurred that affects the Neo4j instance. You will learn later in this training about live backups and replicating databases, but if you have reason to believe that a specific database has been corrupted,  you can perform a consistency check on it.</p>
</div>
<div class="paragraph">
<p>The Neo4j instance must be stopped to perform the consistency check.</p>
</div>
<div class="paragraph">
<p>Here is how you use the <code>neo4j-admin</code> tool to check the consistency of the database:</p>
</div>
<div class="paragraph">
<p><code>neo4j-admin check-consistency --database=db-name --report-dir=report-location [--verbose=true]</code></p>
</div>
<div class="paragraph">
<p>The database named <em>db-name</em> is found in the data location specified in <strong>neo4j.conf</strong> file. If the tools comes back with no error, then the database is consistent. Otherwise, an error is returned and a report is written to <em>report-location</em>. You can specify verbose reporting. See the <em>Operations Manual</em> for more options. For example, you can check the consistency of a backup.</p>
</div>
<div class="paragraph">
<p>Here is what a successful run of the consistency checker should produce:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/ConsistentPassed.png" alt="ConsistentPassed" width="800">
</div>
</div>
<div class="paragraph">
<p>Here is an example of what an unsuccessful run of the consistency checker should produce:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/Inconsistencies1.png" alt="Inconsistencies1" width="800">
</div>
</div>
<div class="paragraph">
<p>If inconsistencies are found, are report is generated and placed in the folder specified for the report location:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/Inconsistencies2.png" alt="Inconsistencies2" width="800">
</div>
</div>
<div class="paragraph">
<p>Inconsistencies in a database are a serious matter that should be looked into with the help of Technical support. Later in this training you will learn more about troubleshooting problems that are detected.</p>
</div>
<div class="sect2">
<h3 id="_exercise_6_checking_consistency_of_a_database"><strong>Exercise #6: Checking consistency of a database</strong></h3>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_cyphershell">Using cypher=shell</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cypher-shell enables you to access the Neo4j database without using Neo4j Browser. There may be situations where you want to modify the database or add or remove indexes or constraints from the database. Rather than doing this from Neo4j Browser, you can access the database from a terminal window. You simply log into the database using cypher-shell with your credentials.
Once authenticated, the Cypher statements execute just as they would in Neo4j Browser. One caveat with <code>cypher-shell</code>, however is that all Cypher commands <span class="underline">must</span> end with <code>;</code>.</p>
</div>
<div class="paragraph">
<p>In this example, we log into <code>cypher-shell</code> with our credentials. Then we execute the Cypher statement to create a unique constraint. Notice that we specify <code>;</code> at the end of the Cypher statement.  We then execute another Cypher statement to create a different unique constraint. Finally, we specify <code>:exit</code> to log out of <code>cypher-shell</code>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/Cypher-shell.png" alt="Cypher-shell" width="800">
</div>
</div>
<div class="sect2">
<h3 id="_scripting_with_cypher_shell">Scripting with cypher-shell</h3>
<div class="paragraph">
<p>As a database administrator, you may need to automate changes to the database. The most common types of changes that administrators may want to do are operations such as adding/dropping constraints or indexes. You can create scripts that forward the Cypher statements to <code>cypher-shell</code>.  The number of supporting script files you create will depend upon the tasks you want to perform against the database.</p>
</div>
<div class="paragraph">
<p>For example, on a OS X using <em>bash</em>, we create 3 files:</p>
</div>
<div class="paragraph">
<p><strong>PrepareDB.sh</strong> that initializes the log file, <strong>PrepareDB.log</strong>, and calls the script to drop the constraints:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rm -rf $NEO4J_HOME/work/PrepareDB.log
$NEO4J_HOME/work/DropConstraints.sh 2&gt;&amp;1 &gt;&gt; $NEO4J_HOME/work/PrepareDB.log</pre>
</div>
</div>
<div class="paragraph">
<p><strong>DropConstraints.sh</strong> that invokes <code>cypher-shell</code> using a set of Cypher statements and appends its output to the log file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>at $NEO4J_HOME/work/DropConstraints.cypher | $NEO4J_HOME/bin/cypher-shell -u neo4j -p training-helps --format verbose 2&gt;&amp;1 &gt;&gt; $NEO4J_HOME/work/PrepareDB.log</pre>
</div>
</div>
<div class="paragraph">
<p><strong>DropConstraints.cypher</strong> that contains the Cypher statements to execute in <code>cypher-shell</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>DROP CONSTRAINT ON (m:Movie) ASSERT m.title IS UNIQUE;
DROP CONSTRAINT ON (p:Person) ASSERT p.name IS UNIQUE;</pre>
</div>
</div>
<div class="paragraph">
<p>Each Cypher statement must end with a <code>;</code>.</p>
</div>
<div class="paragraph">
<p>When the <strong>PrepareDB.sh</strong> script runs its scripts, all output will be written to the log file, including error output. Then you can simply check the log file to make sure it ran as expected.</p>
</div>
</div>
<div class="sect2">
<h3 id="_exercise_7_scripting_changes_to_the_database"><strong>Exercise #7: Scripting changes to the database</strong></h3>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_managing_plugins_required_for_the_database">Managing plugins required for the database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some applications can use Neo4j out-of-the-box, but many applications require additional functionality that could be:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
<p>A library supported by Neo4j such as GraphQL or GRAPH ALGORITHMS.</p>
</li>
<li>
<p>A community-supported library, such as APOC.</p>
</li>
<li>
<p>Custom functionality that has been written by the developers of your application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We refer to this additional functionality as a <em>plugin</em> that contains specific procedures. First, you should understand how to view the procedures available for use with the Neo4j instance. You do so by executing the Cypher statement <code>CALL db.procedures()</code>.</p>
</div>
<div class="paragraph">
<p>Here is an example of a script you can run to produce a file, <strong>Procedures.txt</strong> that contain the names of the procedures currently available for the Neo4j instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>echo "CALL dbms.procedures() YIELD name;" | $NEO4J_HOME/bin/cypher-shell -u neo4j -p training-helps --format plain &gt; $NEO4J_HOME/work/Procedures.txt</pre>
</div>
</div>
<div class="paragraph">
<p>This script calls dbms.procedures to return the name of each procedure in the list returned.</p>
</div>
<div class="paragraph">
<p>Here is a view of <strong>Procedures.txt</strong>:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/DefaultProcedures.png" alt="DefaultProcedures" width="800">
</div>
</div>
<div class="paragraph">
<p>By default, the procedures available to the Neo4j instance are the built-in procedures that are named <em>db.*</em> and <em>dbms.*</em>.</p>
</div>
<div class="sect2">
<h3 id="_adding_a_plugin_to_the_neo4j_instance">Adding a plugin to the Neo4j instance</h3>
<div class="paragraph">
<p>To add a plugin to your Neo4j instance, you must first obtain the <strong>.jar</strong> file. It is important to confirm that the <strong>.jar</strong> file you will use is compatible with the version of Neo4j that you are using. For example, a plugin released for release 3.4 of Neo4j can be used by a Neo4j 3.5 instance, but the converse <strong>may</strong> not be true. You must check with the developers of the plugin for compatibility.</p>
</div>
<div class="paragraph">
<p>Some plugins require a configuration change. You should understand the configuration changes required for any plugin you are installing.</p>
</div>
<div class="paragraph">
<p>Neo4j provides <em>sandboxing</em> to ensure that procedures do not inadvertently use insecure APIs. For example, when writing custom code it is possible to access Neo4j APIs that are not publicly supported, and these internal APIs are subject to change, without notice.
Additionally, their use comes with the risk of performing insecure actions. The sandboxing
functionality limits the use of extensions to publicly supported APIs, which exclusively contain safe operations,
or contain security checks.</p>
</div>
<div class="paragraph">
<p>Neo4j <em>White listing</em> can be used to allow loading only a few extensions from a larger library.
The configuration setting <em>dbms.security.procedures.whitelist</em> is used to name certain procedures that should be
available from a library. It defines a comma-separated list of procedures that are to be loaded.
The list may contain both fully-qualified procedure names, and partial names with the wildcard *.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_graph_algorithms_plugin">Installing the Graph Algorithms plugin</h3>
<div class="paragraph">
<p>Suppose we wanted to install the Graph Algorithms library that is compatible with Neo4j 3.5. We find the library in GitHub and simply download the <strong>.jar</strong> file. Here is the <a href="https://github.com/neo4j-contrib/neo4j-graph-algorithms/releases">release area</a> in GitHub for the graph algorithms library:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/GitHubGraphAlgos.png" alt="GitHubGraphAlgos" width="800">
</div>
</div>
<div class="paragraph">
<p>The main page for <a href="https://github.com/neo4j-contrib/neo4j-graph-algorithms">Graph Algorithms</a> in GitHub contains details about the plugin and instructions for installing it.</p>
</div>
<div class="paragraph">
<p>After you have downloaded the <strong>.jar</strong> file, you simply place it in the <strong>$NEO4J_HOME/plugins</strong> folder:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/GraphAlgos.png" alt="GraphAlgos" width="800">
</div>
</div>
<div class="paragraph">
<p>The graph algorithms plugin requires <em>sandboxing</em>.
Here is how we enable the procedures in the graph algorithms plugin. We modify the <strong>neo4j.conf</strong> file as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>dbms.security.procedures.unrestricted=algo.*</pre>
</div>
</div>
<div class="paragraph">
<p>You must then start or restart the Neo4j instance. You can restart the Neo4j instance using the restart command:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/RestartNeo4j.png" alt="RestartNeo4j" width="800">
</div>
</div>
<div class="paragraph">
<p>Once started, you can then run the script to return the names of the procedures that are available to the Neo4j instance. Here we see that we have the additional procedures for the graph algorithms plugin:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/GraphAlgosInstalled.png" alt="GraphAlgosInstalled" width="800">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_apoc_plugin">Installing the APOC plugin</h3>
<div class="paragraph">
<p><a href="https://github.com/neo4j-contrib/neo4j-apoc-procedures">APOC</a> (Awesome Procedures on Cypher) is a very popular plugin used by many applications. It contains over 450 user-defined procedures that make accessing a graph incredibly efficient and much easier than writing your own Cypher statements to do the same thing.</p>
</div>
<div class="paragraph">
<p>You obtain the plugin from the APOC <a href="https://github.com/neo4j-contrib/neo4j-apoc-procedures/releases">releases</a> page:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/APOCDownloadPage.png" alt="APOCDownloadPage" width="800">
</div>
</div>
<div class="paragraph">
<p>After you have placed the <strong>.jar</strong> file into the <strong>plugins</strong> folder, you must modify the configuration for the instance as described in the main page for APOC. As described on this page, you have an option of either <em>sandboxing</em> or <em>whitelisting</em> the procedures of the plugin. How much of the APOC library is used by your application is determined by the developers so you should use them as a resource for this type of configuration change.</p>
</div>
<div class="paragraph">
<p>Suppose we want to allow <span class="underline">all</span> APOC procedures to be available to this Neo4j instance. We would sandbox the plugin in the <strong>neo4j.conf</strong> file as follows, similar to how we sandboxed the graph algorithms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>dbms.security.procedures.unrestricted=algo.*, apoc.*</pre>
</div>
</div>
<div class="paragraph">
<p>Since APOC is large, you will most likely want to whitebox specific procedures so that only the procedures needed by the application are loaded into the Neo4j instance at runtime.</p>
</div>
<div class="paragraph">
<p>And here we see the results after restarting the Neo4j instance and running the script to list the procedures loaded in the instance:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../img/APOCLoaded.png" alt="APOCLoaded" width="800">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exercise_8_install_some_plugins"><strong>Exercise #8: Install some plugins</strong></h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_connector_ports_for_the_neo4j_instance">Configuring connector ports for the Neo4j instance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Neo4j instance uses <a href="https://neo4j.com/docs/operations-manual/current/configuration/ports/">default port numbers</a> that may conflict with other processes on your system. The ports used frequently are the connector ports:</p>
</div>
<table class="tableblock frame-all grid-all stripes-none stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Port Number</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"> HTTP</p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">7474</p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">Used by Neo4j Browser and REST API. It is <strong>not</strong> encrypted so it should never be exposed externally.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">HTTPS</p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">7473</p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">Used by REST API. Requires additional SSL configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">Bolt</p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">7687</p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">Bolt connection used by Neo4j Browser, cypher-shell</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>If any of these ports conflict with ports already used on your system, you can change these connector ports by modifying these property values in the <strong>neo4j.conf</strong> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Bolt connector
dbms.connector.bolt.enabled=true
#dbms.connector.bolt.tls_level=OPTIONAL
#dbms.connector.bolt.listen_address=:*7687*

# HTTP Connector. There can be zero or one HTTP connectors.
dbms.connector.http.enabled=true
#dbms.connector.http.listen_address=:*7474*

# HTTPS Connector. There can be zero or one HTTPS connectors.
dbms.connector.https.enabled=true
#dbms.connector.https.listen_address=:*7473*</pre>
</div>
</div>
<div class="paragraph">
<p>As you learn more about some of the other administrative tasks for a Neo4j instance, you will work with other ports.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
It is not possible to disable the HTTP connector. See the <a href="https://neo4j.com/docs/operations-manual/current/configuration/connectors/">connectors</a> section of the <em>Operations Manual</em> for more information.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_exercise_9_modify_the_http_port"><strong>Exercise #9: Modify the HTTP port</strong></h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_check_your_understanding">Check your understanding</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_question_1">Question 1</h3>
<div class="paragraph">
<p>Suppose that you have installed Neo4j Enterprise Edition and have changed the password for the user, <em>neo4j</em>. What script and command do you run to create a Neo4j database for the instance?</p>
</div>
<div class="paragraph">
<p>Select the correct answer.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>neo4j-admin create-database</code></span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>neo4j-admin initialize</code></span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>neo4j create-database</code></span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer"><code>neo4j start</code></span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_question_2">Question 2</h3>
<div class="paragraph">
<p>Suppose that you want the existing Neo4j database to have the name <strong>ABCRecommendations.db</strong>. Assuming that you have stopped the Neo4j instance, what steps must you perform to modify the name of the database, which currently has a default name of <strong>graph.db</strong>:</p>
</div>
<div class="paragraph">
<p>Select the correct answers.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer">Rename the <strong>$NEO4J_HOME/graph.db</strong> folder to <strong>$NEO4J_HOME/ABCRecommendations.db</strong>.</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer">Modify <strong>neo4j.conf</strong> to use <em>dbms.active_database=ABCRecommendations.db</em>.</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">Run <code>neo4j-admin rename graph.db ABCRecommendations.db</code>.</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">Run <code>neo4j-admin move graph.db ABCRecommendations.db</code>.</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_question_3">Question 3</h3>
<div class="paragraph">
<p>How do you copy a database that you want to give to another user?</p>
</div>
<div class="paragraph">
<p>Select the correct answer.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">With the Neo4j instance started, <code>run neo4j-admin copy</code> providing the location where the copy will be created.</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">With the Neo4j instance stopped, <code>run neo4j-admin copy</code> providing the location where the copy will be created.</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">With the Neo4j instance started, <code>run neo4j-admin dump</code> providing the location where the dump file will be created.</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer">With the Neo4j instance stopped, <code>run neo4j-admin dump</code> providing the location where the dump file will be created.</span></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You should now be able to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
<p>Set the password for the <em>neo4j</em> user.</p>
</li>
<li>
<p>Start a Neo4j instance.</p>
</li>
<li>
<p>Stop the Neo4j instance.</p>
</li>
<li>
<p>Copy a Neo4j database.</p>
</li>
<li>
<p>Modify the location for a Neo4j database.</p>
</li>
<li>
<p>Check the consistency of a Neo4j database.</p>
</li>
<li>
<p>Create scripts for modifying a Neo4j database.</p>
</li>
<li>
<p>Manage plugins for a Neo4j database.</p>
</li>
<li>
<p>Configure ports used by the Neo4j instance.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-12-07 13:30:08 CST
</div>
</div>
</body>
</html>