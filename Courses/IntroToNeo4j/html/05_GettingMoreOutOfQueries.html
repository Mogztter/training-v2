<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<title>Getting More Out of Queries</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Getting More Out of Queries</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_about_this_module">About this module</a>
<ul class="sectlevel2">
<li><a href="#_filtering_queries_using_where">Filtering queries using <code>WHERE</code></a>
<ul class="sectlevel3">
<li><a href="#_specifying_ranges_in_where_clauses">Specifying ranges in WHERE clauses</a></li>
<li><a href="#_testing_labels">Testing labels</a></li>
<li><a href="#_testing_the_existence_of_a_property">Testing the existence of a property</a></li>
<li><a href="#_testing_strings">Testing strings</a></li>
<li><a href="#_testing_with_regular_expressions">Testing with regular expressions</a></li>
<li><a href="#_testing_with_patterns">Testing with patterns</a></li>
<li><a href="#_testing_with_list_values">Testing with list values</a></li>
</ul>
</li>
<li><a href="#_exercise_4_filtering_queries_using_the_where_clause"><strong>Exercise 4: Filtering queries using the <code>WHERE</code> clause</strong></a></li>
<li><a href="#_controlling_query_processing">Controlling query processing</a>
<ul class="sectlevel3">
<li><a href="#_specifying_multiple_match_patterns">Specifying multiple <code>MATCH</code> patterns</a></li>
<li><a href="#_example_1_using_two_match_patterns">Example 1: Using two MATCH patterns</a></li>
<li><a href="#_example_2_using_two_match_patterns">Example 2: Using two MATCH patterns</a></li>
<li><a href="#_setting_path_variables">Setting path variables</a></li>
<li><a href="#_specifying_varying_length_paths">Specifying varying length paths</a></li>
<li><a href="#_finding_the_shortest_path">Finding the shortest path</a></li>
<li><a href="#_specifying_optional_pattern_matching">Specifying optional pattern matching</a></li>
<li><a href="#_collecting_results">Collecting results</a></li>
<li><a href="#_counting_results">Counting results</a></li>
<li><a href="#_additional_processing_using_with">Additional processing using <code>WITH</code></a></li>
</ul>
</li>
<li><a href="#_exercise_5_controlling_query_processing"><strong>Exercise 5: Controlling query processing</strong></a></li>
<li><a href="#_controlling_how_results_are_returned">Controlling how results are returned</a>
<ul class="sectlevel3">
<li><a href="#_eliminating_duplication">Eliminating duplication</a></li>
<li><a href="#_using_with_and_distinct_to_eliminate_duplication">Using WITH and DISTINCT to eliminate duplication</a></li>
<li><a href="#_ordering_results">Ordering results</a></li>
<li><a href="#_limiting_the_number_of_results">Limiting the number of results</a></li>
<li><a href="#_controlling_the_number_of_results_using_with">Controlling the number of results using WITH</a></li>
</ul>
</li>
<li><a href="#_exercise_6_controlling_results_returned"><strong>Exercise 6: Controlling results returned</strong></a></li>
<li><a href="#_working_with_cypher_data">Working with Cypher data</a>
<ul class="sectlevel3">
<li><a href="#_lists">Lists</a></li>
<li><a href="#_unwinding_lists">Unwinding lists</a></li>
<li><a href="#_dates">Dates</a></li>
</ul>
</li>
<li><a href="#_exercise_7_working_with_cypher_data"><strong>Exercise 7: Working with Cypher data</strong></a></li>
</ul>
</li>
<li><a href="#_check_your_understanding">Check your understanding</a>
<ul class="sectlevel2">
<li><a href="#_question_1">Question 1</a></li>
<li><a href="#_question_2">Question 2</a></li>
<li><a href="#_question_3">Question 3</a></li>
</ul>
</li>
<li><a href="#_summary">Summary</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
	<script type='text/javascript'>
	var loc = window.location;
	if (loc.hostname == "neo4j.com" && loc.search.indexOf("aliId=") == -1 ) {
	 loc.pathname = "/graphacademy/online-training/XXXX/"
	}
	document.write(unescape("%3Cscript src='//munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script>Munchkin.init('773-GON-065');</script>
</div>
</div>
<div class="sect1">
<h2 id="_about_this_module">About this module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You have learned how to query nodes and relationships in a graph using simple patterns.
You learned how to use node labels, relationship types, and properties to filter your queries.
Cypher provides a rich set of <code>MATCH</code> clauses and keywords you can use to get more out of your queries.</p>
</div>
<div class="paragraph">
<p>At the end of this module, you should be able to write Cypher statements to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
<p>Filter queries using the <code>WHERE</code> clause</p>
</li>
<li>
<p>Control query processing</p>
</li>
<li>
<p>Control what results are returned</p>
</li>
<li>
<p>Work with Cypher lists and dates</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_filtering_queries_using_where">Filtering queries using <code>WHERE</code></h3>
<div class="paragraph">
<p>You have learned how to specify values for properties of nodes and relationships to filter what data is returned from the <code>MATCH</code> and <code>RETURN</code> clauses.
The format for filtering you have learned thus far only tests equality, where you must specify values for the properties to test with.
What if you wanted more flexibility about how the query is filtered?
For example, you want to retrieve all movies released after 2000, or retrieve all actors born after 1970 who acted in movies released before 1995.
Most applications need more flexibility in how data is filtered.</p>
</div>
<div class="paragraph">
<p>The most common clause you use to filter queries is the <code>WHERE</code> clause that follows a <code>MATCH</code> clause.
In the <code>WHERE</code> clause, you can place conditions that are evaluated at runtime to filter the query.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Previously, you learned to write simple query as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:ACTED_IN]-&gt;(m:Movie {released: 2008})
RETURN p, m</pre>
</div>
</div>
<div class="paragraph">
<p>Here is one way you specify the same query using the <code>WHERE</code> clause:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:ACTED_IN]-&gt;(m:Movie)
WHERE m.released = 2008
RETURN p, m</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In this example, you can only refer to named nodes or relationships in a <code>WHERE</code> clause so remember that you must specify a variable for any node or relationship you are testing in the <code>WHERE</code> clause.
The benefit of using a <code>WHERE</code> clause is that you can specify potentially complex conditions for the query.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:ACTED_IN]-&gt;(m:Movie)
WHERE m.released = 2008 OR m.released = 2009
RETURN p, m</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_specifying_ranges_in_where_clauses">Specifying ranges in WHERE clauses</h4>
<div class="paragraph">
<p>Not only can the equality <code>=</code> be tested, but you can test ranges, existence, strings, as well as specify logical operations during the query.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is an example of specifying a range for filtering the query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:ACTED_IN]-&gt;(m:Movie)
WHERE m.released &gt;= 2003 AND m.released &lt;= 2004
RETURN p.name, m.title, m.released</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MoviesBetween2003And2004.png" alt="MoviesBetween2003And2004" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>You can also specify the same query as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:ACTED_IN]-&gt;(m:Movie)
WHERE 2003 &lt;= m.released &lt;= 2004
RETURN p.name, m.title, m.released</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can specify conditions in a <code>WHERE</code> clause that return a value of <code>true</code> or <code>false</code> (for example predicates).
For testing numeric values, you use the standard numeric comparison operators. Each condition can be combined for runtime evaluation using the boolean operators <code>AND</code>, <code>OR</code>, <code>XOR</code>, and <code>NOT</code>.
There are a number of numeric functions you can use in your conditions.
See the <em>Developer Manual&#8217;s</em> section <em>Mathematical Functions</em> for more information.</p>
</div>
<div class="paragraph">
<p>A special condition in a query is when the retrieval returns an unknown value called <code>null</code>.
You should read the <em>Developer Manual&#8217;s</em> section <em>Working with null</em> to understand how  <code>null</code> values are used at runtime.</p>
</div>
</div>
<div class="sect3">
<h4 id="_testing_labels">Testing labels</h4>
<div class="paragraph">
<p>Thus far, you have used the node labels to filter queries in a <code>MATCH</code> clause.
You can filter node labels in the <code>WHERE</code> clause also:</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For example, these two Cypher queries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)
RETURN p.name</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:ACTED_IN]-&gt;(:Movie {title: 'The Matrix'})
RETURN p.name</pre>
</div>
</div>
<div class="paragraph">
<p>can be rewritten using <code>WHERE</code> clauses as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p)
WHERE p:Person
RETURN p.name</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p)-[:ACTED_IN]-&gt;(m)
WHERE p:Person AND m:Movie AND m.title='The Matrix'
RETURN p.name</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Not all node labels need to be tested during a query, but if your graph has multiple labels for the same node, filtering it by the node label will provide better query performance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_testing_the_existence_of_a_property">Testing the existence of a property</h4>
<div class="paragraph">
<p>Recall that a property is associated with a particular node or relationship.
A property is not associated with a node with a particular label or relationship type.
In one of our queries earlier, we saw that the movie "Something&#8217;s Gotta Give" is the only movie in the <em>Movie</em> database that does not have a <em>tagline</em> property.
Suppose we only want to return the movies that the actor, <em>Jack Nicholson</em> acted in with the condition that they must all have a tagline.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is the query to retrieve the specified movies where we test the existence of the <em>tagline</em> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:ACTED_IN]-&gt;(m:Movie)
WHERE p.name='Jack Nicholson' AND exists(m.tagline)
RETURN m.title, m.tagline</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/JackNicholsonMoviesWithTaglines.png" alt="JackNicholsonMoviesWithTaglines" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_testing_strings">Testing strings</h4>
<div class="paragraph">
<p>Cypher has a set of string-related keywords that you can use in your <code>WHERE</code> clauses to test string property values.
You can specify <code>STARTS WITH</code>, <code>ENDS WITH</code>, and <code>CONTAINS</code>.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For example, to find all actors in the <em>Movie</em> database whose first name is <em>Michael</em>, you would write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:ACTED_IN]-&gt;()
WHERE p.name STARTS WITH 'Michael'
RETURN p.name</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ActorsNamedMichael.png" alt="ActorsNamedMichael" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Note that the comparison of strings is case-sensitive.
There are a number of string-related functions you can use to further test strings.
For example, if you want to test a value, regardless of its case, you could call the <code>toLower()</code> function to convert the string to lower case before it is compared.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:ACTED_IN]-&gt;()
WHERE toLower(p.name) STARTS WITH 'michael'
RETURN p.name</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> In this example where we are converting a property to lower case, if an index has been created for this property, it will not be used at runtime.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>See the <em>String functions</em> section of the <em>Developer Manual</em> for more information.
It is sometimes useful to use the built-in string functions to modify the data that is returned in the query in the RETURN clause.</p>
</div>
</div>
<div class="sect3">
<h4 id="_testing_with_regular_expressions">Testing with regular expressions</h4>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If you prefer, you can test property values using regular expressions.
You use the syntax <code>=~</code> to specify the regular expression you are testing with.
Here is an example where we test the name of the <em>Person</em> using a regular expression to retrieve all <em>Person</em> nodes with a <em>name</em> property that begins with 'Tom':</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)
WHERE p.name =~'Tom.*'
RETURN p.name</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MatchTomsRegex.png" alt="MatchTomsRegex" width="800">
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> If you specify a regular expression. The index will never be used. In addition, the property value must fully match the regular expression.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_testing_with_patterns">Testing with patterns</h4>
<div class="paragraph">
<p>Sometimes during a query, you may want to perform additional filtering using the relationships between nodes being visited during the query. For example, during retrieval, you may want to exclude certain paths traversed.
You can specify a <code>NOT</code> specifier on a pattern in a <code>WHERE</code> clause.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is an example where we want to return all <em>Person</em> nodes of people who wrote movies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:WROTE]-&gt;(m:Movie)
RETURN p.name, m.title</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/WroteMovies.png" alt="WroteMovies" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Next, we modify this query to exclude people who directed that movie:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:WROTE]-&gt;(m:Movie)
WHERE NOT exists( (p)-[:DIRECTED]-&gt;() )
RETURN p.name, m.title</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/WroteMoviesNotDirected.png" alt="WroteMoviesNotDirected" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is another example where we want to find <em>Gene Hackman</em> and the movies that he acted in with another person who also directed the movie.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (gene:Person)-[:ACTED_IN]-&gt;(m:Movie)&lt;-[:ACTED_IN]-(other:Person)
WHERE gene.name= 'Gene Hackman'
AND exists( (other)-[:DIRECTED]-&gt;() )
RETURN  gene, other, m</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ExistsPattern.png" alt="ExistsPattern" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_testing_with_list_values">Testing with list values</h4>
<div class="paragraph">
<p>If you have a set of values you want to test with, you can place them in a list or you can test with an existing list in the graph.</p>
</div>
<div class="paragraph">
<p>You can define the list in the <code>WHERE</code> clause.
During the query, the graph engine will compare each property with the values <code>IN</code> the list.
You can place either numeric or string values in the list, but typically, elements of the list are of the same type of data.
If you are testing with a property of a string type, then all the elements of the list should be strings.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>In this example, we only want to retrieve <em>Person</em> nodes of people born in 1965 or 1970:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)
WHERE p.born IN [1965, 1970]
RETURN p.name as name, p.born as yearBorn</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/UsingIN.png" alt="UsingIN" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can also compare a value to an existing list in the graph.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>We know that the <em>:ACTED_IN</em> relationship has a property, <em>roles</em> that contains the list of roles an actor had in a particular movie they acted in.
Here is the query we write to return the name of the actor who played <em>Neo</em> in the movie <em>The Matrix</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[r:ACTED_IN]-&gt;(m:Movie)
WHERE  'Neo' IN r.roles AND m.title='The Matrix'
RETURN p.name</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/UsingINRoles.png" alt="UsingINRoles" width="800">
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> There are a number of syntax elements of Cypher that we have not covered in this training. For example, you can specify <code>CASE</code> logic in your conditional testing for your <code>WHERE</code> clauses. You can learn more about these syntax elements in the <em>Developer Manual</em>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_exercise_4_filtering_queries_using_the_where_clause"><strong>Exercise 4: Filtering queries using the <code>WHERE</code> clause</strong></h3>
<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 4.</p>
</div>
</div>
<div class="sect2">
<h3 id="_controlling_query_processing">Controlling query processing</h3>
<div class="paragraph">
<p>Now that you have learned how to provide filters for your queries by testing properties, relationships, and patterns using the <code>WHERE</code> clause, you will learn some additional Cypher techniques for controlling what the graph engine does during the query.</p>
</div>
<div class="sect3">
<h4 id="_specifying_multiple_match_patterns">Specifying multiple <code>MATCH</code> patterns</h4>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This <code>MATCH</code> clause includes a pattern  specified by two paths separated by a comma:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (a:Person)-[:ACTED_IN]-&gt;(m:Movie),
      (m:Movie)&lt;-[:DIRECTED]-(d:Person)
WHERE m.released = 2000
RETURN a.name, m.title, d.name</pre>
</div>
</div>
<div class="paragraph">
<p>If possible, you should write the same query as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (a:Person)-[:ACTED_IN]-&gt;(m:Movie)&lt;-[:DIRECTED]-(d:Person)
WHERE m.released = 2000
RETURN a.name, m.title, d.name</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>There are, however, some queries where you will need to specify two or more patterns.
Multiple patterns are used when a query is complex and cannot be satisfied with a single pattern.
This is useful when you are looking for a specific node in the graph and want to connect it to a different node.
You will learn about creating nodes and relationships later in this training.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_1_using_two_match_patterns">Example 1: Using two MATCH patterns</h4>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here are some examples of specifying two paths in a <code>MATCH</code> clause.
In the first example, we want the actors that worked with <em>Keanu Reeves</em> to meet <em>Hugo Weaving</em>, who has worked with <em>Keanu Reeves</em>.
Here we retrieve the actors who acted in the same movies as <em>Keanu Reeves</em>, but not when <em>Hugo Weaving</em> acted in the same movie.
To do this, we specify two paths for the <code>MATCH</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (keanu:Person)-[:ACTED_IN]-&gt;(movie:Movie)&lt;-[:ACTED_IN]-(n:Person),
     (hugo:Person)
WHERE keanu.name='Keanu Reeves' AND
      hugo.name='Hugo Weaving'
AND NOT (hugo)-[:ACTED_IN]-&gt;(movie)
RETURN n.name</pre>
</div>
</div>
<div class="paragraph">
<p>When you perform this type of query, you may see a warning in the query edit pane stating that the pattern represents a cartesian product and may require a lot of resources to perform the query.
You should only perform these types of queries if you know the data well and the implications of doing the query.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/CartesionProductWarning.png" alt="CartesionProductWarning" width="700">
</div>
</div>
<div class="paragraph">
<p>Here is the result of executing this query:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/KeanuFriendsForHugo.png" alt="KeanuFriendsForHugo" width="600">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_2_using_two_match_patterns">Example 2: Using two MATCH patterns</h4>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is another example where two patterns are necessary.
Suppose we want to retrieve the movies that <em>Meg Ryan</em> acted in and their respective directors, as well as the other actors that acted in these movies.
Here is the query to do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (meg:Person)-[:ACTED_IN]-&gt;(m:Movie)&lt;-[:DIRECTED]-(:Person),
      (:Person)-[:ACTED_IN]-&gt;(m)
WHERE meg.name = 'Meg Ryan'
RETURN m.title as movie, d.name AS director , other.name AS `co-actors`</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MegsCoActors.png" alt="MegsCoActors" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_setting_path_variables">Setting path variables</h4>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>You have previously seen how you can assign a path used in a <code>MATCH</code> clause to a variable. This is useful if you want to reuse the path later in the same query or if you want to return the path. So the previous Cypher statement could return the path as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH megPath = (meg:Person)-[:ACTED_IN]-&gt;(m:Movie)&lt;-[:DIRECTED]-(d:Person),
      (other:Person)-[:ACTED_IN]-&gt;(m)
WHERE meg.name = 'Meg Ryan'
RETURN megPath</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MegPath.png" alt="MegPath" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_specifying_varying_length_paths">Specifying varying length paths</h4>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Any graph that represents social networking, trees, or hierarchies will most likely have multiple paths of varying lengths.
Think of the <em>connected</em> relationship in <em>LinkedIn</em> and how connections are made by people connected to more people.
The <em>Movie</em> database for this training does not have much depth of relationships, but it does have the <em>:FOLLOWS</em> relationship that you learned about earlier:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/FollowsRelationships.png" alt="FollowsRelationships" width="500">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>You write a <code>MATCH</code> clause where  you want to find all of the followers of the followers of a <em>Person</em> by specifying a numeric value for the number of hops in the path.
Here is an example where we want to retrieve all <em>Person</em> nodes that are exactly two hops away:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (follower:Person)-[:FOLLOWS*2]-&gt;(p:Person)
WHERE follower.name = 'Paul Blythe'
RETURN p</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/TwoHopRelationship.png" alt="TwoHopRelationship" width="700">
</div>
</div>
<div class="paragraph">
<p>If we had specified <code>[:FOLLOWS*]</code> rather than <code>[:FOLLOWS*2]</code>, the query would return all <em>Person</em> nodes that are two hops away in the <code>:FOLLOWS</code> path from <em>Paul Blythe</em>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><span class="red">Here is the simplified syntax for how varying length patterns are specified in Cypher:</span></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><div class="literal"><pre>(nodeA)-[:RELTYPE*]-&gt;(nodeB)</pre></div></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><div class="content"><div class="paragraph">
<p>Retrieve <span class="underline">all</span> paths of any length with the relationship, <code>RELTYPE</code> from <em>nodeA</em> to <em>nodeB</em> and beyond.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><div class="literal"><pre>(nodeA)-[:RELTYPE*]-(nodeB)</pre></div></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><div class="content"><div class="paragraph">
<p>Retrieve <span class="underline">all</span> paths of any length with the relationship, <code>RELTYPE</code> from <em>nodeA</em> to <em>nodeB</em> or from <em>nodeB</em> to <em>nodeA</em> and beyond. This is usually a very expensive query so you should place limits on how many nodes are retrieved.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><div class="literal"><pre>(node1)-[:RELTYPE*3]-&gt;(node2)</pre></div></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><div class="content"><div class="paragraph">
<p>Retrieve the paths of length 3 with the relationship, <code>RELTYPE</code> from <em>nodeA</em> to <em>nodeB</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><div class="literal"><pre>(node1)-[:RELTYPE*1..3]-&gt;(node2)</pre></div></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><div class="content"><div class="paragraph">
<p>Retrieve the paths of lengths 1, 2, or 3 with the relationship, <code>RELTYPE</code> from <em>nodeA</em> to <em>nodeB</em>, <em>nodeB</em> to <em>nodeC</em>, as well as, <em>nodeC</em> to _nodeD) (up to three hops).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><div class="content"></div></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><div class="content"></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>You can learn more about varying paths in the <em>Patterns</em> section of the <em>Developer Manual</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_finding_the_shortest_path">Finding the shortest path</h4>
<div class="paragraph">
<p>A built-in function that you may find useful in a graph that has many ways of traversing the graph to get to the same node is the <code>shortestPath()</code> function. Using the shortest path between two nodes improves the performance of the query.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>In this example, we want to discover a shortest path between the movies <em>The Matrix</em> and <em>A Few Good Men</em>. In our <code>MATCH</code> clause, we set the variable <em>p</em> to the result of calling <code>shortestPath()</code>, and then return <em>p</em>. In the call to <code>shortestPath()</code>, notice that we specify <code>*</code> for the relationship. This means any relationship; for the traversal.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH p = shortestPath((m1:Movie)-[*]-(m2:Movie))
WHERE m1.title = 'A Few Good Men' AND
      m2.title = 'The Matrix'
RETURN  p</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ShortestPath1.png" alt="ShortestPath1" width="700">
</div>
</div>
<div class="paragraph">
<p>Notice that the graph engine has traversed many types of relationships to get to the end node.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When you use the <code>shortestPath()</code> function, the query editor will show a warning that this type of query could potentially run for a long time. You should heed the warning, especially for large graphs. Read the <em>Graph Algorithms</em> documentation about the shortest path algorithm.</p>
</div>
<div class="paragraph">
<p>When you use <code>ShortestPath()</code>, you can specify a upper limits for the shortest path. In addition, you should aim to provide the patterns for the from an to nodes that execute efficiently. For example, use labels and indexes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_specifying_optional_pattern_matching">Specifying optional pattern matching</h4>
<div class="paragraph">
<p><code>OPTIONAL MATCH</code> matches patterns with your graph, just like <code>MATCH</code> does.
The difference is that if no matches are found, <code>OPTIONAL MATCH</code> will use NULLs for missing parts of the pattern.
<code>OPTIONAL MATCH</code> could be considered the Cypher equivalent of the outer join in SQL.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is an example where we query the graph for all people whose name starts with <em>James</em>.
The <code>OPTIONAL MATCH</code> is specified to include people who have reviewed movies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)
WHERE p.name STARTS WITH 'James'
OPTIONAL MATCH (p)-[r:REVIEWED]-&gt;(m:Movie)
RETURN p.name, type(r), m.title</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/OptionalMatch.png" alt="OptionalMatch" width="700">
</div>
</div>
<div class="paragraph">
<p>Notice that for all rows that do not have the <em>:REVIEWED</em> relationship, a <em>null</em> value is returned for the movie part of the query, as well as the relationship.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_collecting_results">Collecting results</h4>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cypher has a built-in function, <code>collect()</code> that enables you to aggregate a value into a list.
Here is an example where we collect the list of movies that <em>Tom Cruise</em> acted in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:ACTED_IN]-&gt;(m:Movie)
WHERE p.name ='Tom Cruise'
RETURN collect(m.title) AS `movies for Tom Cruise`</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/TomCruiseMovieCollection.png" alt="TomCruiseMovieCollection" width="800">
</div>
</div>
<div class="paragraph">
<p>In Cypher, there is no "GROUP BY" clause as there is in SQL. The graph engine uses non-aggregated columns as an automatic grouping key.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_counting_results">Counting results</h4>
<div class="paragraph">
<p>The Cypher <code>count()</code> function is very useful when you want to count the number of occurrences of a particular query result.
If you specify <code>count(n)</code>, the graph engine calculates the number of occurrences of <em>n</em>.
If you specify <code>count(*)</code>, the graph engine calculates the number of rows retrieved, including those with <code>null</code> values.
When you use <code>count(_)</code>, the graph engine does an implicit group by based upon the aggregation.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is an example where we count the paths retrieved where an actor and director collaborated in a movie and the <code>count()</code> function is used to count the number of paths found for each actor/director collaboration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (actor:Person)-[:ACTED_IN]-&gt;(m:Movie)&lt;-[:DIRECTED]-(director:Person)
RETURN actor.name, director.name, count(m) AS collaborations, collect(m.title) AS movies</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ActorDirectorCollaborations.png" alt="ActorDirectorCollaborations" width="800">
</div>
</div>
<div class="paragraph">
<p>There are more aggregating functions such as <code>min()</code> or <code>max()</code> that you can also use in your queries.
These are described in the <em>Aggregating Functions</em> section of the <em>Developer Manual</em>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_additional_processing_using_with">Additional processing using <code>WITH</code></h4>
<div class="paragraph">
<p>During the execution of a <code>MATCH</code> clause, you can specify that you want some intermediate calculations or values that will be used for further processing of the query, or for limiting the number of results before further processing is done.
You use the <code>WITH</code> clause to perform intermediate processing or data flow operations.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is an example where we start the query processing by retrieving all actors and their movies.
During the query processing, want to only return actors that have 2 or 3 movies.
All other actors and the aggregated results are filtered out. This type of query is a replacement for SQL&#8217;s "HAVING" clause.
The <code>WITH</code> clause does the counting and collecting, but is then used in the subsequent <code>WHERE</code> clause to limit how many paths are visited.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (a:Person)-[:ACTED_IN]-&gt;(m:Movie)
WITH  a, count(a) AS numMovies, collect(m.title) as movies
WHERE numMovies &gt; 1 AND numMovies &lt; 4
RETURN a.name, numMovies, movies</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ActorsWith2or3Movies.png" alt="ActorsWith2or3Movies" width="800">
</div>
</div>
<div class="paragraph">
<p>When you use the <code>WITH</code> clause, you specify the variables from the previous part of the query you want to pass on to the next part of the query.
In this example, the variable <em>a</em> is specified to be passed on in the query, but <em>m</em> is not. Since <em>m</em> is not specified to be passed on, <em>m</em> will not be available later in the query.
Notice that for the <code>RETURN</code> clause, <em>a</em>, <em>numMovies</em>, and <em>movies</em> are available for use.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> You have to name all expressions with an alias in a <code>WITH</code> that are not simple variables.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is another example where we want to find all actors who have acted in at least five movies, and find (optionally) the movies they directed and return the person and those movies.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)
WITH p, size((p)-[:ACTED_IN]-&gt;(:Movie)) AS movies
WHERE movies &gt;= 5
OPTIONAL MATCH (p)-[:DIRECTED]-&gt;(m:Movie)
RETURN p.name, m.title</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/PopularActorsWithAtLeast5Movies.png" alt="PopularActorsWithAtLeast5Movies" width="800">
</div>
</div>
<div class="paragraph">
<p>In this example, we first retrieve all people, but then specify a pattern in the <code>WITH</code> clause where we calculate the number of <code>:ACTED_IN</code> relationships retrieved using the <code>size()</code> function. If this value is greater than five, we then also retrieve the <code>:DIRECTED</code> paths to return the name of the person and the title of the movie they directed. In the result, we see that these actors acted in more than five movies, but <em>Tom Hanks</em> is the only actor who directed a movie and thus the only person to have a value for the movie.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_exercise_5_controlling_query_processing"><strong>Exercise 5: Controlling query processing</strong></h3>
<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 5.</p>
</div>
</div>
<div class="sect2">
<h3 id="_controlling_how_results_are_returned">Controlling how results are returned</h3>
<div class="paragraph">
<p>Next, you will learn some additional Cypher techniques for controlling how results are returned from a query.</p>
</div>
<div class="sect3">
<h4 id="_eliminating_duplication">Eliminating duplication</h4>
<div class="paragraph">
<p>You have seen a number of query results where there is duplication in the results returned.
In most cases, you want to eliminate duplicated results.
You do so by using the <code>DISTINCT</code> keyword.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is a simple example where duplicate data is returned.
<em>Tom Hanks</em> both acted in and directed the movie, <em>That Thing You Do</em>, so the movie is returned twice in the result stream:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:DIRECTED | :ACTED_IN]-&gt;(m:Movie)
WHERE p.name = 'Tom Hanks'
RETURN m.released, collect(m.title) AS movies</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/Duplication.png" alt="Duplication" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>We can eliminate the duplication by specifying the DISTINCT keyword as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:DIRECTED | :ACTED_IN]-&gt;(m:Movie)
WHERE p.name = 'Tom Hanks'
RETURN m.released, collect(DISTINCT m.title) AS movies</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/NoDuplication.png" alt="NoDuplication" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_using_with_and_distinct_to_eliminate_duplication">Using WITH and DISTINCT to eliminate duplication</h4>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Another way that you can avoid duplication is to with <code>WITH</code> and <code>DISTINCT</code> together as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:DIRECTED | :ACTED_IN]-&gt;(m:Movie)
WHERE p.name = 'Tom Hanks'
WITH DISTINCT m
RETURN m.released, m.title</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/NoDuplication2.png" alt="NoDuplication2" width="500">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_ordering_results">Ordering results</h4>
<div class="paragraph">
<p>If you want the results to be sorted, you specify the expression to use for the sort using the <code>ORDER BY</code> keyword and whether you want the order to be descending using the <code>DESC</code> keyword.
Ascending order is the default.
Note that you can provide multiple sort expressions and the result will be sorted in that order.
Just as you can use <code>DISTINCT</code> with <code>WITH</code> to eliminate duplication, you can use <code>ORDER BY</code> with <code>WITH</code> to control the sorting of results.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>In this example, we specify that the release date of the movies for <em>Tom Hanks</em> will be returned in descending order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:DIRECTED | :ACTED_IN]-&gt;(m:Movie)
WHERE p.name = 'Tom Hanks'
RETURN m.released, collect(DISTINCT m.title) AS movies ORDER BY m.released DESC</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/Ordering.png" alt="Ordering" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_limiting_the_number_of_results">Limiting the number of results</h4>
<div class="paragraph">
<p>Although you can filter queries to reduce the number of results returned, you may also want to limit the number of results.
This is useful if you have very large result sets and you only need to see the beginning or end of a set of ordered results.
You can use the <code>LIMIT</code> keyword to specify the number of results returned. Furthermore, you can use the <code>LIMIT</code> keyword with the <code>WITH</code> clause to limit results.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Suppose you want to see the titles of the ten most recently released movies.
You could do so as follows where you limit the number of results using the <code>LIMIT</code> keyword as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (m:Movie)
RETURN m.title as title, m.released as year ORDER BY m.released DESC LIMIT 10</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/Limit.png" alt="Limit" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_controlling_the_number_of_results_using_with">Controlling the number of results using WITH</h4>
<div class="paragraph">
<p>Previously, you saw how you can use the <code>WITH</code> clause to perform some intermediate processing during a query. You can use the <code>WITH</code> clause to limit the number of results.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>In this example, we count the number of movies during the query and we return the results once we have reached 5 movies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (a:Person)-[:ACTED_IN]-&gt;(m:Movie)
WITH a, count(*) AS numMovies, collect(m.title) as movies
WHERE numMovies = 5
RETURN a.name, numMovies, movies</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/Count5Movies.png" alt="Count5Movies" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_exercise_6_controlling_results_returned"><strong>Exercise 6: Controlling results returned</strong></h3>
<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 6.</p>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_cypher_data">Working with Cypher data</h3>
<div class="paragraph">
<p>Thus far, you have specified both string and numeric types in your Cypher queries.
You have also learned that nodes and relationships can have properties, whose values are structured like JSON objects.
You have also learned that the <code>collect()</code> function can create lists of values or objects where a list is comma-separated and you can use the <code>IN</code> keyword to search for a value in a list.
Next, you will learn more about working with lists and dates in Cypher.</p>
</div>
<div class="sect3">
<h4 id="_lists">Lists</h4>
<div class="paragraph">
<p>There are many built-in Cypher functions that you can use to build or access elements in lists.
A Cypher <code>map</code> is list of key/value pairs where each element of the list is of the format key: value. For example, a list of months and the number of days per month could be:</p>
</div>
<div class="paragraph">
<p><code>{Jan: 31, Feb: 28, Mar: 31, Apr: 30 , May: 31, Jun: 30 , Jul: 31, Aug: 31, Sep: 30, Oct: 31, Nov: 30, Dec: 31}</code></p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>You can collect values for a list during a query and when you return results, you can sort by the size of the list using the <code>size()</code> function as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (a:Person)-[:ACTED_IN]-&gt;(m:Movie)
WITH  m, count(m) AS numCast, collect(a.name) as cast
RETURN m.title, cast, numCast ORDER BY size(cast)</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/CastList.png" alt="CastList" width="800">
</div>
</div>
<div class="paragraph">
<p>You can read more about working with lists in the <em>List Functions</em> section of the <em>Developer Manual</em>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_unwinding_lists">Unwinding lists</h4>
<div class="paragraph">
<p>There may be some situations where you want to perform the opposite of collecting results, but rather separate the lists into separate rows. This functionality is done using the <code>UNWIND</code> clause.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is an example where we create a list with three elements, unwind the list and then return the values. Since there are three elements, three rows are returned with the values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>WITH [1, 2, 3] AS list
UNWIND list AS row
RETURN list, row</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/Unwind3.png" alt="Unwind3" width="600">
</div>
</div>
<div class="paragraph">
<p>Notice that there is no <code>MATCH</code> clause. You need not query the database to execute Cypher statements, but you do need the <code>RETURN</code> clause here to return the calculated values from the Cypher query.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The <code>UNWIND</code> clause is frequently used when importing data into a graph.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dates">Dates</h4>
<div class="paragraph">
<p>Cypher has a built-in <code>date()</code> function, as well as other temporal values and functions that you can use to calculate temporal values. You use a combination of numeric, temporal, spatial, list and string functions to calculate values that are useful to your application.
For example, suppose you wanted to calculate the age of a <em>Person</em> node, given a year they were born (the <em>born</em> property must exist and have a value).</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Here is example Cypher to retrieve all actors from the graph, and if they have a value for <em>born</em>, calculate the <em>age</em> value.
Notice that the <code>date()</code> function is called and then converted to a string and then an integer to perform the age calculation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (actor:Person)-[:ACTED_IN]-&gt;(:Movie)
WHERE exists(actor.born)
with DISTINCT actor, date().year  - actor.born as age
RETURN actor.name, age as `age today`
   	  ORDER BY actor.born DESC</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/Age.png" alt="Age" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Consult the <em>Developer Manual</em> for more information about the built-in functions available for working with data of all types:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
<p>Predicate</p>
</li>
<li>
<p>Scalar</p>
</li>
<li>
<p>List</p>
</li>
<li>
<p>Mathematical</p>
</li>
<li>
<p>String</p>
</li>
<li>
<p>Temporal</p>
</li>
<li>
<p>Spatial</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exercise_7_working_with_cypher_data"><strong>Exercise 7: Working with Cypher data</strong></h3>
<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 7.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_check_your_understanding">Check your understanding</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_question_1">Question 1</h3>
<div class="paragraph">
<p>Suppose you want to add a <code>WHERE</code> clause at the end of this statement to filter the results retrieved.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[rel]-&gt;(m:Movie)&lt;-[:PRODUCED]-(:Person)</pre>
</div>
</div>
<div class="paragraph">
<p>What variables, can you test in the <code>WHERE</code> clause:</p>
</div>
<div class="paragraph">
<p>Select the correct answers.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer">p</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer">rel</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer">m</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">PRODUCED</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_question_2">Question 2</h3>
<div class="paragraph">
<p>Suppose you want to retrieve all movies that have a <em>released</em> property value that is 2000, 2002, 2004, 2006, or 2008.  Here is an incomplete Cypher example to return the <em>title</em> property values of all movies released in these years.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (m:Movie)
WHERE m.released XX [2000, 2002, 2004, 2006, 2008]
RETURN m.title</pre>
</div>
</div>
<div class="paragraph">
<p>What keyword do you specify for XX?</p>
</div>
<div class="paragraph">
<p>Select the correct answer.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">CONTAINS</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer">IN</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">IS</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">EQUALS</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_question_3">Question 3</h3>
<div class="paragraph">
<p>Given this Cypher query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (a:Person)-[:ACTED_IN]-&gt;(m:Movie)
WITH  m, count(m) AS numMovies, collect(m.title) as movies
WHERE numMovies &gt; 1 AND numMovies &lt; 4
RETURN //??</pre>
</div>
</div>
<div class="paragraph">
<p>What variables or aliases can be used to return values?</p>
</div>
<div class="paragraph">
<p>Select the correct answers.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">a</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer">m</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer">numMovies</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer">movies</span></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You should now be able to write Cypher statements to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
<p>Filter queries using the <code>WHERE</code> clause</p>
</li>
<li>
<p>Control query processing</p>
</li>
<li>
<p>Control what results are returned</p>
</li>
<li>
<p>Work with Cypher lists and dates</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-11-01 16:19:00 CST
</div>
</div>
</body>
</html>