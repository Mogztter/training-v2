<html>
   <head>
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1192232-34"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-1192232-34');
      </script>


      <meta charset="utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
      <title>Neo4j GraphAcademy: Introduction to Neo4j</title>
      <link rel="stylesheet" type="text/css" href="https://neo4j.com/docs/developer-manual/current/docbook.css"></link>
      <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"></link>
      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css"></link>
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,600,300italic"></link>
      <link rel="stylesheet" type="text/css" href="https://neo4j.com/docs/developer-manual/current/css/extra.css"></link>
      <link rel="stylesheet" type="text/css" href="https://neo4j.com/docs/developer-manual/current/css/chunked-base.css"></link>
      <link rel="stylesheet" type="text/css" href="https://neo4j.com/docs/developer-manual/current/css/console.css"></link><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script>
      <link rel="shortcut icon" href="https://neo4j.com/wp-content/themes/neo4jweb/favicon.ico"></link>
      <script type='text/javascript'
   src='https://neo4j.com/wp-content/themes/neo4jweb/assets/js/vendor/codemirror.min.js?ver=4.5.2'></script>
      <script type='text/javascript'>
        window.trainingPartName = "module-6";
      </script>
   </head>
   <body>
      <style type="text/css">
        .headerlink {
          margin-left: 10px !important;
          margin-right: 10px !important;
        }
        @media only screen and (max-width: 1350px) {
          #helplink {
            display: none;
          }
        }
      </style>
      <header style="top: 0px;">
         <a href="../part-0/" id="logo"><img src="https://neo4j.com/wp-content/themes/neo4jweb/assets/images/neo4j-logo-2015.png" alt="Neo4j Logo"></a>
         <ul class="documentation-library">
            <li id="menu-module-1">
              <a class="headerlink" href="../part-1/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">1</strong>
              </span>
              Intro to Graph DBs</a>
            </li>
            <li id="menu-module-2">
              <a class="headerlink" href="../part-2/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">2</strong>
              </span>
              Intro to Neo4j</a>
            </li>
            <li id="menu-module-3">
              <a class="headerlink" href="../part-3/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">3</strong>
              </span>
              Dev Env</a>
            </li>
            <li id="menu-module-4">
              <a class="headerlink" href="../part-4/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">4</strong>
              </span>
              Cypher</a>
            </li>
            <li id="menu-module-5">
              <a class="headerlink" href="../part-5/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">5</strong>
              </span>
              Advanced Queries</a>
            </li>
            <li id="menu-module-6">
              <a class="headerlink" href="../part-6/" style="color: #000">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">6</strong>
              </span>
              Creating Data</a>
            </li>
            <li id="menu-module-7">
              <a class="headerlink" href="../part-7/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">7</strong>
              </span>
              More</a>
            </li>
            <li>
              <a class="headerlink" href="../part-8/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">8</strong>
              </span>
              The End</a>
            </li>
         </ul>
          <div id="helplink" style="position: absolute; top: 10px; right: 30px; font-size: 20px;">
            <a href="https://community.neo4j.com/c/general/online-training" target="_blank">Need Help?</a>
          </div>
         <nav id="header-nav">
         <span class="nav-previous">
           
              <a accesskey="p" href="../part-5/">
                <span class="fa fa-long-arrow-left" aria-hidden="true"></span>
              Advanced Queries</a>
           
         </span>
         <span class="nav-current">
           <p class="nav-title" style="display: none;"></p>
         </span>
         <span class="nav-next">
           
              <a accesskey="n" href="../part-7/">More
                <span class="fa fa-long-arrow-right" aria-hidden="true"></span>
              </a>
           
         </span>
         </nav>
      </header>


<div id="developer-manual" style="padding-top: 150px; padding-left: 20px; padding-bottom: 100px;">
<h1>Creating Nodes and Relationships</h1>

      <div id="preamble columns medium-12">
<div class="sectionbody">
<script src="https://browser.sentry-cdn.com/4.4.1/bundle.min.js" crossorigin="anonymous"></script>
<script type='text/javascript'>
	var loc = window.location;
	document.write(unescape("%3Cscript src='https://munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>
window.trainingClassName = 'online-training-v2';
</script>

<script>Munchkin.init('773-GON-065');</script>


<style>
    @import "https://neo4j.com/online_training/cypher-gadget/libs/jquery.modal.min.css" screen;
    .modal {
        width: 775px;
        height: 775px;
        padding: 10px;
        margin: 0;
    }
    .blocker {
        height: initial;
        background-color: transparent;
    }
  a.button {
    display: block;
    text-align: center;
    width: 250px;
    font-size: 18px;
    margin-top: 50px;
    font-family: 'Open Sans';
    height: 55px;
    border-style: solid;
    border-width: 0;
    cursor: pointer;
    color: white;
    padding: 15px;
    font-weight: 300;
    background-color: #6dcc9c;
    border-color: #4ac084;
  }

  .button a hover {
      background-color: #4ac084;
  }

  pre.cypher-syntax {
    background-color: #eaf1f8;
  }
</style>
<script src="https://neo4j.com/online_training/cypher-gadget/libs/underscore.js"></script>
<script src="https://neo4j.com/online_training/cypher-gadget/libs/jquery.js"></script>
<script src="https://neo4j.com//online_training/cypher-gadget/libs/jquery-ui.min.js"></script>
<script src="https://neo4j.com/online_training/cypher-gadget/libs/jquery.modal.min.js"></script>
<script src="http://s3.amazonaws.com/dev.assets.neo4j.com/wp-content/js/js.cookie-2.1.3.min.js"></script>
<!--script src="/online_training/gadgetUtils.js"></script-->
<script type="text/javascript">
  Sentry.init({ dsn: 'https://652808557bb1478883636c96edb51739@sentry.io/1342352' });
</script>
<script src="https://neo4j.com/online_training/tasks.js"></script>
<script type="text/javascript">
function renderGadget(containerSelector, options) {
  if (!options.cypherSetup) return;
  var frameId = _.uniqueId("exmodal");
  $(containerSelector).append('<button onclick="setGadgetUrl(\'#' + frameId +
    '\')" rel="modal:open" class="btn">' + (options.label || 'Gadget') + '</button>');

    $(containerSelector).append(modalWindow(frameId,options));
  }

function modalWindow(frameId, options) {
   return `<div id="${frameId}" class="modal-dialog modal fade draggable" style="display:none;text-align:center;vertical-align:middle;" >
            <iframe data-src="/online_training/cypher-gadget/test.html?cypherSetup=${options.cypherSetup}&${formatTask(options)}" width="725" height="725" frameborder="0" style="margin:5px;"
              webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
           <div>`;
}
/*
    .modal {
        width: 775px;
        height: 675px;
        padding: 10px;
        margin: 0;
    }
*/

function formatTask(options) {
  if (options.task) return "cypherTaskJSON="+encodeURIComponent(JSON.stringify(options.task));
  if (options.taskName) return "cypherTask="+options.taskName;
  return "";
}


function setGadgetUrl(sel) {
  $(sel).modal();
  $(sel).draggable();
  var $iframe = $(sel).find("iframe");
  $iframe.attr("src", $iframe.data("src"));
}
</script>

<!-- Elaine added -->

<script src="https://cdn.auth0.com/js/lock/11.23.0/lock.min.js"></script>

<!-- End addition -->

<!-- Elaine added contents of login.js from Shreyans -->

<script>
    var auth0Options = {
        configurationBaseUrl: 'https://cdn.auth0.com',
        allowedConnections: ['google-oauth2', 'linkedin', 'twitter', 'Username-Password-Authentication'],
        additionalSignUpFields: [
            {
                name: 'first_name',
                placeholder: 'First Name'
            },
            {
                name: 'last_name',
                placeholder: 'Last Name'
            }
        ],
        closable: false,
        languageDictionary: {
            signUpTerms: "I agree to the <a href='https://neo4j.com/terms/online-trial-agreement/' style='text-decoration: underline' target='_blank'>terms of service</a> of Neo4j."
        },
        mustAcceptTerms: true,
        auth: {
            redirect: true,
            redirectUrl: 'https://neo4j.com/accounts/login',
            responseType: 'token id_token',
            audience: 'neo4j://accountinfo/',
            params: {
                scope: 'read:account-info write:account-info openid email profile user_metadata'
            }
        }
    }

    const classStates = {
        loggedIn: 'graph-academy-for-logged-in',
        notLoggedIn: 'graph-academy-for-not-logged-in'
    }

    class GraphAcademyLogin {
        constructor(options = {}) {
            console.log('constructor called');
            if (!Auth0Lock || typeof Auth0Lock !== 'function') return;
            console.log(options);
            this.lock = new Auth0Lock('DxhmiF8TCeznI7Xoi08UyYScLGZnk4ke', 'login.neo4j.com', auth0Options);
            this.options = options;
            this.checkSession(options.callback);
        }

        checkSession(cb) {
            this.lock.checkSession({}, async (err, result) => {
                console.log(result);
            if (result) {
                this.isLoggedIn = true;
                this.authResult = result;
                if (this.callback && typeof this.callback === 'function') this.callback()
            } else {
                this.isLoggedIn = false;
            }
            if (err && this.options.loginRedirectUrl) {
                this.redirectToLogin();
            }
            this.handleHtmlOnState(result ? 'loggedIn' : 'notLoggedIn');
            if (cb && typeof cb === 'function') cb(err, result);
        })
        }

        handleHtmlOnState(state = null) {
            const loggedInElements = document.getElementsByClassName(classStates['loggedIn']) || [];
            const notLoggedInElements = document.getElementsByClassName(classStates['notLoggedIn']) || [];
            if (state === 'loggedIn') {
                for (let item of loggedInElements) {
                    item.style.display = 'inherit';
                }
                for (let item of notLoggedInElements) {
                    item.style.display = 'none';
                }
            } else if (state === 'notLoggedIn') {
                for (let item of loggedInElements) {
                    item.style.display = 'none';
                }
                for (let item of notLoggedInElements) {
                    item.style.display = 'inherit';
                }
            }
        }

        logout() {
            const logoutOptions = {};
            if (this.options.redirectOnLogout) logoutOptions.redirectTo = this.options.redirectOnLogout;
            this.lock.logout(logoutOptions);
            this.handleHtmlOnState('notLoggedIn');
        }

        redirectToLogin() {
            return window.location.href = this.options.loginRedirectUrl;
        }
    }

</script>

<!-- End addition -->
</div>
</div>
<div  id="_about_this_module" class="sect1 columns medium-12" style='padding-left: 0;' >
<h3>About this module</h3>


<div class="paragraph">
<p>You have learned how to query a graph using a number of Cypher clauses and keywords that start with the <code>MATCH</code> clause. You learned how to retrieve data based upon label values, property key values, and relationship types, and how to perform some useful intermediate processing during a query to control what data is returned.</p>
</div>


<div class="paragraph">
<p>At the end of this module, you should be able to write Cypher statements to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
Create a node
<div class="ulist">
<ul>
<li>
Add and remove node labels
</li>
<li>
Add and remove node properties
</li>
<li>
Update properties
</li>
</ul>
</div>
</li>
<li>
Create a relationship
<div class="ulist">
<ul>
<li>
Add and remove properties for a relationship
</li>
</ul>
</div>
</li>
<li>
Delete a node
</li>
<li>
Delete a relationship
</li>
<li>
Merge data in a graph
<div class="ulist">
<ul>
<li>
Creating nodes
</li>
<li>
Creating relationships
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div  id="_creating_nodes" class="sect1 columns medium-12" style='padding-left: 0;' >
<h3>Creating nodes</h3>


<div class="paragraph">
<p>Recall that a node is an element of a graph representing a domain entity that has zero or more labels, properties, and relationships to or from other nodes in the graph.</p>
</div>


<div class="paragraph">
<p>When you create a node, you can add it to the graph without connecting it to another node.</p>
</div>


<div class="paragraph">
<p>Here is the simplified syntax for creating a node:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">CREATE (optionalVariable optionalLabels {optionalProperties})</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>If you plan on referencing the newly created node, you must provide a variable. Whether you provide labels or properties at node creation time is optional. In most cases, you will want to provide some label and property values for a node when created. This will enable you to later retrieve the node. Provided you have a reference to the node (for example, using a <code>MATCH</code> clause), you can always add, update, or remove labels and properties at a later time.</p>
</div>


<div class="paragraph">
<p>Here are some examples of creating a single node in Cypher:</p>
</div>


<div class="paragraph">
<p>Add a node to the graph of type <em>Movie</em> with the <em>title</em> <em>Batman Begins</em>. This node can be retrieved using the title. A set of nodes with the label <em>Movie</em> can also be retrieved which will contain this node:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">CREATE (:Movie {title: 'Batman Begins'})</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Add a node with two labels to the graph of types <em>Movie</em> and <em>Action</em> with the <em>title</em> <em>Batman Begins</em>.
This node can be retrieved using the title. A set of nodes with the labels <em>Movie</em> or <em>Action</em> can also be retrieved which will contain this node:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">CREATE (:Movie:Action {title: 'Batman Begins'})</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Add a node to the graph of types <em>Movie</em> and <em>Action</em> with the <em>title</em> <em>Batman Begins</em>. This node can be retrieved using the title. A set of nodes with the labels <em>Movie</em> or <em>Action</em> can also be retrieved which will contain this node. The variable <em>m</em> can be used for later processing after the <code>CREATE</code> clause:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">CREATE (m:Movie:Action {title: 'Batman Begins'})</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Add a node to the graph of types <em>Movie</em> and <em>Action</em> with the <em>title</em> <em>Batman Begins</em>. This node can be retrieved using the title. A set of nodes with the labels <em>Movie</em> or <em>Action</em> can also be retrieved which will contain this node. Here we return the title of the node:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">CREATE` (m:Movie:Action {title: ' Batman Begins'})
RETURN m.title</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is what you see in Neo4j Browser when you create a node for the movie, <em>Batman Begins</em> where we have selected the node returned to view its properties.:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/CreateBatmanBegins.png" alt="CreateBatmanBegins" width="600">
</p>
</div>


<div class="paragraph">
<p>When the graph engine creates a node, it automatically assigns a read-only, unique ID to the node.
Here we see that the <em>id</em> of the node is <em>568</em>. This is not a property of a node, but rather an internal value.</p>
</div>


<div class="paragraph">
<p>After you have created a node, you can add more properties or labels to it and most importantly, connect it to another node.</p>
</div>
<div  id="_creating_multiple_nodes" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Creating multiple nodes</h3>


<div class="paragraph">
<p>You can create multiple nodes by simply separating the nodes specified with commas, or by specifying multiple CREATE statements.</p>
</div>


<div class="paragraph">
<p>Here is an example, where we create some <em>Person</em> nodes that will represent some of the people associated with the movie <em>Batman Begins</em>:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">CREATE
(:Person {name: 'Michael Caine', born: 1933}),
(:Person {name: 'Liam Neeson', born: 1952}),
(:Person {name: 'Katie Holmes', born: 1978}),
(:Person {name: 'Benjamin Melniker', born: 1913})</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result of running this Cypher statement:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/CreateMultiplePersonNodes.png" alt="CreateMultiplePersonNodes" width="600">
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title label"></div>
</td>
<td class="content">
The graph engine will create a node with the same properties of a node that already exists. You can prevent this from happening in one of two ways:
&#160;<br>
1. You can use <code>MERGE</code> rather than <code>CREATE</code> when creating the node.
&#160;<br>
2. You can add constraints to your graph.
</td>
</tr>
</table>
</div>


<div class="paragraph">
<p>You will learn about merging data later in this module. Constraints are configured globally for a graph and are covered later in this training.</p>
</div>
</div>
<div  id="_adding_labels_to_a_node" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Adding labels to a node</h3>


<div class="paragraph">
<p>You may not know ahead of time what label or labels you want for a node when it is created. You can add labels to a node using the <code>SET</code> clause.</p>
</div>


<div class="paragraph">
<p>Here is the simplified syntax for adding labels to a node:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">SET x:Label         // adding one label to node referenced by the variable x</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">SET x:Label1:Label2	// adding two labels to node referenced by the variable x</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>If you attempt to add a label to a node for which the label already exists, the <code>SET</code> processing is ignored.</p>
</div>


<div class="paragraph">
<p>Here is an example where we add the <em>Action</em> label to the node that has a label, <em>Movie</em>:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (m:Movie)
WHERE m.title = 'Batman Begins'
SET m:Action
RETURN labels(m)</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Assuming that we have previously created the node for the movie, here is the result of running this Cypher statement:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/SetActionLabel.png" alt="SetActionLabel" width="700">
</p>
</div>


<div class="paragraph">
<p>Notice here that we call the built-in function, <code>labels()</code> that returns the set of labels for the node.</p>
</div>
</div>
<div  id="_removing_labels_from_a_node" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Removing labels from a node</h3>


<div class="paragraph">
<p>Perhaps your data model has changed or the underlying data for a node has changed so that the label for a node is no longer useful or valid.</p>
</div>


<div class="paragraph">
<p>Here is the simplified syntax for removing labels from a node:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">REMOVE x:Label	  // remove the label from the node referenced by the variable x</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>If you attempt to remove a label from a node for which the label does not exist, the <code>SET</code> processing is ignored.</p>
</div>


<div class="paragraph">
<p>Here is an example where we remove the <em>Action</em> label from the node that has a labels, <em>Movie</em> and <em>Action</em>:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (m:Movie:Action)
WHERE m.title = 'Batman Begins'
REMOVE m:Action
RETURN labels(m)</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Assuming that we have previously created the node for the movie, here is the result of running this Cypher statement:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/RemoveActionLabel.png" alt="RemoveActionLabel" width="700">
</p>
</div>
</div>
<div  id="_adding_properties_to_a_node" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Adding properties to a node</h3>


<div class="paragraph">
<p>After you have created a node and have a reference to the node, you can add properties to the node, again using the <code>SET</code> keyword.</p>
</div>


<div class="paragraph">
<p>Here are simplified syntax examples for adding properties to a node referenced by the variable x:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">SET x.propertyName = value</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">SET x.propertyName1 = value1	, x.propertyName2 = value2</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">SET x = {propertyName1: value1, propertyName2: value2}</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">SET x += {propertyName1: value1, propertyName2: value2}</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>If the property does not exist, it is added to the node. If the property exists, its value is updated. If the value specified is <code>null</code>, the property is removed.</p>
</div>


<div class="paragraph">
<p>Note that the type of data for a property is not enforced.
That is, you can assign a string value to a property that was once a numeric value and visa versa.</p>
</div>


<div class="paragraph">
<p>When you specify the JSON-style object for assignment (using <code>=</code>) of the property values for the node, the object must include all of the properties and their values for the node as the existing properties for the node are overwritten. However, if you specify <code>+=</code> when assigning to a property, the value at <em>valueX</em> is updated if the <em>propertyNnameX</em> exists for the node. If the <em>propertyNameX</em> does not exist for the node, then the property is added to the node.</p>
</div>


<div class="paragraph">
<p>Here is an example where we add the properties <em>released</em>  and <em>lengthInMinutes</em> to the movie <em>Batman Begins</em>:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (m:Movie)
WHERE m.title = 'Batman Begins'
SET m.released = 2005, m.lengthInMinutes = 140
RETURN m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Assuming that we have previously created the node for the movie, here is the result of running this Cypher statement:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AddReleasedMinutesProperties.png" alt="AddReleasedMinutesProperties" width="800">
</p>
</div>


<div class="paragraph">
<p>Here is another example where we set the property values to the movie node using the JSON-style object containing the property keys and values. Note that <span class="underline">all</span> properties must be included in the object.</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (m:Movie)
WHERE m.title = 'Batman Begins'
SET  m = {title: 'Batman Begins',
          released: 2005,
          lengthInMinutes: 140,
          videoFormat: 'DVD',
          grossMillions: 206.5}
RETURN m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result of running this Cypher statement:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/SetPropertiesObject.png" alt="SetPropertiesObject" width="800">
</p>
</div>


<div class="paragraph">
<p>Note that when you add a property to a node for the first time in the graph, the property key is added to the graph. So for example, in the previous example, we added the <em>videoFormat</em> and <em>grossMillions</em> property keys to the graph as they have never been used before for a node in the graph. Once a property key is added to the graph, it is <span class="underline">never</span> removed. When you examine the property keys in the database (by executing <code>CALL db.propertyKeys()</code>, you will see all property keys created for the graph, regardless of whether they are currently used for nodes and relationships.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AllPropertyKeys.png" alt="AllPropertyKeys" width="700">
</p>
</div>


<div class="paragraph">
<p>Here is an example where we use the JSON-style object to add the <em>awards</em> property to the node and update the <em>grossMillions</em> property:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (m:Movie)
WHERE m.title = 'Batman Begins'
SET  m += { grossMillions: 300,
            awards: 66}
RETURN m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AddAndUpdateProperties.png" alt="AddAndUpdateProperties" width="800">
</p>
</div>
</div>
<div  id="_removing_properties_from_a_node" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Removing properties from a node</h3>


<div class="paragraph">
<p>There are two ways that you can remove a property from a node. One way is to use the REMOVE keyword. The other way is to set the property&#8217;s value to <code>null</code>.</p>
</div>


<div class="paragraph">
<p>Here are simplified syntax examples for removing properties from a node referenced by the variable x:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">REMOVE x.propertyName</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">SET x.propertyName = null</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Suppose we determined that no other <em>Movie</em> node in the graph has the properties, <em>videoFormat</em> and <em>grossMillions</em>. There is no restriction that nodes of the same type must have the same properties. However, we have decided that we want to remove these properties from this node. Here is example Cypher to remove this property from this <em>Batman Begins</em> node:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (m:Movie)
WHERE m.title = 'Batman Begins'
SET m.grossMillions = null
REMOVE m.videoFormat
RETURN m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Assuming that we have previously created the node for the movie with the these properties, here is the result of running this Cypher statement where we remove each property a different way. One way we remove the property using the <code>SET</code> clause to set the property to null. And in another way, we use the <code>REMOVE</code> clause.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/RemoveProperties.png" alt="RemoveProperties" width="800">
</p>
</div>
</div>
<div  id="_exercise_8_creating_nodes" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3><strong>Exercise 8: Creating Nodes</strong></h3>


<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 8.</p>
</div>
</div>
</div>
<div  id="_creating_relationships" class="sect1 columns medium-12" style='padding-left: 0;' >
<h3>Creating relationships</h3>


<div class="paragraph">
<p>As you have learned in the previous exercises where you query the graph, you often query using connections between nodes. The connections capture the semantic relationships and context of the nodes in the graph.</p>
</div>


<div class="paragraph">
<p>Here is the simplified syntax for creating a relationship between two nodes referenced by the variables x and y:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">CREATE (x)-[:REL_TYPE]-&gt;(y)</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">CREATE (x)&lt;-[:REL_TYPE]-(y)</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>When you create the relationship, it <span class="underline">must</span> have direction. You can query nodes for a relationship in either direction, but you must create the relationship with a direction. An exception to this is when you create a node using <code>MERGE</code> that you will learn about later in this module.</p>
</div>


<div class="paragraph">
<p>In most cases, unless you are connecting nodes at creation time, you will retrieve the two nodes, each with  their own variables, for example, by specifying a <code>WHERE</code> clause to find them, and then use the variables to connect them.</p>
</div>


<div class="paragraph">
<p>Here is an example. We want to connect the actor, <em>Michael Caine</em> with the movie, <em>Batman Begins</em>. We first retrieve the nodes of interest, then we create the relationship:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (a:Person), (m:Movie)
WHERE a.name = 'Michael Caine' AND m.title = 'Batman Begins'
CREATE (a)-[:ACTED_IN]-&gt;(m)
RETURN a, m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result of running this Cypher statement:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/CreateActedInRelationship.png" alt="CreateActedInRelationship" width="700">
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title label"></div>
</td>
<td class="content">
Before you run these Cypher statements, you may see a warning in Neo4j Browser that you are creating a query that is a cartesian product that could potentially be a performance issue.  You will see this warning if you have no unique constraint on the lookup keys. You will learn about uniqueness constraints later in the next module. If you are familiar with the data in the graph and can be sure that the <code>MATCH</code> clauses will not retrieve large amounts of data, you can continue. In our case, we are simply looking up a particular <em>Person</em> node and a particular <em>Movie</em> node so we can create the relationship.
</td>
</tr>
</table>
</div>


<div class="paragraph">
<p>You can create multiple relationships at once by simply providing the pattern for the creation that includes the relationship types, their directions, and the nodes that you want to connect.</p>
</div>


<div class="paragraph">
<p>Here is an example where we have already created <em>Person</em> nodes for an actor, <em>Liam Neeson</em>, and a producer, <em>Benjamin Melniker</em>. We create two relationships in this example, one for <em>ACTED_IN</em> and one for <em>PRODUCED</em>.</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (a:Person), (m:Movie), (p:Person)
WHERE a.name = 'Liam Neeson' AND
      m.title = 'Batman Begins' AND
      p.name = 'Benjamin Melniker'
CREATE (a)-[:ACTED_IN]-&gt;(m)&lt;-[:PRODUCED]-(p)
RETURN a, m, p</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result of running this Cypher statement:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/CreateTwoRelationships.png" alt="CreateTwoRelationships" width="700">
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title label"></div>
</td>
<td class="content">
When you create relationships based upon a <code>MATCH</code> clause, you must be certain that only a single node is returned for the <code>MATCH</code>, otherwise multiple relationships will be created.
</td>
</tr>
</table>
</div>
<div  id="_adding_properties_to_relationships" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Adding properties to relationships</h3>


<div class="paragraph">
<p>You can add properties to a relationship, just as you add properties to a node. You use the <code>SET</code> clause to do so.</p>
</div>


<div class="paragraph">
<p>Here is the simplified syntax for adding properties to a relationship referenced by the variable r:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">SET r.propertyName = value</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">SET r.propertyName1 = value1	, r.propertyName2 = value2</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">SET r = {propertyName1: value1, propertyName2: value2}</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">SET r += {propertyName1: value1, propertyName2: value2}</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>If the property does not exist, it is added to the relationship. If the property exists, its value is updated for the relationship.
When you specify the JSON-style object for assignment to the relationship using <code>=</code>, the object must include all of the properties for the relationship, just as you need to do for nodes. If you use <code>+=</code>, you can add or update properties, just as you do for nodes.</p>
</div>


<div class="paragraph">
<p>Here is an example where we will add the <em>roles</em> property to the <em>ACTED_IN</em> relationship from <em>Christian Bale</em> to <em>Batman Begins</em> right after we have created the relationship:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (a:Person), (m:Movie)
WHERE a.name = 'Christian Bale' AND m.title = 'Batman Begins'
CREATE (a)-[rel:ACTED_IN]-&gt;(m)
SET rel.roles = ['Bruce Wayne','Batman']
RETURN a, m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result of running this Cypher statement:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AddRelationshipWithRoles.png" alt="AddRelationshipWithRoles" width="600">
</p>
</div>


<div class="paragraph">
<p>The <em>roles</em> property is a list so we add it as such. If the relationship had multiple properties, we could have added them as a comma separated list or as an object, like you can do for node properties.</p>
</div>


<div class="paragraph">
<p>You can also add properties to a relationship when the relationship is created. Here is another way to create and add the properties for the relationship:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (a:Person), (m:Movie)
WHERE a.name = 'Christian Bale' AND m.title = 'Batman Begins'
CREATE (a)-[:ACTED_IN {roles: ['Bruce Wayne', 'Batman']}]-&gt;(m)
RETURN a, m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>By default, the graph engine will create a relationship between two nodes, even if one already exists. You can test to see if the relationship exists before you create it as follows:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (a:Person),(m:Movie)
WHERE a.name = 'Christian Bale' AND
      m.title = 'Batman Begins' AND
      NOT exists((a)-[:ACTED_IN]-&gt;(m))
CREATE (a)-[rel:ACTED_IN]-&gt;(m)
SET rel.roles = ['Bruce Wayne','Batman']
RETURN a, rel, m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title label"></div>
</td>
<td class="content">
You can prevent duplication of relationships by merging data using the <code>MERGE</code> clause, rather than the <code>CREATE</code> clause. You will learn about merging data later in this module.
</td>
</tr>
</table>
</div>
</div>
<div  id="_removing_properties_from_a_relationship" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Removing properties from a relationship</h3>


<div class="paragraph">
<p>There are two ways that you can remove a property from a node. One way is to use the REMOVE keyword. The other way is to set the property&#8217;s value to <code>null</code>, just as you do for properties of nodes.</p>
</div>


<div class="paragraph">
<p>Suppose we have added the <em>ACTED_IN</em> relationship between <em>Christian Bale</em> and the movie, <em>Batman Returns</em> where the <em>roles</em> property is added to the relationship. Here is an example to remove the <em>roles</em> property, yet keep the <em>ACTED_IN</em> relationship:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (a:Person)-[rel:ACTED_IN]-&gt;(m:Movie)
WHERE a.name = 'Christian Bale' AND m.title = 'Batman Begins'
REMOVE rel.roles
RETURN a, rel, m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result returned. An alternative to <code>REMOVE rel.roles</code> would be <code>SET rel.roles = null</code></p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/RemoveRoles.png" alt="RemoveRoles" width="700">
</p>
</div>
</div>
<div  id="_exercise_9_creating_relationships" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3><strong>Exercise 9: Creating Relationships</strong></h3>


<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 9.</p>
</div>
</div>
</div>
<div  id="_deleting_nodes_and_relationships" class="sect1 columns medium-12" style='padding-left: 0;' >
<h3>Deleting nodes and relationships</h3>


<div class="paragraph">
<p>If a node has no relationships to any other nodes, you can simply delete it from the graph using the <code>DELETE</code> clause.
Relationships are also deleted using the <code>DELETE</code> clause.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title label"></div>
</td>
<td class="content">
If you attempt to delete a node in the graph that has relationships in or out of the node, the graph engine will return an error because deleting such a node will leave <em>orphaned</em> relationships in the graph.
</td>
</tr>
</table>
</div>
<div  id="_deleting_relationships" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Deleting relationships</h3>


<div class="paragraph">
<p>Here are the existing nodes and relationships for the <em>Batman Begins</em> movie:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/BatmanBeginsRelationships.png" alt="BatmanBeginsRelationships" width="700">
</p>
</div>


<div class="paragraph">
<p>You can delete a relationship between nodes by first finding it in the graph and then deleting it.</p>
</div>


<div class="paragraph">
<p>In this example, we want to delete the <em>ACTED_IN</em> relationship between <em>Christian Bale</em> and the movie <em>Batman Begins</em>. We find the relationship, and then delete it:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (a:Person)-[rel:ACTED_IN]-&gt;(m:Movie)
WHERE a.name = 'Christian Bale' AND m.title = 'Batman Begins'
DELETE rel
RETURN a, m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result of running this Cypher statement:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/DeleteRelationship.png" alt="DeleteRelationship" width="700">
</p>
</div>


<div class="paragraph">
<p>Notice that there no longer exists the relationship between <em>Christian Bale</em> and the movie <em>Batman Begins</em>.</p>
</div>


<div class="paragraph">
<p>We can now query the nodes related to <em>Batman Begins</em> to see that this movie now only has two actors and one producer connected to it:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/BatmanBeginsRelationships2.png" alt="BatmanBeginsRelationships2" width="700">
</p>
</div>


<div class="paragraph">
<p>Even though we have deleted the relationship between actor, <em>Christian Bale</em> and the movie <em>Batman Begins</em>, we note that this actor is connected to another movie in the graph, so we should not delete this <em>Christian Bale</em> node.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ChristianBaleConnections.png" alt="ChristianBaleConnections" width="700">
</p>
</div>


<div class="paragraph">
<p>In this example, we find the node for the producer, <em>Benjamin Melniker</em>, as well as his relationship to movie nodes. First, we delete the relationship(s), then we delete the node:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person)-[rel:PRODUCED]-&gt;(:Movie)
WHERE p.name = 'Benjamin Melniker'
DELETE rel, p</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result of running this Cypher statement:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/DeleteMelniker.png" alt="DeleteMelniker" width="800">
</p>
</div>


<div class="paragraph">
<p>And here we see that we now have only two connections to the <em>Batman Begins</em> movie:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/BatmanBeginsRelationships3.png" alt="BatmanBeginsRelationships3" width="800">
</p>
</div>
</div>
<div  id="_deleting_nodes_and_relationships_2" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Deleting nodes and relationships</h3>


<div class="paragraph">
<p>The most efficient way to delete a node and its corresponding relationships is to specify <code>DETACH DELETE</code>.
When you specify <code>DETACH DELETE</code> for a node, the relationships to and from the node are deleted, then the node is deleted.</p>
</div>


<div class="paragraph">
<p>If were were to attempt to delete the <em>Liam Neeson</em> node without first deleting its relationships:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person)
WHERE p.name = 'Liam Neeson'
DELETE p</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>We would see this error:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/LiamNeesonDeleteError.png" alt="LiamNeesonDeleteError" width="800">
</p>
</div>


<div class="paragraph">
<p>Here we delete the <em>Liam Neeson</em> node and its relationships to any other nodes:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person)
WHERE p.name = 'Liam Neeson'
DETACH DELETE  p</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result of running this Cypher statement:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/DeleteLiamNeeson.png" alt="DeleteLiamNeeson" width="600">
</p>
</div>


<div class="paragraph">
<p>And here is what the <em>Batman Begins</em> node and its relationships now look like. There is only one actor, <em>Michael Caine</em> connected to the movie.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/BatmanBeginsRelationships4.png" alt="BatmanBeginsRelationships4" width="700">
</p>
</div>
</div>
<div  id="_exercise_10_deleting_nodes_and_relationships" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3><strong>Exercise 10: Deleting Nodes and Relationships</strong></h3>


<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 10.</p>
</div>
</div>
</div>
<div  id="_merging_data_in_the_graph" class="sect1 columns medium-12" style='padding-left: 0;' >
<h3>Merging data in the graph</h3>


<div class="paragraph">
<p>Thus far, you have learned how to create nodes, labels, properties, and relationships in the graph. You can use <code>MERGE</code> to either create new nodes and relationships or to make structural changes to existing nodes and relationships.</p>
</div>


<div class="paragraph">
<p>For exmaple, how the graph engine behaves when a duplicate element is created depends on the type of element:</p>
</div>


<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-none grid-none stripes-none" style="width: 90%;">
<colgroup>
<col style="width: 35%;">
<col style="width: 65%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">If you use <code>CREATE</code>:</p></th>
<th class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">The result is:</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">Node</p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">If a node with the same property values exists, a duplicate node is created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">Label</p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">If the label already exists for the node, the node is not updated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">Property</p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">If the node or relationship property already exists, it is updated with the new value.
&#160;<br>
<strong>Note:</strong> If you specify a set of properties to be created using <code>=</code> rather than <code>+=</code>, existing properties are removed if they are not included in the set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">Relationship</p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">If the relationship exists, a duplicate relationship is created.</p></td>
</tr>
</tbody>
</table>


<div class="paragraph">
<p></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title label"></div>
</td>
<td class="content">
You should never create duplicate nodes or relationships in a graph.
</td>
</tr>
</table>
</div>


<div class="paragraph">
<p>The <code>MERGE</code> clause is used to find elements in the graph. If the element is not found, it is created.</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content">

<div class="paragraph">
<p>You use the <code>MERGE</code> clause to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
Create a unique node based on label and key information for a property and if it exists, optionally update it.
</li>
<li>
Create a unique relationship.
</li>
<li>
Create a node and relationship to it uniquely in the context of another node.
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div  id="_using_merge_to_create_nodes" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Using <code>MERGE</code> to create nodes</h3>


<div class="paragraph">
<p>Here is the simplified syntax for the <code>MERGE</code> clause for creating a node:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MERGE (variable:Label{nodeProperties})
RETURN variable</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>If there is an existing node with  <em>Label</em> and <em>nodeProperties</em>  found in the graph, no node is created. If, however the node is not found in the graph, then the node is created.</p>
</div>


<div class="paragraph">
<p>When you specify <em>nodeProperties</em> for <code>MERGE</code>, you should only use properties that satisfy some sort of uniqueness constraint. You will learn about uniqueness constraints in the next module.</p>
</div>


<div class="paragraph">
<p>Here is what we currently have in the graph for the <em>Person</em>, <em>Michael Caine</em>.
This node has values for <em>name</em> and <em>born</em>. Notice also that the label for the node is <em>Person</em>.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MichaelCaine.png" alt="MichaelCaine" width="600">
</p>
</div>


<div class="paragraph">
<p>Here we use <code>MERGE</code> to find a node with the <em>Actor</em> label with the key property <em>name</em> of <em>Michael Caine</em>, and we set the <em>born</em> property to <em>1933</em>. Our data model has never used the label, <em>Actor</em> so this is a new entity type in our graph.</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MERGE (a:Actor {name: 'Michael Caine'})
SET a.born = 1933
RETURN a</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result of running this Cypher example. We do not find a node with the label <em>Actor</em> so the graph engine creates one.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MergeActorMichaelCaine.png" alt="MergeActorMichaelCaine" width="600">
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title label"></div>
</td>
<td class="content">
When you specify the node to merge, you should only use properties that have a unique index. You will learn about uniqueness later in this training.
</td>
</tr>
</table>
</div>


<div class="paragraph">
<p>If we were to repeat this <code>MERGE</code> clause, no additional <em>Actor</em> nodes would be created in the graph.</p>
</div>


<div class="paragraph">
<p>At this point, however, we have two <em>Michael Caine</em> nodes in the graph, one of type <em>Person</em>, and one of type <em>Actor</em>:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/TwoMichaelCaines.png" alt="TwoMichaelCaines" width="800">
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title label"></div>
</td>
<td class="content">
Be mindful that node labels and the properties for a node are significant when merging nodes.
</td>
</tr>
</table>
</div>
</div>
<div  id="_using_merge_to_create_relationships" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Using <code>MERGE</code> to create relationships</h3>


<div class="paragraph">
<p>Here is the syntax for the <code>MERGE</code> clause for creating relationships:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MERGE (variable:Label {nodeProperties})-[:REL_TYPE]-&gt;(otherNode)
RETURN variable</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>If there is an existing node with  <em>Label</em> and <em>nodeProperties</em>  with the <em>:REL_TYPE</em> to <em>otherNode</em> found in the graph, no relationship is created. If the relationship does not exist, it is created.</p>
</div>


<div class="paragraph">
<p>Although, you can leave out the direction of the relationship being created with the <code>MERGE</code>, in which case a left-to-right arrow will be assumed, a best practice is to always specify the direction of the relationship. However, if you have  bidirectional relationships and you want to avoid creating duplicate relationships, you <span class="underline">must</span> leave off the arrow.</p>
</div>
</div>
<div  id="_specifying_creation_behavior_when_merging" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Specifying creation behavior when merging</h3>


<div class="paragraph">
<p>You can use the <code>MERGE</code> clause, along with <code>ON CREATE</code> to assign specific values to a node being created as a result of an attempt to merge.</p>
</div>


<div class="paragraph">
<p>Here is an example of creating a new node while specifying property values for the new node:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MERGE (a:Person {name: 'Sir Michael Caine'})
ON CREATE SET a.birthPlace = 'London',
              a.born = 1934
RETURN a</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>We know that there are no existing <em>Sir Michael Caine</em> Person nodes. When the <code>MERGE</code> executes, it will not find any matching nodes so it will create one and will execute the <code>ON CREATE</code> clause where we set the <em>birthplace</em> and <em>born</em> property values.</p>
</div>


<div class="paragraph">
<p>Here are the resulting nodes that have anything to do with <em>Michael Caine</em>. The most recently created node has the <em>name</em> value of <em>Sir Michael Caine</em>.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AllMichaelCaines.png" alt="AllMichaelCaines" width="800">
</p>
</div>


<div class="paragraph">
<p>You can also specify an <code>ON MATCH</code> clause during merge processing. If the exact node is found, you can update its properties or labels. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MERGE (a:Person {name: 'Sir Michael Caine'})
ON CREATE SET a.born = 1934,
              a.birthPlace = 'UK'
ON MATCH SET a.birthPlace = 'UK'
RETURN a</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>And here we see that the found node (with the <em>&lt;id&gt;</em> of <em>1920</em>) was updated with the new value for <em>birthPlace</em>.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/UpdateToUK.png" alt="UpdateToUK" width="700">
</p>
</div>
</div>
<div  id="_using_merge_to_create_relationships_2" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Using <code>MERGE</code> to create relationships</h3>


<div class="paragraph">
<p>Using <code>MERGE</code> to create relationships is expensive and you should only do it when you need to ensure that a relationship is unique and you are not sure if it already exists.</p>
</div>


<div class="paragraph">
<p>In this example, we use the <code>MATCH</code> clause to find all <em>Person</em> nodes that represent <em>Michael Caine</em> and we find the movie, <em>Batman Begins</em> that we want to connect to all of these nodes. We already have a connection between one of the <em>Person</em> nodes and the <em>Movie</em> node. We do not want this relationship to be duplicated. This is where we can use <code>MERGE</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person), (m:Movie)
WHERE m.title = 'Batman Begins' AND p.name ENDS WITH 'Caine'
MERGE (p)-[:ACTED_IN]-&gt;(m)
RETURN p, m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result of executing this Cypher statement. It went through all the nodes and added the relationship to the nodes that didn&#8217;t already have the relationship.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MergeRelationships.png" alt="MergeRelationships" width="800">
</p>
</div>


<div class="paragraph">
<p>You must be aware of the  behavior of the <code>MERGE</code> clause and how it will automatically create nodes and relationships. <code>MERGE</code> tries to find a full pattern and if it doesn&#8217;t find it, it creates that full pattern. That&#8217;s why in most cases you should first <code>MERGE</code> your nodes and then your relationship afterwards.</p>
</div>


<div class="paragraph">
<p>Only if you intentionally want to create a node within the context of another (like a month within a year) then a MERGE pattern with one bound and one unbound node makes sense.</p>
</div>


<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MERGE (fromDate:Date {year: 2018})&lt;-[:IN_YEAR]-(toDate:Date {month: 'January'})</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
</div>
<div  id="_exercise_11_merging_data_in_the_graph" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3><strong>Exercise 11: Merging Data in the graph</strong></h3>


<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 11.</p>
</div>
</div>
</div>
<div  id="module-6" class="sect1 quiz columns medium-12" style='padding-left: 0;' >
<h3>Check your understanding</h3>
<div  id="_question_1" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Question 1</h3>


<div class="paragraph">
<p>What Cypher clauses can you use to create a node?</p>
</div>


<div class="paragraph">
<p>Select the correct answers.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<input type="checkbox" data-item-complete="0"> <span class="required-answer">CREATE</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer">CREATE NODE</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="required-answer">MERGE</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer">ADD</span>
</li>
</ul>
</div>
</div>
<div  id="_question_2" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Question 2</h3>


<div class="paragraph">
<p>Suppose that you have retrieved a node, <em>s</em> with a property, <em>color</em>:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (s:Shape {location: [20,30]})
???
RETURN s</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>What Cypher clause do you add here to delete the <em>color</em> property from this node?</p>
</div>


<div class="paragraph">
<p>Select the correct answers.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer">DELETE s.color</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="required-answer">SET s.color=null</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="required-answer">REMOVE s.color</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer">SET s.color=?</span>
</li>
</ul>
</div>
</div>
<div  id="_question_3" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Question 3</h3>


<div class="paragraph">
<p>Suppose you retrieve a node, <em>n</em> in the graph that is related to other nodes. What Cypher clause do you write to delete this node and its relationships in the graph?</p>
</div>


<div class="paragraph">
<p>Select the correct answer.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer">DELETE n</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer">DELETE n WITH RELATIONSHIPS</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer">REMOVE n</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="required-answer">DETACH DELETE n</span>
</li>
</ul>
</div>
</div>
</div>
<div  id="_summary" class="sect1 columns medium-12" style='padding-left: 0;' >
<h3>Summary</h3>


<div class="paragraph">
<p>You should now be able to write Cypher statements to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
Create a node
<div class="ulist">
<ul>
<li>
Add and remove node labels
</li>
<li>
Add and remove node properties
</li>
<li>
Update properties
</li>
</ul>
</div>
</li>
<li>
Create a relationship
<div class="ulist">
<ul>
<li>
Add and remove properties for a relationship
</li>
</ul>
</div>
</li>
<li>
Delete a node
</li>
<li>
Delete a relationship
</li>
<li>
Merge data in a graph
<div class="ulist">
<ul>
<li>
Creating nodes
</li>
<li>
Creating relationships
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div  id="_grade_quiz_and_continue" class="sect1 columns medium-12" style='padding-left: 0;' >
<h3>Grade Quiz and Continue</h3>
<a class="next-section medium button" href="../part-7/">Continue to Module 7</a>
<script src="https://cdn.auth0.com/js/lock/11.23.0/lock.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<script src="https://js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>

<script>
var auth0Options = {
	configurationBaseUrl: 'https://cdn.auth0.com',
	allowedConnections: ['google-oauth2', 'linkedin', 'twitter', 'Username-Password-Authentication'],
	additionalSignUpFields: [
		{
			name: 'first_name',
			placeholder: 'First Name'
		},
		{
			name: 'last_name',
			placeholder: 'Last Name'
		}
	],
	closable: false,
	languageDictionary: {
		signUpTerms: "I agree to the <a href='https://neo4j.com/terms/online-trial-agreement/' style='text-decoration: underline' target='_blank'>terms of service</a> of Neo4j."
	},
	mustAcceptTerms: true,
	auth: {
		redirect: true,
		redirectUrl: 'https://neo4j.com/accounts/login',
		responseType: 'token id_token',
		audience: 'neo4j://accountinfo/',
		params: {
			scope: 'read:account-info write:account-info openid email profile user_metadata'
		}
	}
}

const classStates = {
	loggedIn: 'graph-academy-for-logged-in',
	notLoggedIn: 'graph-academy-for-not-logged-in'
}

class GraphAcademyLogin {
	constructor(options = {}) {
		console.log('constructor called');
		if (!Auth0Lock || typeof Auth0Lock !== 'function') return;
		console.log(options);
		this.lock = new Auth0Lock('DxhmiF8TCeznI7Xoi08UyYScLGZnk4ke', 'login.neo4j.com', auth0Options);
		this.options = options;
		this.checkSession(options.callback);
	}

	checkSession(cb) {
		this.lock.checkSession({}, async (err, result) => {
			console.log(result);
			if (result) {
				this.isLoggedIn = true;
				this.authResult = result;
				if (this.callback && typeof this.callback === 'function') this.callback()
			} else {
				this.isLoggedIn = false;
			}
			if (err && this.options.loginRedirectUrl) {
				this.redirectToLogin();
			}
			this.handleHtmlOnState(result ? 'loggedIn' : 'notLoggedIn');
			if (cb && typeof cb === 'function') cb(err, result);
		})
	}

	handleHtmlOnState(state = null) {
		const loggedInElements = document.getElementsByClassName(classStates['loggedIn']) || [];
		const notLoggedInElements = document.getElementsByClassName(classStates['notLoggedIn']) || [];
		if (state === 'loggedIn') {
			for (let item of loggedInElements) {
				item.style.display = 'inherit';
			}
			for (let item of notLoggedInElements) {
				item.style.display = 'none';
			}
		} else if (state === 'notLoggedIn') {
			for (let item of loggedInElements) {
				item.style.display = 'none';
			}
			for (let item of notLoggedInElements) {
				item.style.display = 'inherit';
			}
		}
	}

	logout() {
		const logoutOptions = {};
		if (this.options.redirectOnLogout) logoutOptions.redirectTo = this.options.redirectOnLogout;
		this.lock.logout(logoutOptions);
		this.handleHtmlOnState('notLoggedIn');
	}

	redirectToLogin() {
		return window.location.href = this.options.loginRedirectUrl;
	}
}
 </script>

<script>
  const login = new GraphAcademyLogin();
</script>

 <link rel='stylesheet' id='neo-codemirror-css'
    href="https://neo4j.com/wp-content/themes/neo4jweb/assets/css/codemirror-neo.css?ver=4.5" type='text/css'
    media='screen'/>

 <script type='text/javascript'>
  $('.admonitionblock.note').find('.icon').html('NOTE');
  $('.admonitionblock.warning').find('.icon').html('WARNING');
  $('.admonitionblock.information').find('.icon').html('INFO');

  var isBlock = /^(p|li|div|h\\d|pre|blockquote|td)$/;

  function textContent(node, out) {
    if (node.nodeType == 3) return out.push(node.nodeValue);
    for (var ch = node.firstChild; ch; ch = ch.nextSibling) {
      textContent(ch, out);
      if (isBlock.test(node.nodeType)) out.push("\n");
    }
  }

  CodeMirror.colorize = function(collection, defaultMode) {
    if (!collection) collection = document.body.getElementsByTagName("pre");

    for (var i = 0; i < collection.length; ++i) {
      var syntax = false;
      var node = collection[i];
      var mode = node.getAttribute("data-lang") || defaultMode;
      if (mode == "cypher-syntax") {
        syntax = true;
        mode = "cypher";
      }
      if (!mode) continue;

      var text = [];
      textContent(node, text);
      node.innerHTML = "";
      CodeMirror.runMode(text.join(""), mode, node);

      node.className += " cm-s-default";
      if (syntax) {
        node.className += " cypher-syntax";
      }
    }
  };

  $( document ).ready(function() {
    if (CodeMirror.colorize) {
      CodeMirror.colorize(document.body.getElementsByTagName("pre"), 'cypher');
    }
  });
 </script>


<script>
  window.intercomSettings = {
    app_id: "dt0ig5ab",
    hide_default_launcher: true
  };
</script>
<script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/dt0ig5ab';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>

<!-- JWT decoder: ONLY USE TO SEE UN-VERIFIED VALUES -->
<script src="http://s3.amazonaws.com/dev.assets.neo4j.com/wp-content/js/jwt-decode.min.js"></script>


<script>
const SITE_URL = window.location;


$( document ).ready(function() {
       const login = new GraphAcademyLogin({loginRedirectUrl: "https://neo4j.com/graphacademy/online-training/introduction-to-neo4j/"});

        login.checkSession((err, result) => {
            if (result) {
               getQuizStatus();

              /*
                var userInfoIntercom = Cookies.getJSON("com.neo4j.accounts.userInfo");
                if (userInfoIntercom) {
                  try {
                    window.Intercom("update", {
                      app_id: "dt0ig5ab",
                      name: userInfoIntercom.name,
                      email: userInfoIntercom.email,
                      user_id: userInfoIntercom.sub,
                      hide_default_launcher: true
                    });;
                  } catch (err) {
                    console.error(err);
                  }
                }
                Intercom('trackEvent','training-introv2-view');
                */
            }
        })

});
</script>
<script>
$( document ).ready(function() {
  Intercom('trackEvent','training-introv2-view-part6');
});
</script>
</div>
</div>
<div id="sidebar-wrapper">
        
        <div id="toc" class="toc2">
        <div id="toctitle">Module: Creating Nodes and Relationships</div>
        <ul class="sectlevel1">
<li><a href="#_about_this_module">About this module</a></li>
<li><a href="#_creating_nodes">Creating nodes</a>
<ul class="sectlevel2">
<li><a href="#_creating_multiple_nodes">Creating multiple nodes</a></li>
<li><a href="#_adding_labels_to_a_node">Adding labels to a node</a></li>
<li><a href="#_removing_labels_from_a_node">Removing labels from a node</a></li>
<li><a href="#_adding_properties_to_a_node">Adding properties to a node</a></li>
<li><a href="#_removing_properties_from_a_node">Removing properties from a node</a></li>
<li><a href="#_exercise_8_creating_nodes"><strong>Exercise 8: Creating Nodes</strong></a></li>
</ul>
</li>
<li><a href="#_creating_relationships">Creating relationships</a>
<ul class="sectlevel2">
<li><a href="#_adding_properties_to_relationships">Adding properties to relationships</a></li>
<li><a href="#_removing_properties_from_a_relationship">Removing properties from a relationship</a></li>
<li><a href="#_exercise_9_creating_relationships"><strong>Exercise 9: Creating Relationships</strong></a></li>
</ul>
</li>
<li><a href="#_deleting_nodes_and_relationships">Deleting nodes and relationships</a>
<ul class="sectlevel2">
<li><a href="#_deleting_relationships">Deleting relationships</a></li>
<li><a href="#_deleting_nodes_and_relationships_2">Deleting nodes and relationships</a></li>
<li><a href="#_exercise_10_deleting_nodes_and_relationships"><strong>Exercise 10: Deleting Nodes and Relationships</strong></a></li>
</ul>
</li>
<li><a href="#_merging_data_in_the_graph">Merging data in the graph</a>
<ul class="sectlevel2">
<li><a href="#_using_merge_to_create_nodes">Using <code>MERGE</code> to create nodes</a></li>
<li><a href="#_using_merge_to_create_relationships">Using <code>MERGE</code> to create relationships</a></li>
<li><a href="#_specifying_creation_behavior_when_merging">Specifying creation behavior when merging</a></li>
<li><a href="#_using_merge_to_create_relationships_2">Using <code>MERGE</code> to create relationships</a></li>
<li><a href="#_exercise_11_merging_data_in_the_graph"><strong>Exercise 11: Merging Data in the graph</strong></a></li>
</ul>
</li>
<li><a href="#module-6">Check your understanding</a>
<ul class="sectlevel2">
<li><a href="#_question_1">Question 1</a></li>
<li><a href="#_question_2">Question 2</a></li>
<li><a href="#_question_3">Question 3</a></li>
</ul>
</li>
<li><a href="#_summary">Summary</a></li>
<li><a href="#_grade_quiz_and_continue">Grade Quiz and Continue</a></li>
</ul>
        </div>
<div id="progress" style="position:absolute; bottom:100;"></div>
</div>