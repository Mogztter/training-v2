<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Introduction to Cypher</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Introduction to Cypher</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#_about_this_module">About this module</a></li>
<li><a href="#_what_is_cypher">What is Cypher?</a>
<ul class="sectlevel3">
<li><a href="#_cypher_is_ascii_art">Cypher is ASCII art</a></li>
<li><a href="#_nodes">Nodes</a></li>
<li><a href="#_labels">Labels</a></li>
<li><a href="#_comments_in_cypher">Comments in Cypher</a></li>
</ul>
</li>
<li><a href="#_examining_the_data_model">Examining the data model</a></li>
<li><a href="#_using_match_to_retrieve_nodes">Using MATCH to retrieve nodes</a>
<ul class="sectlevel3">
<li><a href="#_viewing_nodes_as_table_data">Viewing nodes as table data</a></li>
</ul>
</li>
<li><a href="#_strong_exercise_1_retrieving_nodes_strong"><strong>Exercise 1: Retrieving nodes</strong></a></li>
<li><a href="#_properties">Properties</a>
<ul class="sectlevel3">
<li><a href="#_examining_property_keys">Examining property keys</a></li>
<li><a href="#_retrieving_nodes_filtered_by_a_property_value">Retrieving nodes filtered by a property value</a></li>
<li><a href="#_returning_property_values">Returning property values</a></li>
<li><a href="#_specifying_aliases">Specifying aliases</a></li>
</ul>
</li>
<li><a href="#_strong_exercise_2_filtering_queries_using_property_values_strong"><strong>Exercise 2: Filtering queries using property values</strong></a></li>
<li><a href="#_relationships">Relationships</a>
<ul class="sectlevel3">
<li><a href="#_ascii_art">ASCII art</a></li>
<li><a href="#_querying_using_relationships">Querying using relationships</a></li>
<li><a href="#_examining_relationships">Examining relationships</a></li>
<li><a href="#_using_a_relationship_in_a_query">Using a relationship in a query</a></li>
<li><a href="#_querying_by_multiple_relationships">Querying by multiple relationships</a></li>
<li><a href="#_using_anonymous_nodes_in_a_query">Using anonymous nodes in a query</a></li>
<li><a href="#_using_an_anonymous_relationship_for_a_query">Using an anonymous relationship for a query</a></li>
<li><a href="#_retrieving_the_relationship_types">Retrieving the relationship types</a></li>
<li><a href="#_retrieving_properties_for_relationships">Retrieving properties for relationships</a></li>
</ul>
</li>
<li><a href="#_using_patterns_for_queries">Using patterns for queries</a>
<ul class="sectlevel3">
<li><a href="#_querying_by_any_direction_of_the_relationship">Querying by any direction of the relationship</a></li>
<li><a href="#_traversing_relationships">Traversing relationships</a></li>
<li><a href="#_using_relationship_direction_to_optimize_a_query">Using relationship direction to optimize a query</a></li>
</ul>
</li>
<li><a href="#_cypher_style_recommendations">Cypher style recommendations</a></li>
<li><a href="#_strong_exercise_3_filtering_queries_using_relationships_strong"><strong>Exercise 3: Filtering queries using relationships</strong></a></li>
<li><a href="#_check_your_understanding">Check your understanding</a>
<ul class="sectlevel2">
<li><a href="#_question_1">Question 1</a></li>
<li><a href="#_question_2">Question 2</a></li>
<li><a href="#_question_3">Question 3</a></li>
</ul>
</li>
<li><a href="#_summary">Summary</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<script src="https://browser.sentry-cdn.com/4.0.6/bundle.min.js" crossorigin="anonymous"></script>

<script>
  Sentry.init({ dsn: 'https://7df45f54b1e844b49d9f603100930bd7@sentry.io/1294106' });
</script>

<script type='text/javascript'>
	var loc = window.location;
	document.write(unescape("%3Cscript src='//munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script>Munchkin.init('773-GON-065');</script>


<style>
    @import "/online_training/cypher-gadget/libs/jquery.modal.min.css" screen;
    .modal {
        width: 775px;
        height: 775px;
        padding: 10px;
        margin: 0;
    }
    .blocker {
        height: initial;
        background-color: transparent;
    }
</style>
<script src="/online_training/cypher-gadget/libs/underscore.js"></script>
<script src="/online_training/cypher-gadget/libs/jquery.js"></script>
<script src="/online_training/cypher-gadget/libs/jquery-ui.min.js"></script>
<script src="/online_training/cypher-gadget/libs/jquery.modal.min.js"></script>
<!--script src="/online_training/gadgetUtils.js"></script-->
<script src="/online_training/tasks.js"></script>
<script type="text/javascript">
function renderGadget(containerSelector, options) {
  if (!options.cypherSetup) return;
  var frameId = _.uniqueId("exmodal");
  $(containerSelector).append('<button onclick="setGadgetUrl(\'#' + frameId +
    '\')" rel="modal:open" class="btn">' + (options.label || 'Gadget') + '</button>');

    $(containerSelector).append(modalWindow(frameId,options));
  }

function modalWindow(frameId, options) {
   return `<div id="${frameId}" class="modal-dialog modal fade draggable" style="display:none;text-align:center;vertical-align:middle;" >
            <iframe data-src="/online_training/cypher-gadget/test.html?cypherSetup=${options.cypherSetup}&${formatTask(options)}" width="725" height="725" frameborder="0" style="margin:5px;"
              webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
           <div>`;
}
/*
    .modal {
        width: 775px;
        height: 675px;
        padding: 10px;
        margin: 0;
    }
*/

function formatTask(options) {
  if (options.task) return "cypherTaskJSON="+encodeURIComponent(JSON.stringify(options.task));
  if (options.taskName) return "cypherTask="+options.taskName;
  return "";
}


function setGadgetUrl(sel) {
  $(sel).modal();
  $(sel).draggable();
  var $iframe = $(sel).find("iframe");
  $iframe.attr("src", $iframe.data("src"));
}
</script>
</div>
</div>
<div class="sect2">
<h3 id="_about_this_module">About this module</h3>
<div class="paragraph">
<p>Cypher is the query language you use to retrieve data from the Neo4j Database, as well as create and update the data.</p>
</div>
<div class="paragraph">
<p>At the end of this module, you should be able to write Cypher statements to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
<p>Retrieve nodes from the graph.</p>
</li>
<li>
<p>Filter nodes retrieved using labels and property values of nodes.</p>
</li>
<li>
<p>Retrieve property values from nodes in the graph.</p>
</li>
<li>
<p>Filter nodes retrieved using relationships.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Throughout this training, you should refer to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
<p><a href="https://neo4j.com/docs/developer-manual" target="_blank" rel="noopener">Neo4j Developer Manual</a></p>
</li>
<li>
<p><a href="http://neo4j.com/docs/cypher-refcard/current/" target="_blank" rel="noopener">Cypher Reference card</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_what_is_cypher">What is Cypher?</h3>
<div class="paragraph">
<p>Cypher is a declarative query language that allows for expressive and efficient querying and updating of graph data.
Cypher is a relatively simple and very powerful language.
Complex database queries can easily be expressed through Cypher, allowing you to focus on your domain instead of getting lost in the syntax of database access.</p>
</div>
<div class="paragraph">
<p>Cypher is designed to be a human-friendly query language, suitable for both developers and other professionals.
The guiding goal is to make the simple things easy, and the complex things possible.</p>
</div>
<div class="sect3">
<h4 id="_cypher_is_ascii_art">Cypher is ASCII art</h4>
<div class="paragraph">
<p>Optimized for being read by humans, Cypher&#8217;s construct uses English prose and iconography (called ASCII Art) to make queries more self-explanatory.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ASCIIArt.png" alt="ASCIIArt" width="700">
</div>
</div>
<div class="paragraph">
<p>&#160;<br>
Being a declarative language, Cypher focuses on the clarity of expressing <strong>what</strong> to retrieve from a graph, not on <strong>how</strong> to retrieve it.
You can think of Cypher as mapping English language sentence structure to patterns in a graph. For example, the nouns are nodes of the graph, the verbs are the relationships in the graph, and the adjectives and adverbs are the properties.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/Nouns.png" alt="Nouns" width="700">
</div>
</div>
<div class="paragraph">
<p>&#160;<br>
This is in contrast to imperative, programmatic APIs for database access.
This approach makes query optimization an implementation detail instead of a burden on the developer, removing the requirement to update all traversals just because the physical database structure has changed.</p>
</div>
<div class="paragraph">
<p>Cypher is inspired by a number of different approaches and builds upon established practices for expressive querying.
Many of the Cypher keywords like <code>WHERE</code> and <code>ORDER BY</code> are inspired by SQL.
The pattern matching functionality of Cypher borrows concepts from SPARQL.
And some of the collection semantics have been borrowed from languages such as Haskell and Python.</p>
</div>
<div class="paragraph">
<p>The Cypher language has been made available to anyone to implement and use via openCypher (opencypher.org), allowing any database vendor, researcher or other interested party to reap the benefits of our years of effort and experience in developing a first class graph query language.</p>
</div>
</div>
<div class="sect3">
<h4 id="_nodes">Nodes</h4>
<div class="paragraph">
<p>Cypher uses a pair of parentheses like <code>()</code>, <code>(n)</code> to represent a node, much like a circle on a whiteboard.
Recall that a node typically represents an entity in your domain.
An anonymous node, <code>()</code>, represents one or more nodes during a query processing where there are no restrictions of the type of node or the properties of the node.
When you specify <code>(n)</code> for a node, you are telling the query processor that for this query, use the variable <em>n</em> to represent nodes that will be processed later in the query for further query processing or for returning values from the query.</p>
</div>
</div>
<div class="sect3">
<h4 id="_labels">Labels</h4>
<div class="paragraph">
<p>Nodes in a graph are typically labeled. Labels are used to group nodes and filter queries against the graph.
That is, labels can be used to optimize queries.
In the <em>Movie</em> database you will be working with, the nodes in this graph are labeled <em>Movie</em> or <em>Person</em> to represent two types of nodes.</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">For example, you can see the labels in the database by simply clicking the Database icon in Neo4j Browser:</p></td>
<td class="tableblock halign-left valign-middle"><div><div class="imageblock thumb" style="text-align: center">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/NodeLabels.png" alt="NodeLabels" width="300">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can filter the types of nodes that you are querying, by specifying a <strong>label</strong> for a node.
A node can have zero or more labels.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><span class="red">Here are simplified syntax examples for specifying a node:</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>()
(variable)
(:Label)
(variable:Label)
(:Label1:Label2)
(variable:Label1:Label2)</pre></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Notice that a node must have the parentheses. The labels and the variable for a node are optional.</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here are examples of specifying nodes in Cypher:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>()					// anonymous node not be referenced later in the query
(p)					// variable p, a reference to a node used later
(:Person)			// anonymous node of type Person
(p:Person)			// p, a reference to a node of type Person
(p:Actor:Director)	// p, a reference to a node of types Actor and Director</pre>
</div>
</div>
<div class="paragraph">
<p>A node can have multiple labels. For example a node can be created with a label of <em>Person</em> and that same node can be modified to also have the label of <em>Actor</em> and/or <em>Director</em>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_comments_in_cypher">Comments in Cypher</h4>
<div class="paragraph">
<p>In Cypher, you can place a comment (starts with <code>//</code>) anywhere in your Cypher to specify that the rest of the line is interpreted as a comment.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_examining_the_data_model">Examining the data model</h3>
<div class="paragraph">
<p>When you are first learning about the data (nodes, labels, etc.) in a graph, it is helpful to examine the data model of the graph.
You do so by executing <code>CALL db.schema</code>, which calls the Neo4j procedure that returns information about the nodes, labels, and relationships in the graph.</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>For example, when we run this procedure in our training environment, we see the following in the result pane.
Here we see that the graph has 2 labels defined for nodes, <em>Person</em> and <em>Movie</em>.
Each type of nodes is displayed in a different color.
The relationships between nodes are also displayed, which you will learn about later in this module.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/call_db.schema.png" alt="call_db.schema" width="500">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_using_match_to_retrieve_nodes">Using MATCH to retrieve nodes</h3>
<div class="paragraph">
<p>In this video, you will be introduced to using the <code>MATCH</code> statement to retrieve nodes from the graph in Neo4j Browser.</p>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Sz2C618QKN8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<div class="paragraph">
<p>&#160;<br>
The most widely used Cypher clause is  <code>MATCH</code>.
The <code>MATCH</code> clause performs a pattern match against the data in the graph.
During the query processing, the graph engine traverses the graph to find all nodes that match the graph pattern.
As part of query, you can return nodes or data from the nodes using the <code>RETURN</code> clause.
The <code>RETURN</code> clause must be the last clause of a query to the graph.
Later in this training, you will learn how to use <code>MATCH</code> to select nodes and data for updating the graph.
First, you will learn how to simply return nodes.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><span class="red">Here are simplified syntax examples for a query:</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (variable)
RETURN variable</pre></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (variable:Label)
RETURN variable</pre></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Notice that the Cypher keywords <code>MATCH</code> and <code>RETURN</code> are upper-case.
This coding convention is described in the <em>Cypher Style Guide</em> and will be used in this training.
This <code>MATCH</code> clause returns all nodes in the graph, where the optional <em>Label</em> is used to return a subgraph if the graph contains nodes of different types.
The <em>variable</em> must be specified here, otherwise the query will have nothing to return.</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here are example queries to the <em>Movie</em> database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (n) 			// returns all nodes in the graph
RETURN n</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person) 	// returns all Person nodes in the graph
RETURN p</pre>
</div>
</div>
<div class="paragraph">
<p>When we execute the Cypher statement, <code>MATCH (p:Person) RETURN p</code>, the graph engine returns all nodes with the label <em>Person</em>.
The default view of the returned nodes are the nodes that were referenced by the variable <em>p</em>.</p>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/PersonNodes-graph.png" alt="PersonNodes" width="500">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When you specify a pattern for a <code>MATCH</code> clause, you should always specify a node label if possible. In doing so, the graph engine uses an index to retrieve the nodes which will perform better than not using a label for the <code>MATCH</code>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_viewing_nodes_as_table_data">Viewing nodes as table data</h4>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>We can also view the nodes as table data where the nodes and their associated property values are shown in a JSON-style format:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/PersonNodes-table.png" alt="PersonNodes-table" width="500">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When nodes are displayed as table values, the node labels and ids are not shown, only the property values for the nodes. Node ids are unique identifiers and are set by the graph engine when a node is created.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_strong_exercise_1_retrieving_nodes_strong"><strong>Exercise 1: Retrieving nodes</strong></h3>
<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 1.</p>
</div>
</div>
<div class="sect2">
<h3 id="_properties">Properties</h3>
<div class="paragraph">
<p>In Neo4j, a node (and a relationship, which you will learn about later) can have properties that are used for further define a node.
A property is identified by its property key.
Recall that nodes are used to represent the entities of your business model.
A property is defined for a node and not for a type of node.
All nodes of the same type need not have the same properties.</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>For example, in the <em>Movie</em> graph, all <em>Movie</em> nodes have both <em>title</em>  and <em>released</em> properties.
However, it is not a requirement that every <em>Movie</em> node has a property, <em>tagline</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MovieProperties.png" alt="MovieProperties" width="600">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Properties can be used to filter queries  so that a subset of the graph is retrieved.
In addition, with the <code>RETURN</code> clause, you can return property values from the retrieved nodes, rather than the nodes.</p>
</div>
<div class="sect3">
<h4 id="_examining_property_keys">Examining property keys</h4>
<div class="paragraph">
<p>As you prepare to create Cypher queries that use property values to filter a query, you can view the values for property keys of a graph by simply clicking the Database icon in Neo4j Browser.
Alternatively, you can execute  <code>CALL db.propertyKeys</code>,  which calls the Neo4j library method that returns the property keys for the graph.</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here is what you will see in the result pane when you call the method to return the property keys in the <em>Movie</em> graph.
This result stream contains all property keys in the graph. It does not display which nodes utilize these property keys.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/call_db.PropertyKeys.png" alt="call_db.PropertyKeys" width="700">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_retrieving_nodes_filtered_by_a_property_value">Retrieving nodes filtered by a property value</h4>
<div class="paragraph">
<p>You have learned previously that you can filter node retrieval by specifying a label.
Another way you can filter a retrieval is to specify a value for a property.
Any node that matches the value will be retrieved.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><span class="red">Here are  simplified syntax examples for a query where we specify one or more values for  properties that will be used to filter the query results and return a subset of the graph:</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (variable {propertyKey: propertyValue})
RETURN variable</pre></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (variable:Label {propertyKey: propertyValue})
RETURN variable</pre></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (variable {propertyKey1: propertyValue1, propertyKey2: propertyValue2})
RETURN variable</pre></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (variable:Label {propertyKey: propertyValue, propertyKey2: propertyValue2})
RETURN variable</pre></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here is an example where we filter the query results using a property value.
We only retrieve <em>Person</em> nodes that have a <em>born</em> property value of <em>1970</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person {born: 1970})
RETURN p</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MatchPersonBorn1970.png" alt="MatchPersonBorn1970" width="500">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here is an example where we specify two property values for the query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (m:Movie {released: 2003, tagline: 'Free your mind'})
RETURN m</pre>
</div>
</div>
<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/TwoPropertiesForFilter.png" alt="TwoPropertiesForFilter" width="500">
</div>
</div>
<div class="paragraph">
<p>As it turns out, there is only one movie with the <em>tagline</em>, <em>Free your mind</em> in the <em>Movie</em> database, but if we had specified a different year, the query would not have returned a value because when you specify properties, both properties must match.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_returning_property_values">Returning property values</h4>
<div class="paragraph">
<p>In this video, you will see how to return property values to the output stream when you retrieve nodes from the graph in  Neo4j Browser.</p>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Nb9tSFVrQuc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<div class="paragraph">
<p>&#160;<br>
Thus far, you have seen how to retrieve nodes and return nodes (entire graph or a subset of the graph).
You can use the <code>RETURN</code> clause to return property values of nodes retrieved.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><span class="red">Here are simplified syntax examples for returning property values, rather than nodes:</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (variable {prop1: value})
RETURN variable.prop2</pre></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (variable:Label {prop1: value})
RETURN variable.prop2</pre></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (variable:Label {prop1: value, prop2: value})
RETURN variable.prop3</pre></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (variable {prop1:value})
RETURN variable.prop2, variable.prop3</pre></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>In this example, we use the <em>born</em> property to refine the query, but rather than returning the nodes, we return the <em>name</em>  and <em>born</em> values for every node that satisfies the query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person {born: 1965})
RETURN p.name, p.born</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MatchPersonBorn1965.png" alt="MatchPersonBorn1965" width="500">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_specifying_aliases">Specifying aliases</h4>
<div class="paragraph">
<p>If you want to customize the headings for a table containing property values, you can specify <strong>aliases</strong> for column headers.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><span class="red">Here is the simplified syntax for specifying an alias for a property value:</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (variable:Label {propertyKey1: propertyValue1})
RETURN variable.propertyKey2 AS alias2</pre></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you want a heading to contain a space between strings, you must specify the alias with the back tick <em>`</em> character, rather than a single or double quote character. In fact, you can specify any variable, label, relationship type, or property key with a space also by using the back tick <em>`</em> character.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here we specify aliases for the returned property values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person {born: 1965})
RETURN p.name AS name, p.born AS `birth year`</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/UsingAliases.png" alt="UsingAliases" width="700">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_strong_exercise_2_filtering_queries_using_property_values_strong"><strong>Exercise 2: Filtering queries using property values</strong></h3>
<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 2.</p>
</div>
</div>
<div class="sect2">
<h3 id="_relationships">Relationships</h3>
<div class="paragraph">
<p>Relationships are what make Neo4j graphs such a powerful tool for connecting complex and deep data.
A relationship is a <strong>directed</strong> connection between two nodes that has a <strong>relationship type</strong> (name).
In addition, a relationship can have properties, just like nodes.
In a graph where you want to retrieve nodes, you can use relationships between nodes to filter a query.</p>
</div>
<div class="sect3">
<h4 id="_ascii_art">ASCII art</h4>
<div class="paragraph">
<p>Thus far, you have learned how to specify a node in a <code>MATCH</code> clause.
You can specify nodes and their relationships to traverse the graph and quickly find the data of interest.</p>
</div>
<div class="listingblock">
<div class="title">Here is how Cypher uses ASCII art to specify path used for a query:</div>
<div class="content">
<pre>()			// a node
()--()	    // 2 nodes have some type of relationship
()-&gt;()	    // the first node has a relationship to the second node
()&lt;-()	    // the second node has a relationship to the first node</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_querying_using_relationships">Querying using relationships</h4>
<div class="paragraph">
<p>In your <code>MATCH</code> clause, you specify how you want a relationship to be used to perform the query. The relationship can be specified with or without direction.</p>
</div>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><span class="red">Here are simplified syntax examples for retrieving a set of nodes that satisfy one or more directed and typed relationships:</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (node1)-[:REL_TYPE]-&gt;(node2)
RETURN node1, node2</pre></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="literal"><pre>MATCH (node1)-[:REL_TYPEA | :REL_TYPEB]-&gt;(node2)
RETURN node1, node2</pre></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><em>where:</em></p>
</div>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-none grid-all" style="width: 80%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>node1</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is a specification of a node where you may include node labels and property values for filtering.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>:REL_TYPE</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is the type (name) for the relationship. For this syntax the relationship is from <em>node1</em> to <em>node2</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>:REL_TYPEA</em> , <em>:REL_TYPEB</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">are the relationships from <em>node1</em> to <em>node2.</em> The nodes are returned if at least one of the relationships exists.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>node2</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is a specification of a node where you may include node labels and property values for filtering.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p></p>
</div>
</div>
<div class="sect3">
<h4 id="_examining_relationships">Examining relationships</h4>
<div class="paragraph">
<p>You can run <code>CALL db.schema</code> to view the relationship types in the graph.
In the <em>Movie</em> graph, we see these relationships between the nodes:</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here we see that this graph has a total of 6 relationship types between the nodes. Some <em>Person</em> nodes are connected to other <em>Person</em> nodes using the <em>FOLLOWS</em> relationship type.
All of the other relationships in this graph are from <em>Person</em> nodes to <em>Movie</em> nodes.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/call_db.schema-relationships.png" alt="call_db.schema-relationships" width="600">
</div>
</div>
<div class="paragraph">
<p>The relationship types can also be viewed by selecting the arrow to the right in the relationship type row.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_using_a_relationship_in_a_query">Using a relationship in a query</h4>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here is an example where we retrieve the <em>Person</em> nodes that have the <em>ACTED_IN</em> relationship to the <em>Movie</em>, <em>The Matrix</em>.
In other words, show me the actors that acted in <em>The Matrix</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[rel:ACTED_IN]-&gt;(m:Movie {title: 'The Matrix'})
RETURN p, rel, m</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ActorsInMatrix.png" alt="ActorsInMatrix" width="700">
</div>
</div>
<div class="paragraph">
<p>For this query, we are using the variable <em>p</em> to represent the <em>Person</em> nodes during the query, the variable <em>m</em> to represent the <em>Movie</em> node retrieved, and the variable <em>rel</em> to represent the relationship for the relationship type, <em>ACTED_IN</em>.
We return a graph with the <em>Person</em> nodes, the <em>Movie</em> node and their <em>ACTED_IN</em> relationships.</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>Important:</strong> You specify node labels whenever possible in your queries as it optimizes the retrieval in the graph engine.
That is, you should <strong>not</strong> specify this same query as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p)-[rel:ACTED_IN]-&gt;(m {title:'The Matrix'})
RETURN p,m</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_querying_by_multiple_relationships">Querying by multiple relationships</h4>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here is another example where we want to know the movies that <em>Tom Hanks</em> acted in and directed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person {name: 'Tom Hanks'})-[:ACTED_IN |:DIRECTED]-&gt;(m:Movie)
RETURN p.name, m.title</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/TomHanksActedDirected.png" alt="ActorsInMatrix" width="700">
</div>
</div>
<div class="paragraph">
<p>Notice that there are multiple rows returned for the movie, <em>That Thing You Do</em>. This is because <em>Tom Hanks</em> acted in and directed that movie.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_using_anonymous_nodes_in_a_query">Using anonymous nodes in a query</h4>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Suppose you wanted to retrieve the actors that acted in <em>The Matrix</em>, but you do not need any information returned about the <em>Movie</em> node.
You need not specify a variable for a node in a query if that node is not returned or used for later processing in the query.
You can simply use the anonymous node in the query as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:ACTED_IN]-&gt;(:Movie {title: 'The Matrix'})
RETURN p.name</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AnonymousMovieNode.png" alt="AnonymousMovieNode" width="600">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
A best practice is to place named nodes (those with variables) before anonymous nodes in a <code>MATCH</code> clause.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_using_an_anonymous_relationship_for_a_query">Using an anonymous relationship for a query</h4>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Suppose you want to find all people who are in any way connected to the movie, <em>The Matrix</em>.
You can specify an empty relationship type in the query so that all relationships are traversed and the appropriate results are returned.
In this example, we want to retrieve all <em>Person</em> nodes that have any type of connection to the <em>Movie</em> node, with the <em>title</em>, <em>The Matrix</em>.
This query returns more nodes with the relationships types, <em>DIRECTED</em>, <em>ACTED_IN</em>, and <em>PRODUCED</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)--&gt;(m:Movie {title: 'The Matrix'})
RETURN p, m</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AllRelationshipsMatrix.png" alt="AllRelationshipsMatrix" width="600">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here are other examples of using the anonymous relationship:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)--(m:Movie {title: 'The Matrix'})
RETURN p, m</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (m:Movie)&lt;-(p:Person {name: 'Keanu Reeves'})
RETURN p, m</pre>
</div>
</div>
<div class="paragraph">
<p>In this training, we will use <code>-&gt;</code>, <code>--</code>, and <code>&lt;-</code> to represent anonymous relationships as it is a Cypher best practice.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_retrieving_the_relationship_types">Retrieving the relationship types</h4>
<div class="paragraph">
<p>There is a built-in function, <code>type()</code> that returns the relationship type of a relationship.</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here is an example where we use the <em>rel</em> variable to hold the relationships retrieved. We then use this variable to return the relationship types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[rel]-&gt;(:Movie {title:'The Matrix'})
RETURN p.name, type(rel)</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MatrixRelationshipTypes.png" alt="MatrixRelationshipTypes" width="700">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_retrieving_properties_for_relationships">Retrieving properties for relationships</h4>
<div class="paragraph">
<p>Recall that a node can have as set of properties, each identified by its property key.
Relationships can also have properties.
This enables your graph model to provide more data about the relationships between the nodes.</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here is an example from the <em>Movie</em> graph.
The movie, <em>The Da Vinci Code</em> has two people that reviewed it, <em>Jessica Thompson</em> and <em>James Thompson</em>. Each of these <em>Person</em> nodes has the <em>REVIEWED</em> relationship to the <em>Movie</em> node for <em>The Da Vinci Code</em>.
Each relationship has properties that further describe the relationship using the <em>summary</em> and <em>rating</em> properties.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/REVIEWEDProperties.png" alt="ReviewedProperties" width="700">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Just as you can specify property values for filtering nodes for a query, you can specify property values for a relationship. This query returns the name of of the person who gave the movie a rating of <em>65.</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (p:Person)-[:REVIEWED {rating: 65}]-&gt;(:Movie {title: 'The Da Vinci Code'})
RETURN p.name</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ReturnPersonRating65.png" alt="ReturnPersonRating65" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_using_patterns_for_queries">Using patterns for queries</h3>
<div class="paragraph">
<p>Thus far, you have learned how to specify nodes, properties, and relationships in your Cypher queries.
Since relationships are directional, it is important to understand how patterns are used in graph traversal during query execution. How a graph is traversed for a query depends on what directions are defined for relationships and how the pattern is specified in the <code>MATCH</code> clause.</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here is an example of where the <em>FOLLOWS</em> relationship is used in the <em>Movie</em> graph.
Notice that this relationship is directional.</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/FollowsRelationships.png" alt="FollowsRelationships" width="500">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>We can perform a query that returns all <em>Person</em> nodes who follow <em>Angela Scope</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH  (p:Person)-[:FOLLOWS]-&gt;(:Person {name:'Angela Scope'})
RETURN p</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AngelaFollowers.png" alt="AngelaFollowers" width="700">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>If we reverse the direction in the pattern, the query returns different results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH  (p:Person)&lt;-[:FOLLOWS]-(:Person {name:'Angela Scope'})
RETURN p</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/FollowedByAngela.png" alt="FollowedByAngela" width="700">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_querying_by_any_direction_of_the_relationship">Querying by any direction of the relationship</h4>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>We can also find out what <em>Person</em> nodes are connected by the <em>FOLLOWED</em> relationship in either direction by removing the directional arrow from the pattern.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH  (p1:Person)-[:FOLLOWS]-(p2:Person {name:'Angela Scope'})
RETURN p1, p2</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AngelaFromTo.png" alt="AngelaFromTo" width="700">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_traversing_relationships">Traversing relationships</h4>
<div class="paragraph">
<p>Since we have a graph, we can traverse through nodes to obtain relationships further into the traversal.</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>For example, we can write a Cypher query to return all followers of the followers of <em>Jessica Thompson</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH  (p:Person)-[:FOLLOWS]-&gt;(:Person)-[:FOLLOWS]-&gt;(:Person {name:'Jessica Thompson'})
RETURN p</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/FollowersOfJessicaFollowers.png" alt="FollowersOfJessicaFollowers" width="800">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>This query could also be modified to return each person along the path by specifying variables for the nodes and returning them. In addition, you can assign a variable to the path and return the path as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH  path = (:Person)-[:FOLLOWS]-&gt;(:Person)-[:FOLLOWS]-&gt;(:Person {name:'Jessica Thompson'})
RETURN  path</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ReturnPath.png" alt="ReturnPath" width="700">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_using_relationship_direction_to_optimize_a_query">Using relationship direction to optimize a query</h4>
<div class="paragraph">
<p>When querying the relationships in a graph, you can take advantage of the direction of the relationship to traverse the graph.
For example, suppose we wanted to get a result stream containing rows of actors and the movies they acted in, along with the director of the particular movie.</p>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here is the Cypher query to do this. Notice that the direction of the traversal is used to focus on a particular movie during the query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (a:Person)-[:ACTED_IN]-&gt;(m:Movie)&lt;-[:DIRECTED]-(d:Person)
RETURN a.name, m.title, d.name</pre>
</div>
</div>
<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<div class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/TraversalInTwoDirections.png" alt="TraversalInTwoDirections" width="800">
</div>
</div>
<div class="paragraph">
<p>In this query, notice that there are multiple records returned for a movie, each with its set of values for the actor and director.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Later in this training, you will learn other ways to query data and how to control the results returned.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cypher_style_recommendations">Cypher style recommendations</h3>
<div class="paragraph">
<p>Here are the <strong>Neo4j-recommended</strong> Cypher coding standards that we use in this training:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
<p>Node labels are CamelCase and begin with an upper-case letter (examples: <em>Person</em>, <em>NetworkAddress</em>). Note that node labels are case-sensitive.</p>
</li>
<li>
<p>Property keys, variables, parameters, aliases, and functions are camelCase and begin with a lower-case letter (examples: <em>businessAddress</em>, <em>title</em>). Note that these elements are case-sensitive.</p>
</li>
<li>
<p>Relationship types are in upper-case and can use the underscore. (examples: <em>ACTED_IN</em>, <em>FOLLOWS</em>). Note that relationship types are case-sensitive and that you cannot use the "-" character in a relationship type.</p>
</li>
<li>
<p>Cypher keywords are upper-case (examples: <code>MATCH</code>, <code>RETURN</code>). Note that Cypher keywords are case-insensitive, but a best practice is to use upper-case.</p>
</li>
<li>
<p>String constants are in single quotes, unless the string contains a quote or apostrophe (examples: <em>'The Matrix'</em>, <em>"Something&#8217;s Gotta Give"</em>). Note that  you can also escape single or double quotes within strings that are quoted with the same using a backslash character.</p>
</li>
<li>
<p>Specify variables only when needed for use later in the Cypher statement.</p>
</li>
<li>
<p>Place named nodes and relationships (that use variables) before anonymous nodes and relationships in your <code>MATCH</code> clauses when possible.</p>
</li>
<li>
<p>Specify anonymous relationships with <code>--&gt;</code>, <code>--</code>, or <code>&lt;--</code></p>
</li>
</ul>
</div>
<table class="tableblock frame-none grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Here is an example showing some best coding practices:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>MATCH (:Person {name: 'Diane Keaton'})-[movRel:ACTED_IN]-&gt;
(:Movie {title:"Something's Gotta Give"})
RETURN movRel.roles</pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We recommend that you follow the <a href="https://github.com/opencypher/openCypher/blob/master/docs/style-guide.adoc" target="_blank" rel="noopener">Cypher Style Guide</a> when writing your Cypher statements.</p>
</div>
</div>
<div class="sect2">
<h3 id="_strong_exercise_3_filtering_queries_using_relationships_strong"><strong>Exercise 3: Filtering queries using relationships</strong></h3>
<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 3.</p>
</div>
</div>
<div class="sect1">
<h2 id="_check_your_understanding">Check your understanding</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_question_1">Question 1</h3>
<div class="paragraph">
<p>Suppose you have a graph that contains nodes representing customers and other business entities for your application.
The node label in the database for a customer is <em>Customer</em>. Each <em>Customer</em> node has a property named <em>email</em> that contains the customer&#8217;s email address.
What Cypher query do you execute to return the email addresses for all customers in the graph?</p>
</div>
<div class="paragraph">
<p>Select the correct answer.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (n) RETURN n.Customer.email</code></span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer"><code>MATCH (c:Customer) RETURN c.email</code></span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (Customer) RETURN email</code></span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (c) RETURN Customer.email</code></span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_question_2">Question 2</h3>
<div class="paragraph">
<p>Suppose you have a graph that contains <em>Customer</em> and <em>Product</em> nodes. A <em>Customer</em> node can have a <em>BOUGHT</em> relationship with a <em>Product</em> node.
<em>Customer</em> nodes can have other relationships with <em>Product</em> nodes.
A <em>Customer</em> node has a property named <em>customerName</em>.
A <em>Product</em> node has a property named <em>productName</em>.
What Cypher query do you execute to return all of the products (by name) bought by customer 'ABCCO'.</p>
</div>
<div class="paragraph">
<p>Select the correct answer.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (c:Customer {customerName: 'ABCCO'}) RETURN c.BOUGHT.productName</code></span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (:Customer 'ABCCO')-[:BOUGHT]->(p:Product) RETURN p.productName</code></span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (p:Product)<-[:BOUGHT_BY]-(:Customer 'ABCCO') RETURN p.productName</code></span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer"><code>MATCH (:Customer {customerName: 'ABCCO'})-[:BOUGHT]->(p:Product) RETURN p.productName</code></span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_question_3">Question 3</h3>
<div class="paragraph">
<p>When <span class="underline">must</span> you use a variable in a MATCH clause?</p>
</div>
<div class="paragraph">
<p>Select the correct answer.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">When you want to query the graph using a node label.</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">When you specify a property value to match the query.</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="required-answer">When you want to use the node or relationship to return a result.</span></p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> <span class="false-answer">When the query involves 2 types of nodes.</span></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You should now be able to write Cypher statements to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
<p>Retrieve nodes from the graph.</p>
</li>
<li>
<p>Filter nodes retrieved using property values of nodes.</p>
</li>
<li>
<p>Retrieve property values from nodes in the graph.</p>
</li>
<li>
<p>Filter nodes retrieved using relationships.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="/graphacademy/online-training/introduction-to-neo4j/part-5/">Continue to Part 5,role="next-section medium button"</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>

<script src="http://graphacademy.neo4j.com/training-classes/js/classes.js" type="text/javascript"></script>
<script src="http://graphacademy.neo4j.com/training-quizes/js/quizes.js" type="text/javascript"></script>

 <link rel='stylesheet' id='neo-codemirror-css'
    href="http://neo4j.com/wp-content/themes/neo4jweb/assets/css/codemirror-neo.css?ver=4.5" type='text/css'
    media='screen'/>

 <script type='text/javascript'
   src='http://neo4j.com/wp-content/themes/neo4jweb/assets/js/vendor/codemirror.min.js?ver=4.5.2'></script>

 <script type='text/javascript'>
  if (!CodeMirror.colorize) CodeMirror.colorize=function() {};
  $( document ).ready(function() {
    CodeMirror.colorize();
  });
 </script>


<script>
  window.intercomSettings = {
    app_id: "dt0ig5ab",
    hide_default_launcher: true
  };
</script>
<script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/dt0ig5ab';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>

<!-- JWT decoder: ONLY USE TO SEE UN-VERIFIED VALUES -->
<script src="//neo4jsandbox.com/js/jwt-decode.min.js"></script>


<script>
const SITE_URL = window.location;

var getTimeDiff = function(time1, time2) {
  var hourDiff = time2 - time1;
  var diffDays = Math.floor(hourDiff / 86400000);
  var diffHrs = Math.floor((hourDiff % 86400000) / 3600000);
  var diffMins = Math.floor(((hourDiff % 86400000) % 3600000) / 60000);
  return {"days": diffDays, "hours": diffHrs, "mins": diffMins};
}

var attemptRenewToken = function(silent, nextTimeout, nextTimeoutSilent) {
  console.log('renewAuth attempting');
  var iframe = document.createElement('iframe');
  iframe.style.display = 'none';
  iframe.src = 'https://neo4j.com/accounts/login?targetUrl=' + encodeURIComponent(SITE_URL);
  document.body.appendChild(iframe);
  if (nextTimeout) {
      setTimeout(
        function () {
          attemptRenewToken(nextTimeoutSilent, nextTimeout, nextTimeoutSilent);
        }, nextTimeout
      );
  }
}

var logout = function() {
  window.location = 'https://neo4j.com/graphacademy/online-training/introduction-to-neo4j/'
}

$( document ).ready(function() {
    var id_token = Cookies.get("com.neo4j.accounts.idToken");
    var decoded_token = jwt_decode(id_token);
    var expiresIn = getTimeDiff(Date.now(), (decoded_token.exp) * 1000);
    if (expiresIn.days > 0 || expiresIn.hours > 0) {
      // token is good.
    } else if (expiresIn.days == 0 && expiresIn.hours == 0 && expiresIn.mins > 1 && expiresIn.mins < 60) {
        // expiring soon, let's immediately get a new token
        attemptRenewToken(true, 1000*60*30, false);
    } else {
        // token is already expired, log user out in UI; token won't work
        logout();
    }


    var userInfoIntercom = Cookies.getJSON("com.neo4j.accounts.userInfo");
    if (userInfoIntercom) {
      try {
        window.Intercom("update", {
          app_id: "dt0ig5ab",
          name: userInfoIntercom.name,
          email: userInfoIntercom.email,
          user_id: userInfoIntercom.sub,
          hide_default_launcher: true
        });;
      } catch (err) {
        console.error(err);
      }
    }
    Intercom('trackEvent','training-introv2-view');
});
</script>
<script>
$( document ).ready(function() {
  Intercom('trackEvent','training-introv2-view-part4');
});
</script>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-11-26 11:15:31 PST
</div>
</div>
</body>
</html>