<html>
   <head>
      <meta charset="utf-8"></meta>
      <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
      <title>Neo4j GraphAcademy: Introduction to Neo4j</title>
      <link rel="stylesheet" type="text/css" href="https://neo4j.com/docs/developer-manual/current/docbook.css"></link>
      <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"></link>
      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css"></link>
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,600,300italic"></link>
      <link rel="stylesheet" type="text/css" href="https://neo4j.com/docs/developer-manual/current/css/extra.css"></link>
      <link rel="stylesheet" type="text/css" href="https://neo4j.com/docs/developer-manual/current/css/chunked-base.css"></link>
      <link rel="stylesheet" type="text/css" href="https://neo4j.com/docs/developer-manual/current/css/console.css"></link><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" type="text/javascript"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script>
      <link rel="shortcut icon" href="https://neo4j.com/wp-content/themes/neo4jweb/favicon.ico"></link>
      <script type='text/javascript'
   src='https://neo4j.com/wp-content/themes/neo4jweb/assets/js/vendor/codemirror.min.js?ver=4.5.2'></script>
      <script type='text/javascript'>
        window.trainingPartName = "module-4";
      </script>
   </head>
   <body>
      <style type="text/css">
        .headerlink {
          margin-left: 10px !important;
          margin-right: 10px !important;
        }
        @media only screen and (max-width: 1350px) {
          #helplink {
            display: none;
          }
        }
      </style>
      <header style="top: 0px;">
         <a href="../part-0/" id="logo"><img src="https://neo4j.com/wp-content/themes/neo4jweb/assets/images/neo4j-logo-2015.png" alt="Neo4j Logo"></a>
         <ul class="documentation-library">
            <li id="menu-module-1">
              <a class="headerlink" href="../part-1/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">1</strong>
              </span>
              Intro to Graph DBs</a>
            </li>
            <li id="menu-module-2">
              <a class="headerlink" href="../part-2/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">2</strong>
              </span>
              Intro to Neo4j</a>
            </li>
            <li id="menu-module-3">
              <a class="headerlink" href="../part-3/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">3</strong>
              </span>
              Dev Env</a>
            </li>
            <li id="menu-module-4">
              <a class="headerlink" href="../part-4/" style="color: #000">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">4</strong>
              </span>
              Cypher</a>
            </li>
            <li id="menu-module-5">
              <a class="headerlink" href="../part-5/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">5</strong>
              </span>
              Advanced Queries</a>
            </li>
            <li id="menu-module-6">
              <a class="headerlink" href="../part-6/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">6</strong>
              </span>
              Creating Data</a>
            </li>
            <li id="menu-module-7">
              <a class="headerlink" href="../part-7/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">7</strong>
              </span>
              More</a>
            </li>
            <li>
              <a class="headerlink" href="../part-8/">
              <span class="fa-stack" style="margin-top: -2px">
                <span class="fa fa-circle-o fa-stack-2x"></span>
                <strong class="fa-stack-1x">8</strong>
              </span>
              The End</a>
            </li>
         </ul>
          <div id="helplink" style="position: absolute; top: 10px; right: 30px; font-size: 20px;">
            <a href="https://community.neo4j.com/c/general/online-training" target="_blank">Need Help?</a>
          </div>
         <nav id="header-nav">
         <span class="nav-previous">
           
              <a accesskey="p" href="../part-3/">
                <span class="fa fa-long-arrow-left" aria-hidden="true"></span>
              Development Environment</a>
           
         </span>
         <span class="nav-current">
           <p class="nav-title" style="display: none;"></p>
         </span>
         <span class="nav-next">
           
              <a accesskey="n" href="../part-5/">Advanced Queries
                <span class="fa fa-long-arrow-right" aria-hidden="true"></span>
              </a>
           
         </span>
         </nav>
      </header>


<div id="developer-manual" style="padding-top: 150px; padding-left: 20px; padding-bottom: 100px;">
<h1>Introduction to Cypher</h1>

      <div id="preamble columns medium-12">
<div class="sectionbody">
<script src="https://browser.sentry-cdn.com/4.4.1/bundle.min.js" crossorigin="anonymous"></script>
<script type='text/javascript'>
	var loc = window.location;
	document.write(unescape("%3Cscript src='https://munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>
window.trainingClassName = 'online-training-v2';
</script>

<script>Munchkin.init('773-GON-065');</script>


<style>
    @import "https://neo4j.com/online_training/cypher-gadget/libs/jquery.modal.min.css" screen;
    .modal {
        width: 775px;
        height: 775px;
        padding: 10px;
        margin: 0;
    }
    .blocker {
        height: initial;
        background-color: transparent;
    }
  a.button {
    display: block;
    text-align: center;
    width: 250px;
    font-size: 18px;
    margin-top: 50px;
    font-family: 'Open Sans';
    height: 55px;
    border-style: solid;
    border-width: 0;
    cursor: pointer;
    color: white;
    padding: 15px;
    font-weight: 300;
    background-color: #6dcc9c;
    border-color: #4ac084;
  }

  .button a hover {
      background-color: #4ac084;
  }

  pre.cypher-syntax {
    background-color: #eaf1f8;
  }
</style>
<script src="https://neo4j.com/online_training/cypher-gadget/libs/underscore.js"></script>
<script src="https://neo4j.com/online_training/cypher-gadget/libs/jquery.js"></script>
<script src="https://neo4j.com//online_training/cypher-gadget/libs/jquery-ui.min.js"></script>
<script src="https://neo4j.com/online_training/cypher-gadget/libs/jquery.modal.min.js"></script>
<script src="https://neo4jsandbox.com/js/js.cookie-2.1.3.min.js"></script>
<!--script src="/online_training/gadgetUtils.js"></script-->
<script type="text/javascript">
  Sentry.init({ dsn: 'https://652808557bb1478883636c96edb51739@sentry.io/1342352' });
</script>
<script src="https://neo4j.com/online_training/tasks.js"></script>
<script type="text/javascript">
function renderGadget(containerSelector, options) {
  if (!options.cypherSetup) return;
  var frameId = _.uniqueId("exmodal");
  $(containerSelector).append('<button onclick="setGadgetUrl(\'#' + frameId +
    '\')" rel="modal:open" class="btn">' + (options.label || 'Gadget') + '</button>');

    $(containerSelector).append(modalWindow(frameId,options));
  }

function modalWindow(frameId, options) {
   return `<div id="${frameId}" class="modal-dialog modal fade draggable" style="display:none;text-align:center;vertical-align:middle;" >
            <iframe data-src="/online_training/cypher-gadget/test.html?cypherSetup=${options.cypherSetup}&${formatTask(options)}" width="725" height="725" frameborder="0" style="margin:5px;"
              webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
           <div>`;
}
/*
    .modal {
        width: 775px;
        height: 675px;
        padding: 10px;
        margin: 0;
    }
*/

function formatTask(options) {
  if (options.task) return "cypherTaskJSON="+encodeURIComponent(JSON.stringify(options.task));
  if (options.taskName) return "cypherTask="+options.taskName;
  return "";
}


function setGadgetUrl(sel) {
  $(sel).modal();
  $(sel).draggable();
  var $iframe = $(sel).find("iframe");
  $iframe.attr("src", $iframe.data("src"));
}
</script>
</div>
</div>
<div  id="_about_this_module" class="sect1 columns medium-12" style='padding-left: 0;' >
<h3>About this module</h3>


<div class="paragraph">
<p>Cypher is the query language you use to retrieve data from the Neo4j Database, as well as create and update the data.</p>
</div>


<div class="paragraph">
<p>At the end of this module, you should be able to write Cypher statements to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
Retrieve nodes from the graph.
</li>
<li>
Filter nodes retrieved using labels and property values of nodes.
</li>
<li>
Retrieve property values from nodes in the graph.
</li>
<li>
Filter nodes retrieved using relationships.
</li>
</ul>
</div>


<div class="paragraph">
<p>Throughout this training, you should refer to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
<a href="https://neo4j.com/docs/cypher-manual/current/" target="_blank" rel="noopener">Neo4j Cypher Manual</a>
</li>
<li>
<a href="http://neo4j.com/docs/cypher-refcard/current/" target="_blank" rel="noopener">Cypher Reference card</a>
</li>
</ul>
</div>
<div  id="_what_is_cypher" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>What is Cypher?</h3>


<div class="paragraph">
<p>Cypher is a declarative query language that allows for expressive and efficient querying and updating of graph data.
Cypher is a relatively simple and very powerful language.
Complex database queries can easily be expressed through Cypher, allowing you to focus on your domain instead of getting lost in the syntax of database access.</p>
</div>


<div class="paragraph">
<p>Cypher is designed to be a human-friendly query language, suitable for both developers and other professionals.
The guiding goal is to make the simple things easy, and the complex things possible.</p>
</div>
<div  id="_cypher_is_ascii_art" class="sect3 "  >
<h4>Cypher is ASCII art</h4>


<div class="paragraph">
<p>Optimized for being read by humans, Cypher&#8217;s construct uses English prose and iconography (called ASCII Art) to make queries more self-explanatory.</p>
</div>
<div class="imageblock" style="text-align: center;">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AsciiArt.png" alt="AsciiArt" width="600">
</p>
</div>


<div class="paragraph">
<p>&#160;<br>
Being a declarative language, Cypher focuses on the clarity of expressing <strong>what</strong> to retrieve from a graph, not on <strong>how</strong> to retrieve it.
You can think of Cypher as mapping English language sentence structure to patterns in a graph. For example, the nouns are nodes of the graph, the verbs are the relationships in the graph, and the adjectives and adverbs are the properties.</p>
</div>
<div class="imageblock" style="text-align: center;">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/Nouns.png" alt="Nouns" width="700">
</p>
</div>


<div class="paragraph">
<p>&#160;<br>
This is in contrast to imperative, programmatic APIs for database access.
This approach makes query optimization an implementation detail instead of a burden on the developer, removing the requirement to update all traversals just because the physical database structure has changed.</p>
</div>


<div class="paragraph">
<p>Cypher is inspired by a number of different approaches and builds upon established practices for expressive querying.
Many of the Cypher keywords like <code>WHERE</code> and <code>ORDER BY</code> are inspired by SQL.
The pattern matching functionality of Cypher borrows concepts from SPARQL.
And some of the collection semantics have been borrowed from languages such as Haskell and Python.</p>
</div>


<div class="paragraph">
<p>The Cypher language has been made available to anyone to implement and use via openCypher (opencypher.org), allowing any database vendor, researcher or other interested party to reap the benefits of our years of effort and experience in developing a first class graph query language.</p>
</div>
</div>
<div  id="_nodes" class="sect3 "  >
<h4>Nodes</h4>


<div class="paragraph">
<p>Cypher uses a pair of parentheses like <code>()</code>, <code>(n)</code> to represent a node, much like a circle on a whiteboard.
Recall that a node typically represents an entity in your domain.
An anonymous node, <code>()</code>, represents one or more nodes during a query processing where there are no restrictions of the type of node or the properties of the node.
When you specify <code>(n)</code> for a node, you are telling the query processor that for this query, use the variable <em>n</em> to represent nodes that will be processed later in the query for further query processing or for returning values from the query.</p>
</div>
</div>
<div  id="_labels" class="sect3 "  >
<h4>Labels</h4>


<div class="paragraph">
<p>Nodes in a graph are typically labeled. Labels are used to group nodes and filter queries against the graph.
That is, labels can be used to optimize queries.
In the <em>Movie</em> database you will be working with, the nodes in this graph are labeled <em>Movie</em> or <em>Person</em> to represent two types of nodes.</p>
</div>


<div class="paragraph">
<p>For example, you can see the labels in the database by simply clicking the Database icon in Neo4j Browser:</p>
</div>
<div class="imageblock" style="text-align: center;">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/NodeLabels.png" alt="NodeLabels" width="300">
</p>
</div>


<div class="paragraph">
<p>You can filter the types of nodes that you are querying, by specifying a <strong>label</strong> for a node.
A node can have zero or more labels.</p>
</div>


<div class="paragraph">
<p>Here are simplified syntax examples for specifying a node:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">()
(variable)
(:Label)
(variable:Label)
(:Label1:Label2)
(variable:Label1:Label2)</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Notice that a node must have the parentheses. The labels and the variable for a node are optional.</p>
</div>


<div class="paragraph">
<p>Here are examples of specifying nodes in Cypher:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">()					// anonymous node not be referenced later in the query
(p)					// variable p, a reference to a node used later
(:Person)			// anonymous node of type Person
(p:Person)			// p, a reference to a node of type Person
(p:Actor:Director)	// p, a reference to a node of types Actor and Director</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>A node can have multiple labels. For example a node can be created with a label of <em>Person</em> and that same node can be modified to also have the label of <em>Actor</em> and/or <em>Director</em>.</p>
</div>
</div>
<div  id="_comments_in_cypher" class="sect3 "  >
<h4>Comments in Cypher</h4>


<div class="paragraph">
<p>In Cypher, you can place a comment (starts with <code>//</code>) anywhere in your Cypher to specify that the rest of the line is interpreted as a comment.</p>
</div>
</div>
</div>
<div  id="_examining_the_data_model" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Examining the data model</h3>


<div class="paragraph">
<p>When you are first learning about the data (nodes, labels, etc.) in a graph, it is helpful to examine the data model of the graph.
You do so by executing <code>CALL db.schema</code>, which calls the Neo4j procedure that returns information about the nodes, labels, and relationships in the graph.</p>
</div>


<div class="paragraph">
<p>For example, when we run this procedure in our training environment, we see the following in the result pane.
Here we see that the graph has 2 labels defined for nodes, <em>Person</em> and <em>Movie</em>.
Each type of nodes is displayed in a different color.
The relationships between nodes are also displayed, which you will learn about later in this module.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/call_db.schema.png" alt="call_db.schema" width="500">
</p>
</div>
</div>
<div  id="_using_match_to_retrieve_nodes" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Using MATCH to retrieve nodes</h3>


<div class="paragraph">
<p>In this video, you will be introduced to using the <code>MATCH</code> statement to retrieve nodes from the graph in Neo4j Browser.</p>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Sz2C618QKN8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<div class="paragraph">
<p>&#160;<br>
The most widely used Cypher clause is  <code>MATCH</code>.
The <code>MATCH</code> clause performs a pattern match against the data in the graph.
During the query processing, the graph engine traverses the graph to find all nodes that match the graph pattern.
As part of query, you can return nodes or data from the nodes using the <code>RETURN</code> clause.
The <code>RETURN</code> clause must be the last clause of a query to the graph.
Later in this training, you will learn how to use <code>MATCH</code> to select nodes and data for updating the graph.
First, you will learn how to simply return nodes.</p>
</div>


<div class="paragraph">
<p>Here are simplified syntax examples for a query:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (variable)
RETURN variable</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (variable:Label)
RETURN variable</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Notice that the Cypher keywords <code>MATCH</code> and <code>RETURN</code> are upper-case.
This coding convention is described in the <em>Cypher Style Guide</em> and will be used in this training.
This <code>MATCH</code> clause returns all nodes in the graph, where the optional <em>Label</em> is used to return a subgraph if the graph contains nodes of different types.
The <em>variable</em> must be specified here, otherwise the query will have nothing to return.</p>
</div>


<div class="paragraph">
<p>Here are example queries to the <em>Movie</em> database:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (n) 			// returns all nodes in the graph
RETURN n</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person) 	// returns all Person nodes in the graph
RETURN p</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>When we execute the Cypher statement, <code>MATCH (p:Person) RETURN p</code>, the graph engine returns all nodes with the label <em>Person</em>.
The default view of the returned nodes are the nodes that were referenced by the variable <em>p</em>.</p>
</div>


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/PersonNodes-graph.png" alt="PersonNodes" width="500">
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title label"></div>
</td>
<td class="content">
When you specify a pattern for a <code>MATCH</code> clause, you should always specify a node label if possible. In doing so, the graph engine uses an index to retrieve the nodes which will perform better than not using a label for the <code>MATCH</code>.
</td>
</tr>
</table>
</div>
<div  id="_viewing_nodes_as_table_data" class="sect3 "  >
<h4>Viewing nodes as table data</h4>


<div class="paragraph">
<p>We can also view the nodes as table data where the nodes and their associated property values are shown in a JSON-style format:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/PersonNodes-table.png" alt="PersonNodes-table" width="500">
</p>
</div>


<div class="paragraph">
<p>When nodes are displayed as table values, the node labels and ids are not shown, only the property values for the nodes. Node ids are unique identifiers and are set by the graph engine when a node is created.</p>
</div>
</div>
</div>
<div  id="_exercise_1_retrieving_nodes" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3><strong>Exercise 1: Retrieving nodes</strong></h3>


<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 1.</p>
</div>
</div>
<div  id="_properties" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Properties</h3>


<div class="paragraph">
<p>In Neo4j, a node (and a relationship, which you will learn about later) can have properties that are used for further define a node.
A property is identified by its property key.
Recall that nodes are used to represent the entities of your business model.
A property is defined for a node and not for a type of node.
All nodes of the same type need not have the same properties.</p>
</div>


<div class="paragraph">
<p>For example, in the <em>Movie</em> graph, all <em>Movie</em> nodes have both <em>title</em>  and <em>released</em> properties.
However, it is not a requirement that every <em>Movie</em> node has a property, <em>tagline</em>.</p>
</div>
<div class="imageblock" style="text-align: center;">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MovieProperties.png" alt="MovieProperties" width="600">
</p>
</div>


<div class="paragraph">
<p>Properties can be used to filter queries  so that a subset of the graph is retrieved.
In addition, with the <code>RETURN</code> clause, you can return property values from the retrieved nodes, rather than the nodes.</p>
</div>
<div  id="_examining_property_keys" class="sect3 "  >
<h4>Examining property keys</h4>


<div class="paragraph">
<p>As you prepare to create Cypher queries that use property values to filter a query, you can view the values for property keys of a graph by simply clicking the Database icon in Neo4j Browser.
Alternatively, you can execute  <code>CALL db.propertyKeys</code>,  which calls the Neo4j library method that returns the property keys for the graph.</p>
</div>


<div class="paragraph">
<p>Here is what you will see in the result pane when you call the method to return the property keys in the <em>Movie</em> graph.
This result stream contains all property keys in the graph. It does not display which nodes utilize these property keys.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/call_db.PropertyKeys.png" alt="call_db.PropertyKeys" width="700">
</p>
</div>
</div>
<div  id="_retrieving_nodes_filtered_by_a_property_value" class="sect3 "  >
<h4>Retrieving nodes filtered by a property value</h4>


<div class="paragraph">
<p>You have learned previously that you can filter node retrieval by specifying a label.
Another way you can filter a retrieval is to specify a value for a property.
Any node that matches the value will be retrieved.</p>
</div>


<div class="paragraph">
<p>Here are  simplified syntax examples for a query where we specify one or more values for  properties that will be used to filter the query results and return a subset of the graph:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (variable {propertyKey: propertyValue})
RETURN variable</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (variable:Label {propertyKey: propertyValue})
RETURN variable</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (variable {propertyKey1: propertyValue1, propertyKey2: propertyValue2})
RETURN variable</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (variable:Label {propertyKey: propertyValue, propertyKey2: propertyValue2})
RETURN variable</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is an example where we filter the query results using a property value.
We only retrieve <em>Person</em> nodes that have a <em>born</em> property value of <em>1970</em>.</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person {born: 1970})
RETURN p</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MatchPersonBorn1970.png" alt="MatchPersonBorn1970" width="600">
</p>
</div>


<div class="paragraph">
<p>Here is an example where we specify two property values for the query.</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (m:Movie {released: 2003, tagline: 'Free your mind'})
RETURN m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>Here is the result returned:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/TwoPropertiesForFilter.png" alt="TwoPropertiesForFilter" width="500">
</p>
</div>


<div class="paragraph">
<p>As it turns out, there is only one movie with the <em>tagline</em>, <em>Free your mind</em> in the <em>Movie</em> database, but if we had specified a different year, the query would not have returned a value because when you specify properties, both properties must match.</p>
</div>
</div>
<div  id="_returning_property_values" class="sect3 "  >
<h4>Returning property values</h4>


<div class="paragraph">
<p>In this video, you will see how to return property values to the output stream when you retrieve nodes from the graph in  Neo4j Browser.</p>
</div>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Nb9tSFVrQuc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<div class="paragraph">
<p>&#160;<br>
Thus far, you have seen how to retrieve nodes and return nodes (entire graph or a subset of the graph).
You can use the <code>RETURN</code> clause to return property values of nodes retrieved.</p>
</div>


<div class="paragraph">
<p>Here are simplified syntax examples for returning property values, rather than nodes:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (variable {prop1: value})
RETURN variable.prop2</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (variable:Label {prop1: value})
RETURN variable.prop2</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (variable:Label {prop1: value, prop2: value})
RETURN variable.prop3</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (variable {prop1:value})
RETURN variable.prop2, variable.prop3</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>In this example, we use the <em>born</em> property to refine the query, but rather than returning the nodes, we return the <em>name</em>  and <em>born</em> values for every node that satisfies the query.</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person {born: 1965})
RETURN p.name, p.born</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MatchPersonBorn1965.png" alt="MatchPersonBorn1965" width="600">
</p>
</div>
</div>
<div  id="_specifying_aliases" class="sect3 "  >
<h4>Specifying aliases</h4>


<div class="paragraph">
<p>If you want to customize the headings for a table containing property values, you can specify <strong>aliases</strong> for column headers.</p>
</div>


<div class="paragraph">
<p>Here is the simplified syntax for specifying an alias for a property value:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (variable:Label {propertyKey1: propertyValue1})
RETURN variable.propertyKey2 AS alias2</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title label"></div>
</td>
<td class="content">
If you want a heading to contain a space between strings, you must specify the alias with the back tick <em>`</em> character, rather than a single or double quote character. In fact, you can specify any variable, label, relationship type, or property key with a space also by using the back tick <em>`</em> character.
</td>
</tr>
</table>
</div>


<div class="paragraph">
<p>Here we specify aliases for the returned property values:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person {born: 1965})
RETURN p.name AS name, p.born AS `birth year`</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/UsingAliases.png" alt="UsingAliases" width="700">
</p>
</div>
</div>
</div>
<div  id="_exercise_2_filtering_queries_using_property_values" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3><strong>Exercise 2: Filtering queries using property values</strong></h3>


<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 2.</p>
</div>
</div>
<div  id="_relationships" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Relationships</h3>


<div class="paragraph">
<p>Relationships are what make Neo4j graphs such a powerful tool for connecting complex and deep data.
A relationship is a <strong>directed</strong> connection between two nodes that has a <strong>relationship type</strong> (name).
In addition, a relationship can have properties, just like nodes.
In a graph where you want to retrieve nodes, you can use relationships between nodes to filter a query.</p>
</div>
<div  id="_ascii_art" class="sect3 "  >
<h4>ASCII art</h4>


<div class="paragraph">
<p>Thus far, you have learned how to specify a node in a <code>MATCH</code> clause.
You can specify nodes and their relationships to traverse the graph and quickly find the data of interest.</p>
</div>


<div class="paragraph">
<p>Here is how Cypher uses ASCII art to specify path used for a query:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">()			// a node
()--()	    // 2 nodes have some type of relationship
()--&gt;()	    // the first node has a relationship to the second node
()&lt;--()	    // the second node has a relationship to the first node</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
</div>
<div  id="_querying_using_relationships" class="sect3 "  >
<h4>Querying using relationships</h4>


<div class="paragraph">
<p>In your <code>MATCH</code> clause, you specify how you want a relationship to be used to perform the query. The relationship can be specified with or without direction.</p>
</div>


<div class="paragraph">
<p>Here are simplified syntax examples for retrieving a set of nodes that satisfy one or more directed and typed relationships:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (node1)-[:REL_TYPE]-&gt;(node2)
RETURN node1, node2</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher-syntax">MATCH (node1)-[:REL_TYPEA \| :REL_TYPEB]-&gt;(node2)
RETURN node1, node2</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p><em>where:</em></p>
</div>
<table class="tableblock frame-none grid-all stripes-none" style="width: 80%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>node1</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is a specification of a node where you may include node labels and property values for filtering.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>:REL_TYPE</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is the type (name) for the relationship. For this syntax the relationship is from <em>node1</em> to <em>node2</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>:REL_TYPEA</em> , <em>:REL_TYPEB</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">are the relationships from <em>node1</em> to <em>node2.</em> The nodes are returned if at least one of the relationships exists.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock"><em>node2</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: white;"><p class="tableblock">is a specification of a node where you may include node labels and property values for filtering.</p></td>
</tr>
</tbody>
</table>


<div class="paragraph">
<p></p>
</div>
</div>
<div  id="_examining_relationships" class="sect3 "  >
<h4>Examining relationships</h4>


<div class="paragraph">
<p>You can run <code>CALL db.schema</code> to view the relationship types in the graph.
In the <em>Movie</em> graph, we see these relationships between the nodes:</p>
</div>


<div class="paragraph">
<p>Here we see that this graph has a total of 6 relationship types between the nodes. Some <em>Person</em> nodes are connected to other <em>Person</em> nodes using the <em>FOLLOWS</em> relationship type.
All of the other relationships in this graph are from <em>Person</em> nodes to <em>Movie</em> nodes.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/call_db.schema-relationships.png" alt="call_db.schema-relationships" width="600">
</p>
</div>


<div class="paragraph">
<p>The relationship types can also be viewed by selecting the arrow to the right in the relationship type row.</p>
</div>
</div>
<div  id="_using_a_relationship_in_a_query" class="sect3 "  >
<h4>Using a relationship in a query</h4>


<div class="paragraph">
<p>Here is an example where we retrieve the <em>Person</em> nodes that have the <em>ACTED_IN</em> relationship to the <em>Movie</em>, <em>The Matrix</em>.
In other words, show me the actors that acted in <em>The Matrix</em>.</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person)-[rel:ACTED_IN]-&gt;(m:Movie {title: 'The Matrix'})
RETURN p, rel, m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ActorsInMatrix.png" alt="ActorsInMatrix" width="600">
</p>
</div>


<div class="paragraph">
<p>For this query, we are using the variable <em>p</em> to represent the <em>Person</em> nodes during the query, the variable <em>m</em> to represent the <em>Movie</em> node retrieved, and the variable <em>rel</em> to represent the relationship for the relationship type, <em>ACTED_IN</em>.
We return a graph with the <em>Person</em> nodes, the <em>Movie</em> node and their <em>ACTED_IN</em> relationships.</p>
</div>


<div class="paragraph">
<p><strong>Important:</strong> You specify node labels whenever possible in your queries as it optimizes the retrieval in the graph engine.
That is, you should <strong>not</strong> specify this same query as:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p)-[rel:ACTED_IN]-&gt;(m {title:'The Matrix'})
RETURN p,m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
</div>
<div  id="_querying_by_multiple_relationships" class="sect3 "  >
<h4>Querying by multiple relationships</h4>


<div class="paragraph">
<p>Here is another example where we want to know the movies that <em>Tom Hanks</em> acted in and directed:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person {name: 'Tom Hanks'})-[:ACTED_IN|:DIRECTED]-&gt;(m:Movie)
RETURN p.name, m.title</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/TomHanksActedDirected.png" alt="ActorsInMatrix" width="700">
</p>
</div>


<div class="paragraph">
<p>Notice that there are multiple rows returned for the movie, <em>That Thing You Do</em>. This is because <em>Tom Hanks</em> acted in and directed that movie.</p>
</div>
</div>
<div  id="_using_anonymous_nodes_in_a_query" class="sect3 "  >
<h4>Using anonymous nodes in a query</h4>


<div class="paragraph">
<p>Suppose you wanted to retrieve the actors that acted in <em>The Matrix</em>, but you do not need any information returned about the <em>Movie</em> node.
You need not specify a variable for a node in a query if that node is not returned or used for later processing in the query.
You can simply use the anonymous node in the query as follows:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person)-[:ACTED_IN]-&gt;(:Movie {title: 'The Matrix'})
RETURN p.name</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AnonymousMovieNode.png" alt="AnonymousMovieNode" width="600">
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title label"></div>
</td>
<td class="content">
A best practice is to place named nodes (those with variables) before anonymous nodes in a <code>MATCH</code> clause.
</td>
</tr>
</table>
</div>
</div>
<div  id="_using_an_anonymous_relationship_for_a_query" class="sect3 "  >
<h4>Using an anonymous relationship for a query</h4>


<div class="paragraph">
<p>Suppose you want to find all people who are in any way connected to the movie, <em>The Matrix</em>.
You can specify an empty relationship type in the query so that all relationships are traversed and the appropriate results are returned.
In this example, we want to retrieve all <em>Person</em> nodes that have any type of connection to the <em>Movie</em> node, with the <em>title</em>, <em>The Matrix</em>.
This query returns more nodes with the relationships types, <em>DIRECTED</em>, <em>ACTED_IN</em>, and <em>PRODUCED</em>.</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person)--&gt;(m:Movie {title: 'The Matrix'})
RETURN p, m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AllRelationshipsMatrix.png" alt="AllRelationshipsMatrix" width="600">
</p>
</div>


<div class="paragraph">
<p>Here are other examples of using the anonymous relationship:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person)--(m:Movie {title: 'The Matrix'})
RETURN p, m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (m:Movie)&lt;--(p:Person {name: 'Keanu Reeves'})
RETURN p, m</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>In this training, we will use <code>--&gt;</code>, <code>--</code>, and <code>&lt;--</code> to represent anonymous relationships as it is a Cypher best practice.</p>
</div>
</div>
<div  id="_retrieving_the_relationship_types" class="sect3 "  >
<h4>Retrieving the relationship types</h4>


<div class="paragraph">
<p>There is a built-in function, <code>type()</code> that returns the relationship type of a relationship.</p>
</div>


<div class="paragraph">
<p>Here is an example where we use the <em>rel</em> variable to hold the relationships retrieved. We then use this variable to return the relationship types.</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person)-[rel]-&gt;(:Movie {title:'The Matrix'})
RETURN p.name, type(rel)</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/MatrixRelationshipTypes.png" alt="MatrixRelationshipTypes" width="700">
</p>
</div>
</div>
<div  id="_retrieving_properties_for_relationships" class="sect3 "  >
<h4>Retrieving properties for relationships</h4>


<div class="paragraph">
<p>Recall that a node can have as set of properties, each identified by its property key.
Relationships can also have properties.
This enables your graph model to provide more data about the relationships between the nodes.</p>
</div>


<div class="paragraph">
<p>Here is an example from the <em>Movie</em> graph.
The movie, <em>The Da Vinci Code</em> has two people that reviewed it, <em>Jessica Thompson</em> and <em>James Thompson</em>. Each of these <em>Person</em> nodes has the <em>REVIEWED</em> relationship to the <em>Movie</em> node for <em>The Da Vinci Code</em>.
Each relationship has properties that further describe the relationship using the <em>summary</em> and <em>rating</em> properties.</p>
</div>
<div class="imageblock" style="text-align: center;">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/REVIEWEDProperties.png" alt="ReviewedProperties" width="700">
</p>
</div>


<div class="paragraph">
<p>Just as you can specify property values for filtering nodes for a query, you can specify property values for a relationship. This query returns the name of of the person who gave the movie a rating of <em>65.</em></p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (p:Person)-[:REVIEWED {rating: 65}]-&gt;(:Movie {title: 'The Da Vinci Code'})
RETURN p.name</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ReturnPersonRating65.png" alt="ReturnPersonRating65" width="800">
</p>
</div>
</div>
</div>
<div  id="_using_patterns_for_queries" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Using patterns for queries</h3>


<div class="paragraph">
<p>Thus far, you have learned how to specify nodes, properties, and relationships in your Cypher queries.
Since relationships are directional, it is important to understand how patterns are used in graph traversal during query execution. How a graph is traversed for a query depends on what directions are defined for relationships and how the pattern is specified in the <code>MATCH</code> clause.</p>
</div>


<div class="paragraph">
<p>Here is an example of where the <em>FOLLOWS</em> relationship is used in the <em>Movie</em> graph.
Notice that this relationship is directional.</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/FollowsRelationships.png" alt="FollowsRelationships" width="500">
</p>
</div>


<div class="paragraph">
<p>We can perform a query that returns all <em>Person</em> nodes who follow <em>Angela Scope</em>:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH  (p:Person)-[:FOLLOWS]-&gt;(:Person {name:'Angela Scope'})
RETURN p</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AngelaFollowers.png" alt="AngelaFollowers" width="700">
</p>
</div>


<div class="paragraph">
<p>If we reverse the direction in the pattern, the query returns different results:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH  (p:Person)&lt;-[:FOLLOWS]-(:Person {name:'Angela Scope'})
RETURN p</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/FollowedByAngela.png" alt="FollowedByAngela" width="700">
</p>
</div>
<div  id="_querying_by_any_direction_of_the_relationship" class="sect3 "  >
<h4>Querying by any direction of the relationship</h4>


<div class="paragraph">
<p>We can also find out what <em>Person</em> nodes are connected by the <em>FOLLOWED</em> relationship in either direction by removing the directional arrow from the pattern.</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH  (p1:Person)-[:FOLLOWS]-(p2:Person {name:'Angela Scope'})
RETURN p1, p2</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/AngelaFromTo.png" alt="AngelaFromTo" width="700">
</p>
</div>
</div>
<div  id="_traversing_relationships" class="sect3 "  >
<h4>Traversing relationships</h4>


<div class="paragraph">
<p>Since we have a graph, we can traverse through nodes to obtain relationships further into the traversal.</p>
</div>


<div class="paragraph">
<p>For example, we can write a Cypher query to return all followers of the followers of <em>Jessica Thompson</em>.</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH  (p:Person)-[:FOLLOWS]-&gt;(:Person)-[:FOLLOWS]-&gt;(:Person {name:'Jessica Thompson'})
RETURN p</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/FollowersOfJessicaFollowers.png" alt="FollowersOfJessicaFollowers" width="800">
</p>
</div>


<div class="paragraph">
<p>This query could also be modified to return each person along the path by specifying variables for the nodes and returning them. In addition, you can assign a variable to the path and return the path as follows:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH  path = (:Person)-[:FOLLOWS]-&gt;(:Person)-[:FOLLOWS]-&gt;(:Person {name:'Jessica Thompson'})
RETURN  path</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/ReturnPath.png" alt="ReturnPath" width="700">
</p>
</div>
</div>
<div  id="_using_relationship_direction_to_optimize_a_query" class="sect3 "  >
<h4>Using relationship direction to optimize a query</h4>


<div class="paragraph">
<p>When querying the relationships in a graph, you can take advantage of the direction of the relationship to traverse the graph.
For example, suppose we wanted to get a result stream containing rows of actors and the movies they acted in, along with the director of the particular movie.</p>
</div>


<div class="paragraph">
<p>Here is the Cypher query to do this. Notice that the direction of the traversal is used to focus on a particular movie during the query:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (a:Person)-[:ACTED_IN]-&gt;(m:Movie)&lt;-[:DIRECTED]-(d:Person)
RETURN a.name, m.title, d.name</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>The result returned is:</p>
</div>
<div class="imageblock thumb">
<p class="content">
<img src="https://s3-us-west-1.amazonaws.com/data.neo4j.com/intro-neo4j/img/TraversalInTwoDirections.png" alt="TraversalInTwoDirections" width="800">
</p>
</div>


<div class="paragraph">
<p>In this query, notice that there are multiple records returned for a movie, each with its set of values for the actor and director.</p>
</div>


<div class="paragraph">
<p>Later in this training, you will learn other ways to query data and how to control the results returned.</p>
</div>
</div>
</div>
<div  id="_cypher_style_recommendations" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Cypher style recommendations</h3>


<div class="paragraph">
<p>Here are the <strong>Neo4j-recommended</strong> Cypher coding standards that we use in this training:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
Node labels are CamelCase and begin with an upper-case letter (examples: <em>Person</em>, <em>NetworkAddress</em>). Note that node labels are case-sensitive.
</li>
<li>
Property keys, variables, parameters, aliases, and functions are camelCase and begin with a lower-case letter (examples: <em>businessAddress</em>, <em>title</em>). Note that these elements are case-sensitive.
</li>
<li>
Relationship types are in upper-case and can use the underscore. (examples: <em>ACTED_IN</em>, <em>FOLLOWS</em>). Note that relationship types are case-sensitive and that you cannot use the "-" character in a relationship type.
</li>
<li>
Cypher keywords are upper-case (examples: <code>MATCH</code>, <code>RETURN</code>). Note that Cypher keywords are case-insensitive, but a best practice is to use upper-case.
</li>
<li>
String constants are in single quotes, unless the string contains a quote or apostrophe (examples: <em>'The Matrix'</em>, <em>"Something&#8217;s Gotta Give"</em>). Note that  you can also escape single or double quotes within strings that are quoted with the same using a backslash character.
</li>
<li>
Specify variables only when needed for use later in the Cypher statement.
</li>
<li>
Place named nodes and relationships (that use variables) before anonymous nodes and relationships in your <code>MATCH</code> clauses when possible.
</li>
<li>
Specify anonymous relationships with <code>--&gt;</code>, <code>--</code>, or <code>&lt;--</code>
</li>
</ul>
</div>


<div class="paragraph">
<p>Here is an example showing some best coding practices:</p>
</div>
<div class="listingblock">
<div class="content code-panel" style="width: 800px; height: auto; border: medium 1px;">
<pre style="font-size: 16px; font-weight: 100;"  class="code cm-s-neo" data-lang="cypher">MATCH (:Person {name: 'Diane Keaton'})-[movRel:ACTED_IN]-&gt;
(:Movie {title:"Something's Gotta Give"})
RETURN movRel.roles</pre>
</div>
</div>
<!--
data-lang=”{language}” class=””
-->


<div class="paragraph">
<p>We recommend that you follow the <a href="https://github.com/opencypher/openCypher/blob/master/docs/style-guide.adoc" target="_blank" rel="noopener">Cypher Style Guide</a> when writing your Cypher statements.</p>
</div>
</div>
<div  id="_exercise_3_filtering_queries_using_relationships" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3><strong>Exercise 3: Filtering queries using relationships</strong></h3>


<div class="paragraph">
<p>In the query edit pane of Neo4j Browser, execute the browser command: <kbd>:play intro-neo4j-exercises</kbd>
and follow the instructions for Exercise 3.</p>
</div>
</div>
</div>
<div  id="module-4" class="sect1 quiz columns medium-12" style='padding-left: 0;' >
<h3>Check your understanding</h3>
<div  id="_question_1" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Question 1</h3>


<div class="paragraph">
<p>Suppose you have a graph that contains nodes representing customers and other business entities for your application.
The node label in the database for a customer is <em>Customer</em>. Each <em>Customer</em> node has a property named <em>email</em> that contains the customer&#8217;s email address.
What Cypher query do you execute to return the email addresses for all customers in the graph?</p>
</div>


<div class="paragraph">
<p>Select the correct answer.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (n) RETURN n.Customer.email</code></span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="required-answer"><code>MATCH (c:Customer) RETURN c.email</code></span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (Customer) RETURN email</code></span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (c) RETURN Customer.email</code></span>
</li>
</ul>
</div>
</div>
<div  id="_question_2" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Question 2</h3>


<div class="paragraph">
<p>Suppose you have a graph that contains <em>Customer</em> and <em>Product</em> nodes. A <em>Customer</em> node can have a <em>BOUGHT</em> relationship with a <em>Product</em> node.
<em>Customer</em> nodes can have other relationships with <em>Product</em> nodes.
A <em>Customer</em> node has a property named <em>customerName</em>.
A <em>Product</em> node has a property named <em>productName</em>.
What Cypher query do you execute to return all of the products (by name) bought by customer 'ABCCO'.</p>
</div>


<div class="paragraph">
<p>Select the correct answer.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (c:Customer {customerName: 'ABCCO'}) RETURN c.BOUGHT.productName</code></span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (:Customer 'ABCCO')-[:BOUGHT]->(p:Product) RETURN p.productName</code></span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer"><code>MATCH (p:Product)<-[:BOUGHT_BY]-(:Customer 'ABCCO') RETURN p.productName</code></span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="required-answer"><code>MATCH (:Customer {customerName: 'ABCCO'})-[:BOUGHT]->(p:Product) RETURN p.productName</code></span>
</li>
</ul>
</div>
</div>
<div  id="_question_3" class="sect2 columns medium-12" style='padding-left: 0;' >
<h3>Question 3</h3>


<div class="paragraph">
<p>When <span class="underline">must</span> you use a variable in a MATCH clause?</p>
</div>


<div class="paragraph">
<p>Select the correct answer.</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer">When you want to query the graph using a node label.</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer">When you specify a property value to match the query.</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="required-answer">When you want to use the node or relationship to return a result.</span>
</li>
<li>
<input type="checkbox" data-item-complete="0"> <span class="false-answer">When the query involves 2 types of nodes.</span>
</li>
</ul>
</div>
</div>
</div>
<div  id="_summary" class="sect1 columns medium-12" style='padding-left: 0;' >
<h3>Summary</h3>


<div class="paragraph">
<p>You should now be able to write Cypher statements to:</p>
</div>
<div class="ulist square">
<ul class="square">
<li>
Retrieve nodes from the graph.
</li>
<li>
Filter nodes retrieved using property values of nodes.
</li>
<li>
Retrieve property values from nodes in the graph.
</li>
<li>
Filter nodes retrieved using relationships.
</li>
</ul>
</div>
</div>
<div  id="_grade_quiz_and_continue" class="sect1 columns medium-12" style='padding-left: 0;' >
<h3>Grade Quiz and Continue</h3>
<a class="next-section medium button" href="../part-5/">Continue to Module 5</a>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<script src="https://js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
<script src="https://graphacademy.neo4j.com/training-classes/js/classes-v2.js" type="text/javascript"></script>
<script src="https://graphacademy.neo4j.com/training-quizes/js/quizes-v2.js" type="text/javascript"></script>

 <link rel='stylesheet' id='neo-codemirror-css'
    href="https://neo4j.com/wp-content/themes/neo4jweb/assets/css/codemirror-neo.css?ver=4.5" type='text/css'
    media='screen'/>

 <script type='text/javascript'>
  $('.admonitionblock.note').find('.icon').html('NOTE');
  $('.admonitionblock.warning').find('.icon').html('WARNING');
  $('.admonitionblock.information').find('.icon').html('INFO');

  var isBlock = /^(p|li|div|h\\d|pre|blockquote|td)$/;

  function textContent(node, out) {
    if (node.nodeType == 3) return out.push(node.nodeValue);
    for (var ch = node.firstChild; ch; ch = ch.nextSibling) {
      textContent(ch, out);
      if (isBlock.test(node.nodeType)) out.push("\n");
    }
  }

  CodeMirror.colorize = function(collection, defaultMode) {
    if (!collection) collection = document.body.getElementsByTagName("pre");

    for (var i = 0; i < collection.length; ++i) {
      var syntax = false;
      var node = collection[i];
      var mode = node.getAttribute("data-lang") || defaultMode;
      if (mode == "cypher-syntax") {
        syntax = true;
        mode = "cypher";
      }
      if (!mode) continue;

      var text = [];
      textContent(node, text);
      node.innerHTML = "";
      CodeMirror.runMode(text.join(""), mode, node);

      node.className += " cm-s-default";
      if (syntax) {
        node.className += " cypher-syntax";
      }
    }
  };

  $( document ).ready(function() {
    if (CodeMirror.colorize) {
      CodeMirror.colorize(document.body.getElementsByTagName("pre"), 'cypher');
    }
  });
 </script>


<script>
  window.intercomSettings = {
    app_id: "dt0ig5ab",
    hide_default_launcher: true
  };
</script>
<script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/dt0ig5ab';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>

<!-- JWT decoder: ONLY USE TO SEE UN-VERIFIED VALUES -->
<script src="https://neo4jsandbox.com/js/jwt-decode.min.js"></script>


<script>
const SITE_URL = window.location;

var getTimeDiff = function(time1, time2) {
  var hourDiff = time2 - time1;
  var diffDays = Math.floor(hourDiff / 86400000);
  var diffHrs = Math.floor((hourDiff % 86400000) / 3600000);
  var diffMins = Math.floor(((hourDiff % 86400000) % 3600000) / 60000);
  return {"days": diffDays, "hours": diffHrs, "mins": diffMins};
}

var attemptRenewToken = function(silent, nextTimeout, nextTimeoutSilent) {
  console.log('renewAuth attempting');
  var iframe = document.createElement('iframe');
  iframe.style.display = 'none';
  iframe.src = 'https://neo4j.com/accounts/login?targetUrl=' + encodeURIComponent(SITE_URL);
  document.body.appendChild(iframe);
  if (nextTimeout) {
      setTimeout(
        function () {
          attemptRenewToken(nextTimeoutSilent, nextTimeout, nextTimeoutSilent);
        }, nextTimeout
      );
  }
}

var logout = function() {
  window.location = 'https://neo4j.com/graphacademy/online-training/introduction-to-neo4j/'
}

$( document ).ready(function() {
    var id_token = Cookies.get("com.neo4j.accounts.idToken");
    var decoded_token = jwt_decode(id_token);
    var expiresIn = getTimeDiff(Date.now(), (decoded_token.exp) * 1000);
    if (expiresIn.days > 0 || expiresIn.hours > 0) {
      // token is good.
    } else if (expiresIn.days == 0 && expiresIn.hours == 0 && expiresIn.mins > 1 && expiresIn.mins < 60) {
        // expiring soon, let's immediately get a new token
        attemptRenewToken(true, 1000*60*30, false);
    } else {
        // token is already expired, log user out in UI; token won't work
        logout();
    }
    getQuizStatus();


    var userInfoIntercom = Cookies.getJSON("com.neo4j.accounts.userInfo");
    if (userInfoIntercom) {
      try {
        window.Intercom("update", {
          app_id: "dt0ig5ab",
          name: userInfoIntercom.name,
          email: userInfoIntercom.email,
          user_id: userInfoIntercom.sub,
          hide_default_launcher: true
        });;
      } catch (err) {
        console.error(err);
      }
    }
    Intercom('trackEvent','training-introv2-view');
});
</script>
<script>
$( document ).ready(function() {
  Intercom('trackEvent','training-introv2-view-part4');
});
</script>
</div>
</div>
<div id="sidebar-wrapper">
        
        <div id="toc" class="toc2">
        <div id="toctitle">Module: Introduction to Cypher</div>
        <ul class="sectlevel1">
<li><a href="#_about_this_module">About this module</a>
<ul class="sectlevel2">
<li><a href="#_what_is_cypher">What is Cypher?</a>
<ul class="sectlevel3">
<li><a href="#_cypher_is_ascii_art">Cypher is ASCII art</a></li>
<li><a href="#_nodes">Nodes</a></li>
<li><a href="#_labels">Labels</a></li>
<li><a href="#_comments_in_cypher">Comments in Cypher</a></li>
</ul>
</li>
<li><a href="#_examining_the_data_model">Examining the data model</a></li>
<li><a href="#_using_match_to_retrieve_nodes">Using MATCH to retrieve nodes</a>
<ul class="sectlevel3">
<li><a href="#_viewing_nodes_as_table_data">Viewing nodes as table data</a></li>
</ul>
</li>
<li><a href="#_exercise_1_retrieving_nodes"><strong>Exercise 1: Retrieving nodes</strong></a></li>
<li><a href="#_properties">Properties</a>
<ul class="sectlevel3">
<li><a href="#_examining_property_keys">Examining property keys</a></li>
<li><a href="#_retrieving_nodes_filtered_by_a_property_value">Retrieving nodes filtered by a property value</a></li>
<li><a href="#_returning_property_values">Returning property values</a></li>
<li><a href="#_specifying_aliases">Specifying aliases</a></li>
</ul>
</li>
<li><a href="#_exercise_2_filtering_queries_using_property_values"><strong>Exercise 2: Filtering queries using property values</strong></a></li>
<li><a href="#_relationships">Relationships</a>
<ul class="sectlevel3">
<li><a href="#_ascii_art">ASCII art</a></li>
<li><a href="#_querying_using_relationships">Querying using relationships</a></li>
<li><a href="#_examining_relationships">Examining relationships</a></li>
<li><a href="#_using_a_relationship_in_a_query">Using a relationship in a query</a></li>
<li><a href="#_querying_by_multiple_relationships">Querying by multiple relationships</a></li>
<li><a href="#_using_anonymous_nodes_in_a_query">Using anonymous nodes in a query</a></li>
<li><a href="#_using_an_anonymous_relationship_for_a_query">Using an anonymous relationship for a query</a></li>
<li><a href="#_retrieving_the_relationship_types">Retrieving the relationship types</a></li>
<li><a href="#_retrieving_properties_for_relationships">Retrieving properties for relationships</a></li>
</ul>
</li>
<li><a href="#_using_patterns_for_queries">Using patterns for queries</a>
<ul class="sectlevel3">
<li><a href="#_querying_by_any_direction_of_the_relationship">Querying by any direction of the relationship</a></li>
<li><a href="#_traversing_relationships">Traversing relationships</a></li>
<li><a href="#_using_relationship_direction_to_optimize_a_query">Using relationship direction to optimize a query</a></li>
</ul>
</li>
<li><a href="#_cypher_style_recommendations">Cypher style recommendations</a></li>
<li><a href="#_exercise_3_filtering_queries_using_relationships"><strong>Exercise 3: Filtering queries using relationships</strong></a></li>
</ul>
</li>
<li><a href="#module-4">Check your understanding</a>
<ul class="sectlevel2">
<li><a href="#_question_1">Question 1</a></li>
<li><a href="#_question_2">Question 2</a></li>
<li><a href="#_question_3">Question 3</a></li>
</ul>
</li>
<li><a href="#_summary">Summary</a></li>
<li><a href="#_grade_quiz_and_continue">Grade Quiz and Continue</a></li>
</ul>
        </div>
<div id="progress" style="position:absolute; bottom:100;"></div>
</div>